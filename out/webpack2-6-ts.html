<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Yangger Blog | undefined</title><meta property="og:title" content="Yangger Blog | undefined"/><meta name="twitter:title" content="Yangger Blog | undefined"/><meta name="description" content="Yanggerçš„åšå®¢"/><meta property="og:description" content="Yanggerçš„åšå®¢"/><meta name="twitter:description" content="Yanggerçš„åšå®¢"/><meta property="og:image" content="http://admin.yangger.me/uploads/default_image_fb02149608.png"/><meta name="twitter:image" content="http://admin.yangger.me/uploads/default_image_fb02149608.png"/><meta name="image" content="http://admin.yangger.me/uploads/default_image_fb02149608.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="12"/><link rel="preload" href="https://cdn.yangger.cn/_next/static/css/27838d0620568f600217.css" as="style"/><link rel="stylesheet" href="https://cdn.yangger.cn/_next/static/css/27838d0620568f600217.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://cdn.yangger.cn/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="https://cdn.yangger.cn/_next/static/chunks/webpack-fca13b024832de4f9165.js" defer=""></script><script src="https://cdn.yangger.cn/_next/static/chunks/framework-92300432a1172ef1338b.js" defer=""></script><script src="https://cdn.yangger.cn/_next/static/chunks/main-4777350f2a9ff73ea2b0.js" defer=""></script><script src="https://cdn.yangger.cn/_next/static/chunks/pages/_app-0d329f71441799666960.js" defer=""></script><script src="https://cdn.yangger.cn/_next/static/chunks/951-4301b1d6b4e0621d5def.js" defer=""></script><script src="https://cdn.yangger.cn/_next/static/chunks/344-e076dfeee38c48fd427b.js" defer=""></script><script src="https://cdn.yangger.cn/_next/static/chunks/pages/%5Bslug%5D-e61c86dbf249d28e2ead.js" defer=""></script><script src="https://cdn.yangger.cn/_next/static/jcy5ipSxzxBmo7PK3zeT2/_buildManifest.js" defer=""></script><script src="https://cdn.yangger.cn/_next/static/jcy5ipSxzxBmo7PK3zeT2/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-wrap"><aside class="flex flex-wrap flex-col w-full relative lg:w-275/16 lg:h-auto lg:border-r dark:border-primary lg:pl-px24"><div class="profile flex w-full relative lg:h-px250 lg:border-b dark:border-primary"><div class="absolute top-px29 left-px17 flex flex-wrap items-center z-20 lg:top-px33 lg:left-0 lg:w-px230 lg:h-px33 xl:top-px40 xl:w-px278 xl:h-px40"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" role="presentation" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc3IiBoZWlnaHQ9IjMzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></div><noscript><img alt="logo" srcSet="_next/static/image/public/dark-logo.982b262378b503d5085e0bfeaf430077.svg?auto=format&amp;fit=max&amp;w=256 1x, _next/static/image/public/dark-logo.982b262378b503d5085e0bfeaf430077.svg?auto=format&amp;fit=max&amp;w=384 2x" src="_next/static/image/public/dark-logo.982b262378b503d5085e0bfeaf430077.svg?auto=format&amp;fit=max&amp;w=384" decoding="async" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="w-px203 h-px29"/></noscript><img alt="logo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="w-px203 h-px29" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div><div class="rounded-full ml-px10 w-px10 h-px10 transition-all dark:bg-white"></div><p class="text-primary w-full mt-px16 font-medium text-base hidden">Personal profile</p></div><div class="absolute transition-all z-10 top-0 left-0 lg:-ml-px24 lg:pl-px24 w-full h-1/2 bg-gradient-to-b from-black to-transparent opacity-100 lg:opacity-0"></div><div class="person flex mx-auto justify-center w-full"><div style="display:block;overflow:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;margin:0"><noscript><img alt="person" sizes="100vw" srcSet="_next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=640 640w, _next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=750 750w, _next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=828 828w, _next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=1080 1080w, _next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=1200 1200w, _next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=1920 1920w, _next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=2048 2048w, _next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=3840 3840w" src="_next/static/image/public/dark-person.3384c51bef8dc14a1866c96d4fde83fd.svg?auto=format&amp;fit=max&amp;w=3840" decoding="async" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></noscript><img alt="person" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="tag-list w-full relative border-b dark:border-primary hidden lg:flex"><div class="inner flex-col gap-y-px10 h-px300 flex w-full overflow-y-scroll overflow-x-hidden"><div class="text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer mt-px40">#<!-- -->BABEL<!-- --> (<!-- -->2<!-- -->)</div><div class="text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer">#<!-- -->WEBPACK<!-- --> (<!-- -->2<!-- -->)</div><div class="text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer">#<!-- -->NGINX<!-- --> (<!-- -->1<!-- -->)</div><div class="text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer">#<!-- -->SSR<!-- --> (<!-- -->1<!-- -->)</div><div class="text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer">#<!-- -->ELEMENT-UI<!-- --> (<!-- -->1<!-- -->)</div><div class="text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer">#<!-- -->TYPESCRIPT<!-- --> (<!-- -->1<!-- -->)</div><div class="text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer">#<!-- -->MARKDOWN<!-- --> (<!-- -->1<!-- -->)</div></div><div class="absolute z-10 bottom-0 left-0 w-full h-1/2 bg-gradient-to-b from-transparent to-black pointer-events-none"></div></div><div class="subscribe w-full relative hidden lg:flex pt-px40 gap-y-px20 flex-col"><div class="flex items-center text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer"><iconpark-icon color="#7BF0BE" size="28" name="mail"></iconpark-icon><span class="mx-px10">Â·</span><span>E-mail</span></div><div class="flex items-center text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer"><iconpark-icon color="#7BF0BE" size="28" name="dribbble"></iconpark-icon><span class="mx-px10">Â·</span><span>Dribbble</span></div><div class="flex items-center text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer"><iconpark-icon color="#7BF0BE" size="28" name="github"></iconpark-icon><span class="mx-px10">Â·</span><span>Github</span></div><div class="flex items-center text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer"><iconpark-icon color="#7BF0BE" size="28" name="sina"></iconpark-icon><span class="mx-px10">Â·</span><span>Sina</span></div><div class="flex items-center text-base dark:text-primary transform hover:translate-x-px6 transition-all hover:text-white cursor-pointer"><iconpark-icon color="#7BF0BE" size="28" name="twitter"></iconpark-icon><span class="mx-px10">Â·</span><span>Twitter</span></div></div></aside><div class="flex flex-wrap flex-1 flex-col min-h-screen"><main class="flex flex-wrap flex-row relative mx-5 md:mx-16 space-x-0"><article class="dark:text-white"><header class="mb-2 mt-px60"><div class="date text-xs leading-5 dark:text-grayGreen">2021 / 02 / 05</div><h1 class="text-2xl leading-10/15 md:leading-10/15 font-bold dark:text-white cursor-pointer transition-all dark:hover:text-primary md:text-4xl">webpack2.6å‡çº§tsæ”¯æŒ</h1><p class="mt-px16 mb-px24 text-opacity-80 text-white flex items-center gap-px8"><span class="text-sm">æœ¬æ–‡å­—æ•°: <!-- -->8590</span><span class="text-sm">é˜…è¯»æ—¶é—´: <!-- -->21<!-- -->åˆ†é’Ÿ</span></p></header><footer><div class="meta flex flex-wrap"><div class="tags flex flex-wrap gap-px14"><div class="flex items-center tag py-px2 px-px17 rounded-full text-sm transition-all h-px23 cursor-pointer dark:text-primary border border-primary border-opacity-50 dark:bg-opacity-10 dark:bg-primary hover:pr-px32"><span class="relative">#<!-- -->BABEL<div class="absolute left-full animate-short-arrow ml-px4 w-0 transition-all overflow-hidden top-0"><iconpark-icon color="#7BF0BE" size="11" name="tag-right"></iconpark-icon></div></span></div><div class="flex items-center tag py-px2 px-px17 rounded-full text-sm transition-all h-px23 cursor-pointer dark:text-primary border border-primary border-opacity-50 dark:bg-opacity-10 dark:bg-primary hover:pr-px32"><span class="relative">#<!-- -->WEBPACK<div class="absolute left-full animate-short-arrow ml-px4 w-0 transition-all overflow-hidden top-0"><iconpark-icon color="#7BF0BE" size="11" name="tag-right"></iconpark-icon></div></span></div><div class="flex items-center tag py-px2 px-px17 rounded-full text-sm transition-all h-px23 cursor-pointer dark:text-primary border border-primary border-opacity-50 dark:bg-opacity-10 dark:bg-primary hover:pr-px32"><span class="relative">#<!-- -->ELEMENT-UI<div class="absolute left-full animate-short-arrow ml-px4 w-0 transition-all overflow-hidden top-0"><iconpark-icon color="#7BF0BE" size="11" name="tag-right"></iconpark-icon></div></span></div><div class="flex items-center tag py-px2 px-px17 rounded-full text-sm transition-all h-px23 cursor-pointer dark:text-primary border border-primary border-opacity-50 dark:bg-opacity-10 dark:bg-primary hover:pr-px32"><span class="relative">#<!-- -->TYPESCRIPT<div class="absolute left-full animate-short-arrow ml-px4 w-0 transition-all overflow-hidden top-0"><iconpark-icon color="#7BF0BE" size="11" name="tag-right"></iconpark-icon></div></span></div></div></div></footer><main class="mt-px40"><div id="markdown"><p>æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚</p><h2 id="">æ–¹æ¡ˆ</h2><p>è¿™é‡Œå› ä¸ºbabelå·²ç»å‡çº§åˆ°7äº†æ‰€ä»¥ï¼Œæƒ³ç”¨happyPack + DllPlugin + babel7æ¥è¯•è¯•çœ‹èƒ½æå‡å¤šå°‘é€Ÿåº¦ã€‚
æ€»ä½“æ¥è¯´ä¿®æ”¹äº†ä¸€äº›webpackçš„é…ç½®å’Œbabelçš„é…ç½®ï¼Œå»æ‰äº†ä¸€äº›æ— ç”¨çš„ä¾èµ–ï¼Œpackage.jsoné‡Œé¢browserlistå˜æˆäº† brow<strong>s</strong>erlistï¼Œæ›´æ¢äº†ä¸€äº›webpackçš„æ’ä»¶ï¼Œä¸»è¦æœ‰ä¸‹ï¼š</p><blockquote><p> ç§»é™¤çš„ä¾èµ–</p></blockquote><pre><code class="lang-json">{
    &quot;babel-core&quot;: &quot;^6.26.3&quot;,
        &quot;babel-plugin-syntax-jsx&quot;: &quot;^6.18.0&quot;,  
  &quot;babel-plugin-transform-runtime&quot;: &quot;^6.22.0&quot;,
  &quot;babel-preset-latest&quot;: &quot;^6.22.0&quot;,  
&quot;babel-preset-stage-2&quot;: &quot;^6.22.0&quot;,  
&quot;babel-register&quot;: &quot;^6.26.0&quot;,  
&quot;babel-runtime&quot;: &quot;^6.23.0&quot;,
}</code></pre><blockquote><p>æ›´æ–°æˆ–æ–°å¢çš„ä¾èµ–</p></blockquote><pre><code class="lang-json">&quot;@babel/polyfill&quot;: &quot;^7.6.0&quot;,  
&quot;@babel/runtime&quot;: &quot;^7.6.3&quot;,
&quot;@babel/core&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-external-helpers&quot;: &quot;^7.2.0&quot;,  
&quot;@babel/plugin-proposal-class-properties&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-proposal-decorators&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-proposal-export-namespace-from&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-proposal-function-sent&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-proposal-json-strings&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-proposal-numeric-separator&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-proposal-throw-expressions&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-syntax-dynamic-import&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-syntax-import-meta&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-syntax-jsx&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/plugin-transform-runtime&quot;: &quot;^7.6.2&quot;,  
&quot;@babel/preset-env&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/preset-es2015&quot;: &quot;^7.0.0-beta.53&quot;,  
&quot;@babel/preset-typescript&quot;: &quot;^7.6.0&quot;,  
&quot;@babel/register&quot;: &quot;^7.0.0&quot;,  
&quot;@babel/runtime-corejs2&quot;: &quot;^7.0.0&quot;,
&quot;@vue/babel-plugin-transform-vue-jsx&quot;: &quot;^1.0.0&quot;,
&quot;babel-loader&quot;: &quot;^8.0.0&quot;,
&quot;clean-webpack-plugin&quot;: &quot;^3.0.0&quot;,
&quot;happypack&quot;: &quot;^5.0.1&quot;,  
&quot;html-webpack-include-assets-plugin&quot;: &quot;^2.0.0&quot;,
&quot;uglifyjs-webpack-plugin&quot;: &quot;^1.3.0&quot;,
&quot;webpack-bundle-analyzer&quot;: &quot;^2.13.1&quot;,
&quot;webpack-merge&quot;: &quot;^2.6.1&quot;,  
&quot;webpack-parallel-uglify-plugin&quot;: &quot;^1.1.2&quot;</code></pre><h2 id="">å¼€å·¥</h2><h3 id="happypack">happypack</h3><p>è¿™é‡Œç”¨çš„æ˜¯<a href="https://github.com/amireh/happypack">happypack</a>å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ,é¦–å…ˆå®‰è£…happypackçš„ä¾èµ–.ç„¶åå†åœ¨webpack.base.jså¢åŠ é…ç½®ï¼Œè¾¾åˆ°devæˆ–è€…prodç¯å¢ƒéƒ½å¯ä»¥åŠ é€Ÿçš„æ•ˆæœã€‚</p><blockquote><p>å¼•å…¥å¿…è¦çš„ä¾èµ–</p></blockquote><pre><code class="lang-javascript">const HappyPack = require(&#x27;happypack&#x27;) // å¼•ç”¨happypack
const os = require(&#x27;os&#x27;); // è·å–ç³»ç»Ÿé…ç½®
// å¼€å¯çš„çº¿ç¨‹æ± é»˜è®¤ä¸º4ï¼Œè¿™é‡Œç›´æ¥å–çš„æ˜¯ç”µè„‘çš„cpuçº¿ç¨‹æ•°
const happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length })</code></pre><p>ç„¶åç”¨happy-loaderä»£æ›¿babel-loaderï¼Œå¹¶ä¸”å¼€å¯babel-loaderçš„ç¼“å­˜ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œloaderåé¢çš„<strong>id=happyPack</strong>å¯¹åº”çš„pluginsé‡Œçš„idè¯†ï¼Œhappypackä¸ä»…å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…jsä¹Ÿå¯ä»¥æ‰“åŒ…cssã€‚</p><pre><code class="lang-javascript">// module.rules
{
    test: /\.js$/,
    // loader: &#x27;babel-loader&#x27;,  
    loader: &#x27;happypack/loader?id=happyPack&#x27;,
    include: [
      resolve(&#x27;src&#x27;),
      resolve(&#x27;test&#x27;),
     ],
    exclude: /node_modules/
},
// plugins
new HappyPack({  
  //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶  
  id: &#x27;happyPack&#x27;,  
  //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·  
  loaders: [{  
  loader: &#x27;babel-loader&#x27;,  
  // here you configure babel:  
  options: { babelrc: true, cacheDirectory: true }  
 }],  //å…±äº«è¿›ç¨‹æ±   
  threadPool: happyThreadPool,  
  //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—  
  verbose: true,  
}),</code></pre><h3 id="dllplugin--dllreferenceplugin">DllPlugin å’Œ DllReferencePlugin</h3><p>Dllplginæ’ä»¶çš„æ¦‚å¿µç±»ä¼¼äºCçš„åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨ï¼Œå°†æ›´æ–°æ¬¡æ•°å¾ˆå°‘æˆ–è€…å‡ ä¹ä¸æ›´æ–°çš„åŒ…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‹†åˆ†bundlesï¼Œæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œé€šè¿‡manifest.jsonç¡®å®šåŒ…çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼, å†ç”¨DllReferencePluginä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆä¿®æ”¹<code>/config/index.js</code>æ–°å¢æˆ‘ä»¬çš„dllé…ç½®æ–¹ä¾¿å¼•ç”¨ï¼Œå†åœ¨<code>/build</code>çš„ç›®å½•ä¸‹æ–°å¢<code>webpack.dll.conf.js</code>ç”¨æ¥æ‰“åŒ…dllã€‚</p><blockquote><p>/config/index.js</p></blockquote><pre><code class="lang-javascript">// æ–°å¢é…ç½®
...
dll: {  
  static: path.resolve(__dirname, &#x27;../static/lib&#x27;),  // dllå­˜æ”¾è·¯å¾„ ç›¸å¯¹äºé¡¹ç›®çš„static/lib
  list: {  // å¤šä¸ªåŒ…åˆ—è¡¨ç”¨æ¥åŒºåˆ†
      vendor: [&#x27;vue/dist/vue.common.js&#x27;,&#x27;vue-router&#x27;, &#x27;vuex&#x27;],  
      &#x27;asset&#x27;: [&#x27;superagent&#x27;]  
}</code></pre><blockquote><p>/build/webpack.dll.conf.js</p></blockquote><pre><code class="lang-javascript">var path = require(&#x27;path&#x27;)

var webpack = require(&#x27;webpack&#x27;)
var CleanWebpackPlugin = require(&#x27;clean-webpack-plugin&#x27;)

var config = require(&#x27;../config&#x27;)
var __root = path.resolve(__dirname, &#x27;../&#x27;)

module.exports = {
    context: __root, // è¿™é‡Œé…ç½®çš„contextå°±æ˜¯åé¢dllçš„context
    entry: config.dll.list,
    output: {
        path: config.dll.static,
        filename: &#x27;[name]-[chunkhash:7].dll.js&#x27;,
        library: &#x27;lib_[name]&#x27;,
        // *** è¿™é‡Œä¸è¦æ·»åŠ libraryTargetï¼Œå¦åˆ™webpackæ‰“åŒ…æ—¶ä¼šå‡ºé”™ã€‚
        // ï¼ˆæç¤ºæ˜¯__WEBPACK__EXTERNAL__MODULE__xxxæœªå®šä¹‰ï¼‰ ***
        // libraryTarget: &#x27;umd&#x27;
    },
    resolve: {
        modules: [path.resolve(__root, &#x27;node_modules&#x27;)],
        extensions: [&#x27;.js&#x27;, &#x27;.json&#x27;],
        alias: {
            &#x27;vue$&#x27;: &#x27;vue/dist/vue.esm.js&#x27;
        }
    },
    // è¿™é‡Œæ²¡æœ‰å†™loadersï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œæ·»åŠ loaders
    plugins: [
        // *** è¿™é‡Œå¾ˆå…³é”® ***
        new webpack.DllPlugin({ // å› ä¸ºä¸Šé¢å†™äº†contextï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æŒ‡å®šcontext
            // è¿™é‡Œmanifestçš„åå­—å¿…é¡»è¦æœ‰å˜é‡ï¼Œå› ä¸ºç±»ä¼¼ä¸Šé¢çš„coreå’Œassetä¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªmanifestï¼Œ
            // å¦‚æœåç§°ç›¸åŒï¼Œmanifestä¼šç”Ÿæˆä¸è§„èŒƒçš„jsonï¼Œåœ¨å¼•ç”¨æ—¶ä¼šæŠ¥é”™ã€‚
            path: path.resolve(__root, &#x27;static/manifest/[name].manifest.json&#x27;),
            name: &#x27;lib_[name]&#x27; // *** è¿™é‡Œçš„åå­—å¿…é¡»ä¸output.libraryä¸€è‡´ ***
        }),
        // è¿™ä¸ªæ˜¯ç”¨æ¥ç¨³å®šhashå€¼ï¼Œé˜²æ­¢å‡ºç°webpackçš„hashå‡ºç°è«åçš„å˜åŒ–
        new webpack.HashedModuleIdsPlugin(),
        new webpack.NamedChunksPlugin(),
    ]
}</code></pre><p>ç„¶ååœ¨<code>package.json</code>æ·»åŠ <code>&quot;build:dll&quot;: &quot;webpack --config build/webpack.dll.conf.js&quot;</code>ç”¨æ¥ç”Ÿæˆdllï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•ã€‚</p><p><img alt="æ‰§è¡Œdllæ‰“åŒ…ç»“æœ" src="https://oss.yangger.cn/assets/blog/667E3894-9F16-4E11-BE28-D2E9B3E27DCF.png"/></p><p>åœ¨é¡¹ç›®çš„<code>static/lib</code>çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”çš„dll.js, è€Œä¸”åœ¨<code>static/manifest</code>ç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„manifest.jsonã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹åéœ€è¦å°†ä»–ä»¬ä¸€èµ·ä¸Šä¼ åˆ°git/svnç­‰æºç ä»“åº“ï¼Œå› ä¸ºå‡ ä¹ä¸éœ€è¦æ›´æ–°æˆ–è€…å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥åªéœ€è¦æ¯æ¬¡æ‰§è¡Œå®Œä¹‹åè®°å¾—ä¸Šä¼ åˆ°æºç ä»“åº“å³å¯ã€‚<strong>å¦‚æœä¸æ‰‹åŠ¨ä¸Šä¼ ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨æ‰“åŒ…ä»£ç ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œä¸€æ¬¡<code>npm run build:dll</code>å‘½ä»¤</strong></p><p>æ‰“åŒ…å®Œdllä¹‹åï¼Œéœ€è¦ä¿®æ”¹<code>webpack.base.js</code>è®©æˆ‘ä»¬çš„åœ¨ç¼–è¯‘/æ‰“åŒ…çš„æ—¶å€™æ„Ÿå—æ„å»ºé€Ÿåº¦çš„æå‡ã€‚</p><blockquote><p>webpack.base.js</p></blockquote><pre><code class="lang-javascript">const HTMLWebpackIncludeAssetsPlugin = require(&#x27;html-webpack-include-assets-plugin&#x27;)  // æŠŠæˆ‘ä»¬çš„dllå¼•å…¥html
const CopyWebpackPlugin = require(&#x27;copy-webpack-plugin&#x27;) // å°†dllæ–‡ä»¶æ‹·è´åˆ°ä½ çš„distç›®å½•ä¸‹
const __root = path.resolve(__dirname, &#x27;../&#x27;)
// è·å–dllæ–‡ä»¶çš„manifest
function getDllManifest() {
    var plugins = []
    Object.keys(config.dll.list).forEach((name) =&gt; {
        plugins.push(
            new webpack.DllReferencePlugin({
                context: __root, // è¿™é‡Œçš„contextå¿…é¡»ä¸DllPluginä¸­çš„contextä¿æŒä¸€è‡´
                manifest: path.resolve(__root, &#x27;static/manifest/[name].manifest.json&#x27;).replace(
                    /\[name\]/gi, name)
            })
        )
    })
    return plugins
}

//plugins

plugins: [
    //...
    ...getDllManifest(),
    new HTMLWebpackIncludeAssetsPlugin({
        append: false,
        publicPath: config.build.assetsPublicPath,
        assets: [{
            path: config.build.assetsSubDirectory,
            glob: &#x27;**/*.js&#x27;,
            globPath: config.dll.static
        }],
    }),
]</code></pre><p>è¿™æ ·DllPlugin å’Œ DllReferencePluginçš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†</p><h3 id="">å…¶ä»–æ„å»ºçš„å°ä¼˜åŒ–å’Œå‘</h3><p>ä¹‹å‰æ„å»ºçš„æ—¶å€™ä¼šä¸€ç›´çœ‹åˆ°è¿™æ ·çš„é”™è¯¯: <code># DefaultsError: &#x27;warnings&#x27; is not a supported option</code>
æ˜¯å› ä¸ºUglifyJsPluginæ›´æ–°äº†ï¼Œé…ç½®æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯å¼•ç”¨å¤–éƒ¨çš„<a href="[https://github.com/webpack-contrib/uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin">uglifyjs-webpack-plugin</a>)æ’ä»¶ä»£æ›¿webpackè‡ªå¸¦çš„ã€‚</p><p>ä¿®æ”¹å¦‚ä¸‹:</p><pre><code class="lang-javascript">// new webpack.optimize.UglifyJsPlugin({  
//   compress: {  
//     warnings: false  
//   },  
//   sourceMap: true  
// }),
new UglifyJsPlugin({  
  cache: &#x27;.cache/&#x27;,  
  parallel: true,  
}),</code></pre><p>ç„¶ååœ¨devç¯å¢ƒä¸­æ–°å¢<a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">BundleAnalyzerPlugin</a>ç”¨æ¥æŸ¥çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆä¾èµ–æˆ–è€…å“ªä¸ªæ–‡ä»¶å¤ªå¤§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„åšä»£ç ä¼˜åŒ–</p><h3 id="babe7">babe7å‡çº§</h3><p>å‡çº§åˆ°babel7éå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹<a href="https://babeljs.io/docs/en/v7-migration">å®˜ç½‘å‡çº§æŒ‡å—</a>ã€‚
å…¶å®ä¸»è¦æ›´æ–°æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š
  1. è‡ªå¸¦æ”¯æŒTypeScriptçš„æ”¯æŒï¼Œts-loaderæˆ–è®¸å¯ä»¥ä¸ç”¨äº†?
  2. <a href="https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets">ç§»é™¤stage-*</a>
  3. ä»¥ä¸‹é¢„è®¾éƒ½å½’å¹¶åˆ°&quot;@babel/preset-env&quot;äº†
        -   <code>babel-preset-es2015</code>
        -   <code>babel-preset-es2016</code>
        -   <code>babel-preset-es2017</code>
        -   <code>babel-preset-latest</code>
        -  A combination of the above ^</p><p>æ‰€ä»¥è¿™é‡Œå±•ç¤ºä¸€ä¸‹å‡çº§å<code>.bablerc</code>ï¼Œä»…ä¾›å‚è€ƒ~</p><blockquote><p>.bablerc</p></blockquote><pre><code class="lang-json">// {
//   &quot;presets&quot;: [
//     [&quot;latest&quot;, {
//       &quot;es2015&quot;: { &quot;modules&quot;: false }
//     }],
//     &quot;stage-2&quot;
//   ],
//   &quot;plugins&quot;: [&quot;transform-runtime&quot;, &quot;transform-vue-jsx&quot;],
//   &quot;comments&quot;: false,
//   &quot;env&quot;: {
//     &quot;test&quot;: {
//       &quot;presets&quot;: [&quot;latest&quot;, &quot;stage-2&quot;],
//       &quot;plugins&quot;: [ &quot;istanbul&quot; ]
//     }
//   }
// }

{  
  &quot;presets&quot;: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-typescript&quot;, &quot;@vue/babel-preset-jsx&quot;],  
  &quot;plugins&quot;: [&quot;@babel/plugin-transform-runtime&quot;, &quot;@babel/plugin-external-helpers&quot;]  
}</code></pre><h2 id="">æµ‹è¯•</h2><p>åˆ°è¿™é‡Œå…¬å¸çš„å…ƒè€çº§é¡¹ç›®åŸºæœ¬å·²ç»ä¼˜åŒ–å®Œæ¯•äº†ï¼Œåœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨æµ‹è¯•ä¸€ä¸‹æ‰“åŒ…é€Ÿåº¦çš„åŒºåˆ«è¯•è¯•.</p><h3 id="mac-612">mac 6æ ¸12çº¿ç¨‹</h3><blockquote><p>æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦</p></blockquote><p><img alt="mac-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦" src="https://oss.yangger.cn/assets/blog/FF249298-12D6-439E-A149-1A51EDF30C55.png"/></p><blockquote><p>æ›´æ–°åæ‰“åŒ…é€Ÿåº¦</p></blockquote><p><img alt="mac-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦" src="https://oss.yangger.cn/assets/blog/590E0034-4D68-4BE7-AEDA-7F0FFA4BB58E.png"/></p><h3 id="centos-">centos å•æ ¸åŒçº¿ç¨‹</h3><blockquote><p>æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦</p></blockquote><p><img alt="centos-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦" src="https://oss.yangger.cn/assets/blog/A535621B-69CB-4478-8C30-B547F4C33601.png"/></p><blockquote><p>æ›´æ–°åæ‰“åŒ…é€Ÿåº¦</p></blockquote><p><img alt="centos-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦" src="https://oss.yangger.cn/assets/blog/71D1F9DB-E95E-4FE3-A5D3-85AAE3C7F342.png"/></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæå‡é€Ÿåº¦çº¦ç­‰äº3/5ï¼Œç›¸å¯¹äºæ¯æ¬¡æäº¤CI/CDèµ°ä¸‹æ¥6-7åˆ†é’Ÿè¿˜æ˜¯æœ‰å¾ˆå¤§æå‡çš„ï¼Œèµ·ç æ³¡â˜•ï¸å˜æˆæ³¡é€Ÿæº¶â˜•ï¸äº†hhhhã€‚</p><h2 id="">æ€»ç»“</h2><p>æ€»çš„æ¥è¯´ï¼Œåœ¨è¿™äº›æ–¹æ³•çš„æ¨åŠ¨ä¸‹çš„æ„å»ºé€Ÿåº¦ä¼˜åŒ–è¿˜æ˜¯æœ‰ç€è‚‰çœ¼å¯è§çš„æå‡é€Ÿåº¦çš„ï¼Œè¿™é‡ŒåŸºäºwebpack2.xçš„æå‡æ–¹æ¡ˆçš„æ•ˆæœå› é¡¹ç›®è€Œå¼‚ï¼Œå¯èƒ½æ•ˆæœå¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½<strong>æ²¡æœ‰æ•ˆæœ</strong>ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€äº›æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä¸è¶³å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï½</p></div></main></article><div class="line my-px60 w-full h-px dark:bg-primary"></div><div class="more flex flex-col"><div class="title flex h-px36 text-2xl items-center dark:text-white"><span class="font-light">æ›´å¤šé˜…è¯»</span><div class="animate-arrow flex items-center ml-px20 w-px24 h-px12 relative transition-all"><div class="absolute left-0 w-full h-px" style="background-color:#fff"></div><div class="absolute border-solid border border-t-0 border-r border-b border-l-0 p-px4 right-0 transform -rotate-45" style="border-color:#fff"></div></div></div><div class="more-articles flex flex-wrap"><article class="article flex py-px60 border-b dark:border-primary lg:px-px20 items lg:w-1/2 xl:w-1/3 w-full"><div class="w-full"><header class="mb-2"><div class="date text-xs leading-5 dark:text-grayGreen">2021 / 02 / 05</div></header><main><h1 class="text-2xl leading-10/15 md:leading-10/15 font-bold dark:text-white mb-px24 cursor-pointer transition-all dark:hover:text-primary md:text-2xl">SSRé¡¹ç›®è§„åˆ’</h1><div class="text-base desc dark:text-white dark:text-opacity-80 leading-6 mb-6">ç›®å‰å…¬å¸é¡¹ç›®çš„ç±»å‹å¤šæ•°æ˜¯SPA,å‰ç«¯è´Ÿè´£ç•Œé¢æ˜¾ç¤ºï¼Œåç«¯è´Ÿè´£æ•°æ®å­˜å‚¨å’Œè®¡ç®—ï¼Œå„å¸å…¶èŒï¼Œä¸ä¼šæŠŠå‰åç«¯çš„é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯ä»¥å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼ŒæœåŠ¡å™¨åªç”¨æä¾›è°ƒç”¨çš„æ¥å£ï¼Œä¸ç”¨ç®¡å±•ç¤ºé€»è¾‘å’Œé¡µé¢åˆæˆï¼Œååèƒ½åŠ›ä¼šæé«˜å‡ å€ï¼›å¼€å‘éå¸¸æ–¹ä¾¿ä½†æ˜¯ä¸å¯é¿å…çš„æœ‰å‰¯ä½œç”¨...</div></main><footer><div class="meta flex flex-wrap"><div class="tags flex flex-wrap gap-px14"><div class="flex items-center tag py-px2 px-px17 rounded-full text-sm transition-all h-px23 cursor-pointer dark:text-primary border border-primary border-opacity-50 dark:bg-opacity-10 dark:bg-primary hover:pr-px32"><span class="relative">#<!-- -->SSR<div class="absolute left-full animate-short-arrow ml-px4 w-0 transition-all overflow-hidden top-0"><iconpark-icon color="#7BF0BE" size="11" name="tag-right"></iconpark-icon></div></span></div></div></div></footer></div><div class="hidden"><div class="flex flex-col gap-y-px40"><div class="tag-info"><div class="flex items-center"><div class="w-px4 h-px4 dark:bg-primary mr-px8 rounded-full"></div>æœ¬æ–‡å­—æ•°</div><div class="ml-px12">3910<!-- -->å­—</div></div><div class="tag-info"><div class="flex items-center"><div class="w-px4 h-px4 dark:bg-primary mr-px8 rounded-full"></div>é˜…è¯»æ—¶é—´</div><div class="ml-px12">9<!-- -->åˆ†é’Ÿ</div></div></div></div></article><article class="article flex py-px60 border-b dark:border-primary lg:px-px20 items lg:w-1/2 xl:w-1/3 w-full"><div class="w-full"><header class="mb-2"><div class="date text-xs leading-5 dark:text-grayGreen">2021 / 02 / 05</div></header><main><h1 class="text-2xl leading-10/15 md:leading-10/15 font-bold dark:text-white mb-px24 cursor-pointer transition-all dark:hover:text-primary md:text-2xl">markdownè¯­æ³•cssè°ƒè¯•</h1><div class="text-base desc dark:text-white dark:text-opacity-80 leading-6 mb-6">ä¸“é—¨ç”¨æ¥è°ƒè¯•markdownçš„è¯­æ³•</div></main><footer><div class="meta flex flex-wrap"><div class="tags flex flex-wrap gap-px14"><div class="flex items-center tag py-px2 px-px17 rounded-full text-sm transition-all h-px23 top cursor-default dark:text-black dark:bg-primary">ç½®é¡¶</div><div class="flex items-center tag py-px2 px-px17 rounded-full text-sm transition-all h-px23 cursor-pointer dark:text-primary border border-primary border-opacity-50 dark:bg-opacity-10 dark:bg-primary hover:pr-px32"><span class="relative">#<!-- -->MARKDOWN<div class="absolute left-full animate-short-arrow ml-px4 w-0 transition-all overflow-hidden top-0"><iconpark-icon color="#7BF0BE" size="11" name="tag-right"></iconpark-icon></div></span></div></div></div></footer></div><div class="hidden"><div class="flex flex-col gap-y-px40"><div class="tag-info"><div class="flex items-center"><div class="w-px4 h-px4 dark:bg-primary mr-px8 rounded-full"></div>æœ¬æ–‡å­—æ•°</div><div class="ml-px12">1534<!-- -->å­—</div></div><div class="tag-info"><div class="flex items-center"><div class="w-px4 h-px4 dark:bg-primary mr-px8 rounded-full"></div>é˜…è¯»æ—¶é—´</div><div class="ml-px12">3<!-- -->åˆ†é’Ÿ</div></div></div></div></article></div></div></main><footer class="dark:text-primary text-xs leading-5 my-px60 mx-5 md:mx-16">Â© 2021 Yangger.com ä¿ç•™æ‰€æœ‰æƒåˆ©</footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"global":{"id":1,"siteName":"Yangger Blog","created_at":"2021-07-29T05:57:51.255Z","updated_at":"2021-07-29T07:30:01.657Z","defaultSeo":{"id":2,"metaTitle":"HomePage","metaDescription":"Yanggerçš„åšå®¢","shareImage":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}},"favicon":{"id":4,"name":"favicon.png","alternativeText":null,"caption":null,"width":512,"height":512,"formats":{"thumbnail":{"name":"thumbnail_favicon.png","hash":"thumbnail_favicon_4d87055159","ext":".png","mime":"image/png","width":156,"height":156,"size":6.27,"path":null,"url":"/uploads/thumbnail_favicon_4d87055159.png"},"small":{"name":"small_favicon.png","hash":"small_favicon_4d87055159","ext":".png","mime":"image/png","width":500,"height":500,"size":28.98,"path":null,"url":"/uploads/small_favicon_4d87055159.png"}},"hash":"favicon_4d87055159","ext":".png","mime":"image/png","size":5.26,"url":"/uploads/favicon_4d87055159.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.548Z","updated_at":"2021-07-29T05:57:51.548Z"}},"articleInfo":{"count":5,"pageSize":1},"article":{"id":4,"title":"webpack2.6å‡çº§tsæ”¯æŒ","description":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n","content":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n\n## æ–¹æ¡ˆ\n\nè¿™é‡Œå› ä¸ºbabelå·²ç»å‡çº§åˆ°7äº†æ‰€ä»¥ï¼Œæƒ³ç”¨happyPack + DllPlugin + babel7æ¥è¯•è¯•çœ‹èƒ½æå‡å¤šå°‘é€Ÿåº¦ã€‚\næ€»ä½“æ¥è¯´ä¿®æ”¹äº†ä¸€äº›webpackçš„é…ç½®å’Œbabelçš„é…ç½®ï¼Œå»æ‰äº†ä¸€äº›æ— ç”¨çš„ä¾èµ–ï¼Œpackage.jsoné‡Œé¢browserlistå˜æˆäº† brow**s**erlistï¼Œæ›´æ¢äº†ä¸€äº›webpackçš„æ’ä»¶ï¼Œä¸»è¦æœ‰ä¸‹ï¼š\n\n\u003e  ç§»é™¤çš„ä¾èµ–\n\n```json\n{\n\t\"babel-core\": \"^6.26.3\",\n\t    \"babel-plugin-syntax-jsx\": \"^6.18.0\",  \n  \"babel-plugin-transform-runtime\": \"^6.22.0\",\n  \"babel-preset-latest\": \"^6.22.0\",  \n\"babel-preset-stage-2\": \"^6.22.0\",  \n\"babel-register\": \"^6.26.0\",  \n\"babel-runtime\": \"^6.23.0\",\n}\n```\n\n\u003e æ›´æ–°æˆ–æ–°å¢çš„ä¾èµ–\n\n```json\n\"@babel/polyfill\": \"^7.6.0\",  \n\"@babel/runtime\": \"^7.6.3\",\n\"@babel/core\": \"^7.0.0\",  \n\"@babel/plugin-external-helpers\": \"^7.2.0\",  \n\"@babel/plugin-proposal-class-properties\": \"^7.0.0\",  \n\"@babel/plugin-proposal-decorators\": \"^7.0.0\",  \n\"@babel/plugin-proposal-export-namespace-from\": \"^7.0.0\",  \n\"@babel/plugin-proposal-function-sent\": \"^7.0.0\",  \n\"@babel/plugin-proposal-json-strings\": \"^7.0.0\",  \n\"@babel/plugin-proposal-numeric-separator\": \"^7.0.0\",  \n\"@babel/plugin-proposal-throw-expressions\": \"^7.0.0\",  \n\"@babel/plugin-syntax-dynamic-import\": \"^7.0.0\",  \n\"@babel/plugin-syntax-import-meta\": \"^7.0.0\",  \n\"@babel/plugin-syntax-jsx\": \"^7.0.0\",  \n\"@babel/plugin-transform-runtime\": \"^7.6.2\",  \n\"@babel/preset-env\": \"^7.0.0\",  \n\"@babel/preset-es2015\": \"^7.0.0-beta.53\",  \n\"@babel/preset-typescript\": \"^7.6.0\",  \n\"@babel/register\": \"^7.0.0\",  \n\"@babel/runtime-corejs2\": \"^7.0.0\",\n\"@vue/babel-plugin-transform-vue-jsx\": \"^1.0.0\",\n\"babel-loader\": \"^8.0.0\",\n\"clean-webpack-plugin\": \"^3.0.0\",\n\"happypack\": \"^5.0.1\",  \n\"html-webpack-include-assets-plugin\": \"^2.0.0\",\n\"uglifyjs-webpack-plugin\": \"^1.3.0\",\n\"webpack-bundle-analyzer\": \"^2.13.1\",\n\"webpack-merge\": \"^2.6.1\",  \n\"webpack-parallel-uglify-plugin\": \"^1.1.2\"\n```\n\n## å¼€å·¥\n\n### happypack\n\nè¿™é‡Œç”¨çš„æ˜¯[happypack](https://github.com/amireh/happypack)å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ,é¦–å…ˆå®‰è£…happypackçš„ä¾èµ–.ç„¶åå†åœ¨webpack.base.jså¢åŠ é…ç½®ï¼Œè¾¾åˆ°devæˆ–è€…prodç¯å¢ƒéƒ½å¯ä»¥åŠ é€Ÿçš„æ•ˆæœã€‚\n\n\u003e å¼•å…¥å¿…è¦çš„ä¾èµ–\n\n```javascript\nconst HappyPack = require('happypack') // å¼•ç”¨happypack\nconst os = require('os'); // è·å–ç³»ç»Ÿé…ç½®\n// å¼€å¯çš„çº¿ç¨‹æ± é»˜è®¤ä¸º4ï¼Œè¿™é‡Œç›´æ¥å–çš„æ˜¯ç”µè„‘çš„cpuçº¿ç¨‹æ•°\nconst happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length }) \n```\nç„¶åç”¨happy-loaderä»£æ›¿babel-loaderï¼Œå¹¶ä¸”å¼€å¯babel-loaderçš„ç¼“å­˜ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œloaderåé¢çš„**id=happyPack**å¯¹åº”çš„pluginsé‡Œçš„idè¯†ï¼Œhappypackä¸ä»…å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…jsä¹Ÿå¯ä»¥æ‰“åŒ…cssã€‚\n\n```javascript\n// module.rules\n{\n    test: /\\.js$/,\n    // loader: 'babel-loader',  \n    loader: 'happypack/loader?id=happyPack',\n    include: [\n\t  resolve('src'),\n\t  resolve('test'),\n\t ],\n    exclude: /node_modules/\n},\n// plugins\nnew HappyPack({  \n  //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶  \n  id: 'happyPack',  \n  //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·  \n  loaders: [{  \n  loader: 'babel-loader',  \n  // here you configure babel:  \n  options: { babelrc: true, cacheDirectory: true }  \n }],  //å…±äº«è¿›ç¨‹æ±   \n  threadPool: happyThreadPool,  \n  //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—  \n  verbose: true,  \n}),\n```\n\n### DllPlugin å’Œ DllReferencePlugin\n\nDllplginæ’ä»¶çš„æ¦‚å¿µç±»ä¼¼äºCçš„åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨ï¼Œå°†æ›´æ–°æ¬¡æ•°å¾ˆå°‘æˆ–è€…å‡ ä¹ä¸æ›´æ–°çš„åŒ…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‹†åˆ†bundlesï¼Œæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œé€šè¿‡manifest.jsonç¡®å®šåŒ…çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼, å†ç”¨DllReferencePluginä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ã€‚\n\né¦–å…ˆæˆ‘ä»¬å…ˆä¿®æ”¹`/config/index.js`æ–°å¢æˆ‘ä»¬çš„dllé…ç½®æ–¹ä¾¿å¼•ç”¨ï¼Œå†åœ¨`/build`çš„ç›®å½•ä¸‹æ–°å¢`webpack.dll.conf.js`ç”¨æ¥æ‰“åŒ…dllã€‚\n\n\u003e /config/index.js\n\n```javascript\n// æ–°å¢é…ç½®\n...\ndll: {  \n  static: path.resolve(__dirname, '../static/lib'),  // dllå­˜æ”¾è·¯å¾„ ç›¸å¯¹äºé¡¹ç›®çš„static/lib\n  list: {  // å¤šä¸ªåŒ…åˆ—è¡¨ç”¨æ¥åŒºåˆ†\n\t  vendor: ['vue/dist/vue.common.js','vue-router', 'vuex'],  \n\t  'asset': ['superagent']  \n}\n```\n\n\u003e /build/webpack.dll.conf.js\n\n```javascript\nvar path = require('path')\n\nvar webpack = require('webpack')\nvar CleanWebpackPlugin = require('clean-webpack-plugin')\n\nvar config = require('../config')\nvar __root = path.resolve(__dirname, '../')\n\nmodule.exports = {\n    context: __root, // è¿™é‡Œé…ç½®çš„contextå°±æ˜¯åé¢dllçš„context\n    entry: config.dll.list,\n    output: {\n        path: config.dll.static,\n        filename: '[name]-[chunkhash:7].dll.js',\n        library: 'lib_[name]',\n        // *** è¿™é‡Œä¸è¦æ·»åŠ libraryTargetï¼Œå¦åˆ™webpackæ‰“åŒ…æ—¶ä¼šå‡ºé”™ã€‚\n        // ï¼ˆæç¤ºæ˜¯__WEBPACK__EXTERNAL__MODULE__xxxæœªå®šä¹‰ï¼‰ ***\n        // libraryTarget: 'umd'\n    },\n    resolve: {\n        modules: [path.resolve(__root, 'node_modules')],\n        extensions: ['.js', '.json'],\n        alias: {\n            'vue$': 'vue/dist/vue.esm.js'\n        }\n    },\n    // è¿™é‡Œæ²¡æœ‰å†™loadersï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œæ·»åŠ loaders\n    plugins: [\n        // *** è¿™é‡Œå¾ˆå…³é”® ***\n        new webpack.DllPlugin({ // å› ä¸ºä¸Šé¢å†™äº†contextï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æŒ‡å®šcontext\n            // è¿™é‡Œmanifestçš„åå­—å¿…é¡»è¦æœ‰å˜é‡ï¼Œå› ä¸ºç±»ä¼¼ä¸Šé¢çš„coreå’Œassetä¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªmanifestï¼Œ\n            // å¦‚æœåç§°ç›¸åŒï¼Œmanifestä¼šç”Ÿæˆä¸è§„èŒƒçš„jsonï¼Œåœ¨å¼•ç”¨æ—¶ä¼šæŠ¥é”™ã€‚\n            path: path.resolve(__root, 'static/manifest/[name].manifest.json'),\n            name: 'lib_[name]' // *** è¿™é‡Œçš„åå­—å¿…é¡»ä¸output.libraryä¸€è‡´ ***\n        }),\n        // è¿™ä¸ªæ˜¯ç”¨æ¥ç¨³å®šhashå€¼ï¼Œé˜²æ­¢å‡ºç°webpackçš„hashå‡ºç°è«åçš„å˜åŒ–\n        new webpack.HashedModuleIdsPlugin(),\n        new webpack.NamedChunksPlugin(),\n    ]\n}\n```\nç„¶ååœ¨`package.json`æ·»åŠ `\"build:dll\": \"webpack --config build/webpack.dll.conf.js\"`ç”¨æ¥ç”Ÿæˆdllï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•ã€‚\n\n![æ‰§è¡Œdllæ‰“åŒ…ç»“æœ](https://oss.yangger.cn/assets/blog/667E3894-9F16-4E11-BE28-D2E9B3E27DCF.png)\n\nåœ¨é¡¹ç›®çš„`static/lib`çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”çš„dll.js, è€Œä¸”åœ¨`static/manifest`ç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„manifest.jsonã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹åéœ€è¦å°†ä»–ä»¬ä¸€èµ·ä¸Šä¼ åˆ°git/svnç­‰æºç ä»“åº“ï¼Œå› ä¸ºå‡ ä¹ä¸éœ€è¦æ›´æ–°æˆ–è€…å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥åªéœ€è¦æ¯æ¬¡æ‰§è¡Œå®Œä¹‹åè®°å¾—ä¸Šä¼ åˆ°æºç ä»“åº“å³å¯ã€‚**å¦‚æœä¸æ‰‹åŠ¨ä¸Šä¼ ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨æ‰“åŒ…ä»£ç ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œä¸€æ¬¡`npm run build:dll`å‘½ä»¤**\n\næ‰“åŒ…å®Œdllä¹‹åï¼Œéœ€è¦ä¿®æ”¹`webpack.base.js`è®©æˆ‘ä»¬çš„åœ¨ç¼–è¯‘/æ‰“åŒ…çš„æ—¶å€™æ„Ÿå—æ„å»ºé€Ÿåº¦çš„æå‡ã€‚\n\n\u003e webpack.base.js\n\n```javascript\nconst HTMLWebpackIncludeAssetsPlugin = require('html-webpack-include-assets-plugin')  // æŠŠæˆ‘ä»¬çš„dllå¼•å…¥html\nconst CopyWebpackPlugin = require('copy-webpack-plugin') // å°†dllæ–‡ä»¶æ‹·è´åˆ°ä½ çš„distç›®å½•ä¸‹\nconst __root = path.resolve(__dirname, '../')\n// è·å–dllæ–‡ä»¶çš„manifest\nfunction getDllManifest() {\n    var plugins = []\n    Object.keys(config.dll.list).forEach((name) =\u003e {\n        plugins.push(\n            new webpack.DllReferencePlugin({\n                context: __root, // è¿™é‡Œçš„contextå¿…é¡»ä¸DllPluginä¸­çš„contextä¿æŒä¸€è‡´\n                manifest: path.resolve(__root, 'static/manifest/[name].manifest.json').replace(\n                    /\\[name\\]/gi, name)\n            })\n        )\n    })\n    return plugins\n}\n\n//plugins\n\nplugins: [\n\t//...\n\t...getDllManifest(),\n\tnew HTMLWebpackIncludeAssetsPlugin({\n\t    append: false,\n\t    publicPath: config.build.assetsPublicPath,\n\t    assets: [{\n\t        path: config.build.assetsSubDirectory,\n\t        glob: '**/*.js',\n\t        globPath: config.dll.static\n        }],\n\t}),\n]\n```\n\nè¿™æ ·DllPlugin å’Œ DllReferencePluginçš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†\n\n### å…¶ä»–æ„å»ºçš„å°ä¼˜åŒ–å’Œå‘\n\nä¹‹å‰æ„å»ºçš„æ—¶å€™ä¼šä¸€ç›´çœ‹åˆ°è¿™æ ·çš„é”™è¯¯: `# DefaultsError: 'warnings' is not a supported option`\næ˜¯å› ä¸ºUglifyJsPluginæ›´æ–°äº†ï¼Œé…ç½®æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯å¼•ç”¨å¤–éƒ¨çš„[uglifyjs-webpack-plugin]([https://github.com/webpack-contrib/uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin))æ’ä»¶ä»£æ›¿webpackè‡ªå¸¦çš„ã€‚\n\nä¿®æ”¹å¦‚ä¸‹:\n\n```javascript\n// new webpack.optimize.UglifyJsPlugin({  \n//   compress: {  \n//     warnings: false  \n//   },  \n//   sourceMap: true  \n// }),\nnew UglifyJsPlugin({  \n  cache: '.cache/',  \n  parallel: true,  \n}),  \n```\n\nç„¶ååœ¨devç¯å¢ƒä¸­æ–°å¢[BundleAnalyzerPlugin](https://github.com/webpack-contrib/webpack-bundle-analyzer)ç”¨æ¥æŸ¥çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆä¾èµ–æˆ–è€…å“ªä¸ªæ–‡ä»¶å¤ªå¤§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„åšä»£ç ä¼˜åŒ–\n\n### babe7å‡çº§\n\nå‡çº§åˆ°babel7éå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹[å®˜ç½‘å‡çº§æŒ‡å—](https://babeljs.io/docs/en/v7-migration)ã€‚\nå…¶å®ä¸»è¦æ›´æ–°æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n  1. è‡ªå¸¦æ”¯æŒTypeScriptçš„æ”¯æŒï¼Œts-loaderæˆ–è®¸å¯ä»¥ä¸ç”¨äº†?\n  2. [ç§»é™¤stage-*](https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets)\n  3. ä»¥ä¸‹é¢„è®¾éƒ½å½’å¹¶åˆ°\"@babel/preset-env\"äº†\n\t    -   `babel-preset-es2015`\n\t\t-   `babel-preset-es2016`\n\t\t-   `babel-preset-es2017`\n\t\t-   `babel-preset-latest`\n\t\t-  A combination of the above ^\n\t\næ‰€ä»¥è¿™é‡Œå±•ç¤ºä¸€ä¸‹å‡çº§å`.bablerc`ï¼Œä»…ä¾›å‚è€ƒ~\n\n\u003e .bablerc\n\n```json\n// {\n//   \"presets\": [\n//     [\"latest\", {\n//       \"es2015\": { \"modules\": false }\n//     }],\n//     \"stage-2\"\n//   ],\n//   \"plugins\": [\"transform-runtime\", \"transform-vue-jsx\"],\n//   \"comments\": false,\n//   \"env\": {\n//     \"test\": {\n//       \"presets\": [\"latest\", \"stage-2\"],\n//       \"plugins\": [ \"istanbul\" ]\n//     }\n//   }\n// }\n\n{  \n  \"presets\": [\"@babel/preset-env\", \"@babel/preset-typescript\", \"@vue/babel-preset-jsx\"],  \n  \"plugins\": [\"@babel/plugin-transform-runtime\", \"@babel/plugin-external-helpers\"]  \n}\n```\n\n## æµ‹è¯•\n\nåˆ°è¿™é‡Œå…¬å¸çš„å…ƒè€çº§é¡¹ç›®åŸºæœ¬å·²ç»ä¼˜åŒ–å®Œæ¯•äº†ï¼Œåœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨æµ‹è¯•ä¸€ä¸‹æ‰“åŒ…é€Ÿåº¦çš„åŒºåˆ«è¯•è¯•.\n\n### mac 6æ ¸12çº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/FF249298-12D6-439E-A149-1A51EDF30C55.png)\n\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/590E0034-4D68-4BE7-AEDA-7F0FFA4BB58E.png)\n\n### centos å•æ ¸åŒçº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/A535621B-69CB-4478-8C30-B547F4C33601.png)\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/71D1F9DB-E95E-4FE3-A5D3-85AAE3C7F342.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæå‡é€Ÿåº¦çº¦ç­‰äº3/5ï¼Œç›¸å¯¹äºæ¯æ¬¡æäº¤CI/CDèµ°ä¸‹æ¥6-7åˆ†é’Ÿè¿˜æ˜¯æœ‰å¾ˆå¤§æå‡çš„ï¼Œèµ·ç æ³¡â˜•ï¸å˜æˆæ³¡é€Ÿæº¶â˜•ï¸äº†hhhhã€‚\n\n## æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œåœ¨è¿™äº›æ–¹æ³•çš„æ¨åŠ¨ä¸‹çš„æ„å»ºé€Ÿåº¦ä¼˜åŒ–è¿˜æ˜¯æœ‰ç€è‚‰çœ¼å¯è§çš„æå‡é€Ÿåº¦çš„ï¼Œè¿™é‡ŒåŸºäºwebpack2.xçš„æå‡æ–¹æ¡ˆçš„æ•ˆæœå› é¡¹ç›®è€Œå¼‚ï¼Œå¯èƒ½æ•ˆæœå¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½**æ²¡æœ‰æ•ˆæœ**ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€äº›æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä¸è¶³å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï½","publishedAt":"0201-03-11T20:24:17.000Z","status":"published","slug":"webpack2-6-ts","author":{"id":3,"name":"Yangger","email":"i@yangger.cn","created_at":"2021-07-29T06:32:53.775Z","updated_at":"2021-07-29T06:32:53.783Z","picture":null},"articletype":null,"created_at":"2021-07-29T07:13:40.603Z","updated_at":"2021-07-29T09:00:21.859Z","top":null,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"},"categories":[{"id":6,"name":"BABEL","slug":"babel","created_at":"2021-07-29T07:07:57.200Z","updated_at":"2021-07-29T07:07:57.270Z"},{"id":7,"name":"WEBPACK","slug":"webpack","created_at":"2021-07-29T07:08:08.636Z","updated_at":"2021-07-29T07:08:08.642Z"},{"id":10,"name":"ELEMENT-UI","slug":"element-ui","created_at":"2021-07-29T07:12:04.629Z","updated_at":"2021-07-29T07:12:04.634Z"},{"id":11,"name":"TYPESCRIPT","slug":"typescript","created_at":"2021-07-29T07:12:14.521Z","updated_at":"2021-07-29T07:12:14.527Z"}],"nextItem":{"id":5,"title":"markdownè¯­æ³•cssè°ƒè¯•","description":"ä¸“é—¨ç”¨æ¥è°ƒè¯•markdownçš„è¯­æ³•","content":"# è¿™æ˜¯ä¸€çº§æ ‡é¢˜\n\n## è¿™æ˜¯äºŒçº§æ ‡é¢˜\n\n### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜\n\n#### è¿™æ˜¯å››çº§æ ‡é¢˜\n\n##### è¿™æ˜¯äº”çº§æ ‡é¢˜\n\n###### è¿™æ˜¯å…­çº§æ ‡é¢˜\n\n## å­—ä½“\n\n**è¿™æ˜¯åŠ ç²—çš„æ–‡å­—**\n\n*è¿™æ˜¯å€¾æ–œçš„æ–‡å­—*`\n\n***è¿™æ˜¯æ–œä½“åŠ ç²—çš„æ–‡å­—***\n\n~~è¿™æ˜¯åŠ åˆ é™¤çº¿çš„æ–‡å­—~~\n\n## å¼•ç”¨\n\n\u003e è¿™æ˜¯å¼•ç”¨çš„å†…å®¹\n\n\u003e\u003e è¿™æ˜¯å¼•ç”¨çš„å†…å®¹\n\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e è¿™æ˜¯å¼•ç”¨çš„å†…å®¹\n\n## åˆ†å‰²çº¿\n\n### åˆ†å‰²çº¿---\n\n--- \n\n### åˆ†å‰²çº¿ ***\n\n***\n\n## å›¾ç‰‡\n\n![blockchain](https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=702257389,1274025419\u0026fm=27\u0026gp=0.jpg \"åŒºå—é“¾\")\n\n## è¶…é“¾æ¥\n\n[ç®€ä¹¦](http://jianshu.com)\n[ç™¾åº¦](http://baidu.com)\n\n## åˆ—è¡¨\n\n### æ— åºåˆ—è¡¨\n\n- åˆ—è¡¨å†…å®¹\n+ åˆ—è¡¨å†…å®¹\n* åˆ—è¡¨å†…å®¹\n\n### æœ‰åºåˆ—è¡¨\n\n1. åˆ—è¡¨å†…å®¹\n2. åˆ—è¡¨å†…å®¹\n3. åˆ—è¡¨å†…å®¹\n\n### åˆ—è¡¨åµŒå¥—\n\n1. è‹¹æœ\n   1. è‹¹æœ6 \n   2. è‹¹æœ7 \n2. å®‰å“\n3. å“ˆå“ˆ\n\n- æµ‹è¯•\n   - æµ‹è¯•1\n   - æµ‹è¯•2\n- ç¬”è®°\n\n## è¡¨æ ¼\n\nå§“å|æŠ€èƒ½|æ’è¡Œ\n--|:--:|--:\nåˆ˜å¤‡|å“­|å¤§å“¥\nå…³ç¾½|æ‰“|äºŒå“¥\nå¼ é£|éª‚|ä¸‰å¼Ÿ\n\n## ä»£ç \n\n`ä»£ç `\n\n```css\narticle #markdown {}\narticle #markdown h1,\narticle #markdown h2,\narticle #markdown h3,\narticle #markdown h4,\narticle #markdown h5,\narticle #markdown h6 {\n    font-family: Inter;\n    font-style: normal;\n    font-weight: bold;\n    line-height: 1.5;\n    margin: 10px 0;\n}\narticle #markdown h1 {\n    font-size: 2.25rem;\n}\narticle #markdown h2 {\n    font-size: 1.625rem;\n}\n\narticle #markdown h3 {\n    font-size: 1.25rem;\n}\n\narticle #markdown h4,\narticle #markdown h5,\narticle #markdown h6 {\n    font-size: 1rem;\n}\n\n```\n\n## æ­£æ–‡\n\nè¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—\n\n","publishedAt":"2021-08-02T04:00:00.000Z","status":"published","slug":"markdown-css","author":{"id":3,"name":"Yangger","email":"i@yangger.cn","created_by":1,"updated_by":1,"created_at":"2021-07-29T06:32:53.775Z","updated_at":"2021-07-29T06:32:53.783Z","picture":null},"articletype":"Items","created_by":{"id":1,"firstname":"Yang","lastname":"ger","username":null,"email":"i@yangger.cn","password":"$2a$10$dC6wYtNCnHR.qjKkUCuucu47yeFXYT1XzIA4KnNv.lJQs6e3QIWeC","resetPasswordToken":null,"registrationToken":null,"isActive":true,"blocked":null,"preferedLanguage":null},"updated_by":{"id":1,"firstname":"Yang","lastname":"ger","username":null,"email":"i@yangger.cn","password":"$2a$10$dC6wYtNCnHR.qjKkUCuucu47yeFXYT1XzIA4KnNv.lJQs6e3QIWeC","resetPasswordToken":null,"registrationToken":null,"isActive":true,"blocked":null,"preferedLanguage":null},"created_at":"2021-08-02T08:44:15.613Z","updated_at":"2021-08-03T07:46:26.856Z","top":true,"image":{"id":4,"name":"favicon.png","alternativeText":null,"caption":null,"width":512,"height":512,"formats":{"thumbnail":{"name":"thumbnail_favicon.png","hash":"thumbnail_favicon_4d87055159","ext":".png","mime":"image/png","width":156,"height":156,"size":6.27,"path":null,"url":"/uploads/thumbnail_favicon_4d87055159.png"},"small":{"name":"small_favicon.png","hash":"small_favicon_4d87055159","ext":".png","mime":"image/png","width":500,"height":500,"size":28.98,"path":null,"url":"/uploads/small_favicon_4d87055159.png"}},"hash":"favicon_4d87055159","ext":".png","mime":"image/png","size":5.26,"url":"/uploads/favicon_4d87055159.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_by":null,"updated_by":null,"created_at":"2021-07-29T05:57:51.548Z","updated_at":"2021-07-29T05:57:51.548Z"},"categories":[{"id":12,"name":"MARKDOWN","slug":"markdown","created_by":1,"updated_by":1,"created_at":"2021-08-02T08:43:49.809Z","updated_at":"2021-08-02T08:43:49.820Z"}]},"prevItem":{"id":1,"title":"SSRé¡¹ç›®è§„åˆ’","description":"ç›®å‰å…¬å¸é¡¹ç›®çš„ç±»å‹å¤šæ•°æ˜¯SPA,å‰ç«¯è´Ÿè´£ç•Œé¢æ˜¾ç¤ºï¼Œåç«¯è´Ÿè´£æ•°æ®å­˜å‚¨å’Œè®¡ç®—ï¼Œå„å¸å…¶èŒï¼Œä¸ä¼šæŠŠå‰åç«¯çš„é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯ä»¥å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼ŒæœåŠ¡å™¨åªç”¨æä¾›è°ƒç”¨çš„æ¥å£ï¼Œä¸ç”¨ç®¡å±•ç¤ºé€»è¾‘å’Œé¡µé¢åˆæˆï¼Œååèƒ½åŠ›ä¼šæé«˜å‡ å€ï¼›å¼€å‘éå¸¸æ–¹ä¾¿ä½†æ˜¯ä¸å¯é¿å…çš„æœ‰å‰¯ä½œç”¨...","content":"ç›®å‰å…¬å¸é¡¹ç›®çš„ç±»å‹å¤šæ•°æ˜¯SPA,å‰ç«¯è´Ÿè´£ç•Œé¢æ˜¾ç¤ºï¼Œåç«¯è´Ÿè´£æ•°æ®å­˜å‚¨å’Œè®¡ç®—ï¼Œå„å¸å…¶èŒï¼Œä¸ä¼šæŠŠå‰åç«¯çš„é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯ä»¥å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼ŒæœåŠ¡å™¨åªç”¨æä¾›è°ƒç”¨çš„æ¥å£ï¼Œä¸ç”¨ç®¡å±•ç¤ºé€»è¾‘å’Œé¡µé¢åˆæˆï¼Œååèƒ½åŠ›ä¼šæé«˜å‡ å€ï¼›å¼€å‘éå¸¸æ–¹ä¾¿ä½†æ˜¯ä¸å¯é¿å…çš„æœ‰å‰¯ä½œç”¨ï¼š\n\n* é¦–å±åŠ è½½é€Ÿåº¦æ…¢\n* SEO æ”¯æŒç¼ºå¤±\n\næ‰€ä»¥ç°åœ¨å‡†å¤‡è§„åˆ’ä¸€ç§æ–¹æ¡ˆå¯ä»¥å…¼é¡¾SPAå’ŒæœåŠ¡å™¨æ¸²æŸ“çš„ä¼˜åŠ¿\n\n## SSR ä»‹ç»\n\nSSR(Server Side Rendering)åˆšå¥½å¼¥è¡¥äº†SPAçš„ä¸è¶³ï¼Œä½¿å¾—å‰åç«¯åˆ†ç¦»çœŸæ­£å¯ä»¥è¾¾åˆ°å’Œä¼ ç»Ÿç½‘ç«™çš„æ•ˆæœå¹¶è¶…è¶Šä¼ ç»Ÿç½‘ç«™ã€‚\nå…³äºå‰åç«¯åˆ†ç¦»æˆ–SPAçš„ä¼˜ç‚¹å¯ä»¥è‡ªè¡Œäº†è§£ï¼ŒSSRç›¸å¯¹äºSPAä¸»è¦æœ‰ä»¥ä¸‹æå‡\n\n### æ›´å¿«çš„é¦–å±å±•ç¤ºé€Ÿåº¦\n\nç”±äº SPA éœ€è¦å…ˆåŠ è½½å®Œ JavaScript è„šæœ¬æ‰èƒ½å¼€å§‹æ¸²æŸ“ï¼Œæ‰€ä»¥é¦–å±æ¸²æŸ“å¹¶ä¸å¿«ï¼Œåœ¨ JavaScript åŠ è½½ä¸­åªèƒ½æ˜¾ç¤ºç®€å•çš„ç­‰å¾…ç”»é¢ã€‚\nSSR æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå¯ä»¥ç›´æ¥è¾“å‡º HTML å†…å®¹ï¼Œåœ¨é¦–å±å±•ç¤ºä¸Šæ›´æœ‰ä¼˜åŠ¿ã€‚\n\n### SEO æ”¯æŒ\n\nSEO çš„é‡è¦æ€§å¤§å®¶éƒ½çŸ¥é“ï¼Œå› ä¸º SEO éœ€æ±‚å¯¼è‡´ SPA å¯¹ç”µå•†ï¼Œé¦–é¡µï¼Œå†…å®¹ç±»ç½‘ç«™ç­‰éœ€è¦ SEO çš„é¡µé¢æœ›è€Œå´æ­¥ï¼Œåªèƒ½å›åˆ°ä¼ ç»ŸæœåŠ¡ç«¯æ¸²æŸ“çš„æ–¹æ¡ˆä¸­ã€‚\nSSR å¼¥è¡¥äº† SEO çš„ä¸è¶³ï¼ŒçœŸæ­£çš„å¯ä»¥é€šè¿‡å‰åç«¯åˆ†ç¦»çš„æ–¹å¼å®Œæˆæ­¤ç±»ç½‘ç«™ã€‚\n\n## æ¡†æ¶é€‰å‹\n\nSSRç›®å‰åˆ†Client(å®¢æˆ·ç«¯)å’ŒServer(æœåŠ¡ç«¯),ä»¥åŠå¯èƒ½é…åˆPWAï¼Œ**ä¸»è¦**ä½¿ç”¨çš„æ˜¯ä»¥ä¸‹:\n\n### Client\n\n* Vue,Vuex,Vue-Router (Vueå…¨å®¶æ¡¶)\n* Vue-Meta(å®Œå–„SEOé…ç½®)\n* Nuxt(SSR UIæ¸²æŸ“ï¼ŒåŒæ—¶æŠ½è±¡å‡ºå®¢æˆ·ç«¯/æœåŠ¡å™¨åˆ†å¸ƒã€‚)\n\n### Server\n\n* koa (Nodejs ä¸‹ä¸€ä»£çš„Webæ¡†æ¶)\n* logger (æ—¥å¿—)\n* Routing-controllers (ä½¿ç”¨æ–¹æ³•åˆ›å»ºæ§åˆ¶å™¨ç±»ä½œä¸ºå¤„ç†è¯·æ±‚çš„æ“ä½œ,å°†è·¯ç”±æ§åˆ¶å™¨ä¸koaä¸€èµ·ä½¿ç”¨)\n* Sequelize (Sequelizeæ˜¯MySQLçš„åŸºäºæ‰¿è¯ºçš„Node.js ORMæ¡†æ¶ã€‚å®ƒå…·æœ‰å¯é çš„äº‹åŠ¡æ”¯æŒï¼Œå…³ç³»ï¼Œè¯»å–å¤åˆ¶ç­‰åŠŸèƒ½ã€‚)\n* Redis (ç¼“å­˜)\n\n### PWA (Progressive Web Apps)\n\n* Workbox (Google å¼€å‘çš„å·¥å…·é›†ï¼Œèƒ½å¤Ÿæ–¹ä¾¿åœ°é›†æˆåˆ° Webpackã€Gulp ç­‰æ„å»ºæµç¨‹ä¸­ï¼Œå¸®åŠ©å¼€å‘è€…ç”Ÿæˆæˆ–è€…æ³¨å…¥éƒ¨åˆ† ServiceWorker ç›¸å…³ä»£ç )\n* Service Worker (æœåŠ¡å·¥ä½œçº¿ç¨‹, æµè§ˆå™¨åå°ç‹¬ç«‹äºç½‘é¡µçš„è„šæœ¬ï¼Œé¢„ç¼“å­˜ï¼Œæ¶ˆæ¯æ¨é€ï¼Œåå°åŒæ­¥)\n* App Shellæ¨¡å‹ (åŠ è½½å¿…è¦ç•Œé¢, è¿›è¡Œç¦»çº¿ç¼“å­˜)\n\n## ç›®æ ‡æ•ˆæœ\n\n* ç›´æ¥è®¿é—®é¡µé¢è¾¾åˆ°ä¼ ç»ŸæœåŠ¡å™¨æ¸²æŸ“çš„é€Ÿåº¦\n* é¡¹ç›®å†…è·³è½¬åƒ SPA ä¸€æ ·å¿«é€Ÿè·³è½¬\n* æ”¯æŒ SEO\n* åŒæ„ä»£ç ï¼ŒèŠ‚çœå¼€å‘å·¥ä½œé‡ï¼Œæå‡æ•ˆç‡\n* å‰åç«¯åˆ†ç¦»ï¼Œå¯å¹¶è¡Œå¼€å‘ï¼Œç‹¬ç«‹ç®¡ç†\n\n## æ ¸å¿ƒæ€è·¯\n\n* è¾“å…¥åœ°å€è®¿é—®æˆ–åˆ·æ–°è®¿é—®æ—¶åœ¨ Clinet ç«¯æ¸²æŸ“é¡µé¢\n* æµè§ˆå™¨ä¸­è·³è½¬æ—¶åœ¨ Server ç«¯æ¸²æŸ“é¡µé¢\n* å‰åç«¯å…¬ç”¨åŒä¸€å¥—ä¸šåŠ¡ä»£ç \n* åˆ©ç”¨ä¸­é—´ä»¶ï¼Œé€‚é…å™¨ä»¥åŠç¯å¢ƒåˆ¤æ–­å±è”½æ‰ä¸šåŠ¡ä»£ç ä¸­çš„ç¯å¢ƒå·®å¼‚\n\n## ç›®å½•ç»“æ„\n\n```\nâ”œâ”€client\nâ”‚  â”œâ”€.nuxt\nâ”‚  â”‚  â”œâ”€components\nâ”‚  â”‚  â””â”€views\nâ”‚  â”œâ”€assets\nâ”‚  â”‚  â”œâ”€icon\nâ”‚  â”‚  â””â”€less\nâ”‚  â”œâ”€biz-components\nâ”‚  â”œâ”€components\nâ”‚  â”œâ”€layouts\nâ”‚  â”œâ”€middleware\nâ”‚  â”œâ”€pages\nâ”‚  â”œâ”€plugins\nâ”‚  â”œâ”€service\nâ”‚  â”œâ”€static\nâ”‚  â”‚  â””â”€base\nâ”‚  â”œâ”€store\nâ”‚  â”‚  â””â”€modules\nâ”‚  â””â”€utils\nâ”œâ”€server\nâ”‚   â”œâ”€controllers\nâ”‚   â”‚  â””â”€api\nâ”‚   â”œâ”€interfaces\nâ”‚   â”œâ”€middlewares\nâ”‚   â””â”€utils\nâ”œâ”€.editorconfig\nâ”œâ”€.eslintignore\nâ”œâ”€.eslintrc.js\nâ”œâ”€index.js\nâ”œâ”€nuxt.config.js\nâ”œâ”€package.json\nâ”œâ”€package-lock.json\nâ”œâ”€README.md\nâ”œâ”€tsconfig.json\nâ”œâ”€tslint.json\nâ””â”€yarn.lock\n```\n## æ€»ä½“è§„åˆ’\n\nä½¿ç”¨Nuxtå’ŒPWAé…åˆKoaå®ŒæˆSSRï¼Œåˆ©äºSEOä¼˜åŒ–å’Œé¦–å±æ¸²æŸ“æ—¶é—´åŠ é€Ÿ.ä½†æ˜¯ä¹Ÿæœ‰å±€é™æ€§å­˜åœ¨:\n* æœåŠ¡ç«¯å‹åŠ›è¾ƒå¤§: åœ¨é«˜å¹¶å‘çš„è®¿é—®ä¸‹ï¼ŒæœåŠ¡ç«¯å¤§é‡å ç”¨æœåŠ¡å™¨çš„èµ„æº\n* å¼€å‘æ¡ä»¶å—é™: createdå’ŒbeforeCreateä¹‹å¤–çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸å¯ç”¨ï¼Œå› æ­¤é¡¹ç›®å¼•ç”¨çš„ç¬¬ä¸‰æ–¹çš„åº“ä¹Ÿä¸å¯ç”¨å…¶å®ƒç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè¿™å¯¹å¼•ç”¨åº“çš„é€‰æ‹©äº§ç”Ÿäº†å¾ˆå¤§çš„é™åˆ¶ï¼›\n* å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜: é™¤äº†å¯¹webpackã€Vueè¦ç†Ÿæ‚‰ï¼Œè¿˜éœ€è¦æŒæ¡nodeã€Koaç›¸å…³æŠ€æœ¯ã€‚ç›¸å¯¹äºå®¢æˆ·ç«¯æ¸²æŸ“ï¼Œé¡¹ç›®æ„å»ºã€éƒ¨ç½²è¿‡ç¨‹æ›´åŠ å¤æ‚ã€‚\n\nç¤ºæ„å›¾\n\n![buildç¤ºæ„å›¾](http://ww1.sinaimg.cn/large/005Yb8FKgy1ftb2l9t44nj31gn0rt42r.jpg)\n\n###å®¢æˆ¶ç«¯è§„åˆ’\n\nåœ¨VUEçš„é …ç›®ä¸­,åŒä¸€å¥—ä»£ç åœ¨ Node ç«¯å’Œæµè§ˆå™¨ç«¯éƒ½èƒ½è¿è¡Œï¼Œæ˜¯æ²¡æœ‰â€œåç«¯æ¨¡æ¿â€çš„æ¦‚å¿µçš„ï¼ŒåŒæ ·å¯¹äºâ€œå†…å®¹ç‰‡æ®µâ€ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åœ¨é¦–å±ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ç›´å‡º HTML åï¼Œæµè§ˆå™¨ç«¯è¿›è¡Œ Hydrate(æ··åˆ)ï¼Œç»‘å®šäº‹ä»¶ä½¿é¡µé¢çœŸæ­£å¯å“åº”ï¼Œé™¤éåˆ·æ–°é¡µé¢ï¼Œå¦åˆ™åç»­çš„è·¯ç”±åˆ‡æ¢éƒ½å°†ç”±å‰ç«¯è·¯ç”±å™¨å®Œæˆã€‚\nåœ¨ Vue SSR é¡¹ç›®ä¸­çš„å®é™…æ•ˆæœå°±æ˜¯é¦–å±ç”±æœåŠ¡ç«¯æ¸²æŸ“ï¼Œéšåå½“è·¯ç”±åˆ‡æ¢æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè¯·æ±‚å¯¹åº”çš„è·¯ç”±ç»„ä»¶ä»£ç ã€‚æ‰€ä»¥***å‰ç«¯è·¯ç”±å‘æœåŠ¡ç«¯è¯·æ±‚å†…å®¹ç‰‡æ®µæ¸²æŸ“å†…å®¹***å®é™…ä¸Šå·²ç»å®Œæˆäº†ï¼Œå¯¹äºå¼€å‘è€…å¹¶æ²¡æœ‰é¢å¤–çš„å·¥ä½œè¦åšã€‚\n\n* å¼•ç”¨***Nuxt*** å¯é€‰å¼•ç”¨***PWA***\n* é¢„ç¼“å­˜ App Shell é¡µé¢\n* Service Worker æ‹¦æˆªæ‰€æœ‰ HTML è¯·æ±‚ï¼Œç»Ÿä¸€è¿”å›ç¼“å­˜çš„ App Shell é¡µé¢ã€‚åŒæ—¶å‘æœåŠ¡ç«¯è¯·æ±‚å½“å‰é¡µé¢éœ€è¦çš„å†…å®¹ç‰‡æ®µå¹¶å†™å…¥ç¼“å­˜\n* å‰ç«¯è·¯ç”±( app.js )å‘æœåŠ¡ç«¯è¯·æ±‚å†…å®¹ç‰‡æ®µï¼Œå‘ç°ç¼“å­˜ä¸­å·²å­˜åœ¨ï¼Œå°†å…¶å¡«å……è¿› App Shell ä¸­ï¼Œå®Œæˆå‰ç«¯æ¸²æŸ“\n* ç¦»çº¿ç”¨æˆ·ä½“éªŒ(é€‰ç”¨)\n\n![SSR](http://ww1.sinaimg.cn/large/005Yb8FKgy1ftb1edsgakj30k00bg77l.jpg)\n\n### æœå‹™ç«¯è§„åˆ’\n\nè¿™é‡Œçš„æœåŠ¡ç«¯æ˜¯æŒ‡Nuxtå’Œæ¸²æŸ“å®¢æˆ·ç«¯ä½¿ç”¨çš„ï¼Œå› ä¸ºå…¬å¸ç”¨çš„åç«¯æ˜¯Javaï¼Œæ‰€ä»¥è¿™é‡Œçš„Nodeä½œä¸ºä¸­é—´å±‚ä½¿ç”¨ï¼Œå¹¶ä¸”å®Œæˆå‰ç«¯ä½¿ç”¨SSRï¼Œé¡µé¢ç¼“å­˜ä¹Ÿå¯ä»¥å¸®åŠ©å‰ç«¯è°ƒæ•´ä¸€ä¸‹åç«¯çš„æ•°æ®ï¼Œæˆ–è€…å†™æ¥å£ï¼Œæ‹“å±•æ€§éå¸¸å¼ºã€‚\n\n* æ”¯æŒè¿”å›å®Œæ•´é¡µé¢å’Œå†…å®¹ç‰‡æ®µ( contentOnly )\n* æ¸²æŸ“Nuxtç”Ÿæˆçš„UI\n* é¡µé¢ç¼“å­˜\n\nSSRéœ€è¦å…ˆåœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆè™šæ‹Ÿ DOM ï¼Œç„¶åå†åºåˆ—åŒ–ä¸º HTML æ–‡æœ¬ï¼Œè€Œä¸”ä¸ºäº†è¯·æ±‚ä¹‹é—´çš„éš”ç¦»æ€§ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ context ï¼Œè¿™ç§åšæ³•ä½¿å¾—å®ƒä¸ç›´æ¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ç›¸æ¯”æ€§èƒ½å·®äº†æ•°åå€ã€‚  \næ‰€ä»¥ä¸ºäº†æé«˜å¹¶å‘ï¼Œå¹¶ä¸”ä¸ºäº†é™ä½æœåŠ¡å™¨çš„æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥éœ€è¦è¦é’ˆå¯¹å¸¸ç”¨ç•Œé¢æˆ–è€…ç‰¹å®šç»„ä»¶åšé•¿æ—¶é—´çš„ç¼“å­˜,è¿™é‡Œç”¨Redisåšç¼“å­˜,æµç¨‹å›¾å¦‚ä¸‹\n\n![æœåŠ¡ç«¯æ¸²æŸ“æ—¶åºå›¾-å‘½ä¸­ç¼“å­˜](http://ww1.sinaimg.cn/large/005Yb8FKgy1ftbg8mcmi8j30m80cial3.jpg)\n\n![æœåŠ¡ç«¯æ¸²æŸ“æ—¶åºå›¾-æœªå‘½ä¸­ç¼“å­˜](http://ww1.sinaimg.cn/large/005Yb8FKgy1ftbg8vhvzoj30m80cik36.jpg)\n\n### æœå‹™å™¨è§„åˆ’\n\n* cdnç¼“å­˜ç­–ç•¥\n* nginxç¼“å­˜ç­–ç•¥\n\n## å‚è€ƒèµ„æ–™\n\n[App Shell æ¨¡å‹](https://developers.google.cn/web/fundamentals/architecture/app-shell)  \n[offline](https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/)  \n[workbox](https://developers.google.com/web/tools/workbox/)  \n[åœ¨ Vue SSR ä¸­ä½¿ç”¨ Service Worker](https://zhuanlan.zhihu.com/p/31630322)  \n[SSR æ¶æ„é¡¹ç›®å®ç°ç¦»çº¿å¯ç”¨](https://zhuanlan.zhihu.com/p/30791448)  \n[VUE SSRå®šåˆ¶ä¸ä½¿ç”¨å¿ƒå¾—](https://zhuanlan.zhihu.com/p/36017189)  \n[è§£å¯†Vue SSR](https://zhuanlan.zhihu.com/p/35871344)\n\n## æ€»ç»“\n\nç›®å‰å¯ç”¨Nuxt,vue-metaé…åˆKoaå®ç°SEOå’Œé¦–å±æ¸²æŸ“çš„æ—¶é—´.\nå¦‚æœå‰¥ç¦»Vueå…¨å®¶æ¡¶å®ç°SSRä¸”ä¸PWAçš„Workboxå®ç°æ›´å¥½çš„ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒï¼Œä»¥åŠç¨‹åºè‰¯å¥½çš„æ€§èƒ½ï¼Œéœ€è¦è¾ƒé«˜çš„å¼€å‘æˆæœ¬ä¸”å¯¹å¼€å‘äººå‘˜æœ‰è¾ƒé«˜çš„éœ€æ±‚\n***SSRä¸PWAçš„é…åˆä½¿ç”¨ï¼Œå®é™…è¿ä½œç”Ÿäº§ç¯å¢ƒå¼€å‘éš¾åº¦è¾ƒé«˜, CPU æ˜¯ SSR çš„æ€§èƒ½ç“¶é¢ˆ***\n","publishedAt":"0201-03-11T19:04:17.000Z","status":"published","slug":"ssr-project-plan","author":{"id":3,"name":"Yangger","email":"i@yangger.cn","created_by":1,"updated_by":1,"created_at":"2021-07-29T06:32:53.775Z","updated_at":"2021-07-29T06:32:53.783Z","picture":null},"articletype":"Banner","created_by":{"id":1,"firstname":"Yang","lastname":"ger","username":null,"email":"i@yangger.cn","password":"$2a$10$dC6wYtNCnHR.qjKkUCuucu47yeFXYT1XzIA4KnNv.lJQs6e3QIWeC","resetPasswordToken":null,"registrationToken":null,"isActive":true,"blocked":null,"preferedLanguage":null},"updated_by":{"id":1,"firstname":"Yang","lastname":"ger","username":null,"email":"i@yangger.cn","password":"$2a$10$dC6wYtNCnHR.qjKkUCuucu47yeFXYT1XzIA4KnNv.lJQs6e3QIWeC","resetPasswordToken":null,"registrationToken":null,"isActive":true,"blocked":null,"preferedLanguage":null},"created_at":"2021-07-29T07:01:17.931Z","updated_at":"2021-08-03T07:46:21.306Z","top":false,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_by":null,"updated_by":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"},"categories":[{"id":9,"name":"SSR","slug":"ssr","created_by":1,"updated_by":1,"created_at":"2021-07-29T07:08:21.486Z","updated_at":"2021-07-29T07:08:21.492Z"}]}},"categories":[{"id":6,"name":"BABEL","slug":"babel","created_at":"2021-07-29T07:07:57.200Z","updated_at":"2021-07-29T07:07:57.270Z","articles":[{"id":3,"title":"webpack2.xæ„å»ºé€Ÿåº¦ä¼˜åŒ–","description":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚","content":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n\n## æ–¹æ¡ˆ\n\nè¿™é‡Œå› ä¸ºbabelå·²ç»å‡çº§åˆ°7äº†æ‰€ä»¥ï¼Œæƒ³ç”¨happyPack + DllPlugin + babel7æ¥è¯•è¯•çœ‹èƒ½æå‡å¤šå°‘é€Ÿåº¦ã€‚\næ€»ä½“æ¥è¯´ä¿®æ”¹äº†ä¸€äº›webpackçš„é…ç½®å’Œbabelçš„é…ç½®ï¼Œå»æ‰äº†ä¸€äº›æ— ç”¨çš„ä¾èµ–ï¼Œpackage.jsoné‡Œé¢browserlistå˜æˆäº† brow**s**erlistï¼Œæ›´æ¢äº†ä¸€äº›webpackçš„æ’ä»¶ï¼Œä¸»è¦æœ‰ä¸‹ï¼š\n\n\u003e  ç§»é™¤çš„ä¾èµ–\n\n```json\n{\n\t\"babel-core\": \"^6.26.3\",\n\t    \"babel-plugin-syntax-jsx\": \"^6.18.0\",  \n  \"babel-plugin-transform-runtime\": \"^6.22.0\",\n  \"babel-preset-latest\": \"^6.22.0\",  \n\"babel-preset-stage-2\": \"^6.22.0\",  \n\"babel-register\": \"^6.26.0\",  \n\"babel-runtime\": \"^6.23.0\",\n}\n```\n\n\u003e æ›´æ–°æˆ–æ–°å¢çš„ä¾èµ–\n\n```json\n\"@babel/polyfill\": \"^7.6.0\",  \n\"@babel/runtime\": \"^7.6.3\",\n\"@babel/core\": \"^7.0.0\",  \n\"@babel/plugin-external-helpers\": \"^7.2.0\",  \n\"@babel/plugin-proposal-class-properties\": \"^7.0.0\",  \n\"@babel/plugin-proposal-decorators\": \"^7.0.0\",  \n\"@babel/plugin-proposal-export-namespace-from\": \"^7.0.0\",  \n\"@babel/plugin-proposal-function-sent\": \"^7.0.0\",  \n\"@babel/plugin-proposal-json-strings\": \"^7.0.0\",  \n\"@babel/plugin-proposal-numeric-separator\": \"^7.0.0\",  \n\"@babel/plugin-proposal-throw-expressions\": \"^7.0.0\",  \n\"@babel/plugin-syntax-dynamic-import\": \"^7.0.0\",  \n\"@babel/plugin-syntax-import-meta\": \"^7.0.0\",  \n\"@babel/plugin-syntax-jsx\": \"^7.0.0\",  \n\"@babel/plugin-transform-runtime\": \"^7.6.2\",  \n\"@babel/preset-env\": \"^7.0.0\",  \n\"@babel/preset-es2015\": \"^7.0.0-beta.53\",  \n\"@babel/preset-typescript\": \"^7.6.0\",  \n\"@babel/register\": \"^7.0.0\",  \n\"@babel/runtime-corejs2\": \"^7.0.0\",\n\"@vue/babel-plugin-transform-vue-jsx\": \"^1.0.0\",\n\"babel-loader\": \"^8.0.0\",\n\"clean-webpack-plugin\": \"^3.0.0\",\n\"happypack\": \"^5.0.1\",  \n\"html-webpack-include-assets-plugin\": \"^2.0.0\",\n\"uglifyjs-webpack-plugin\": \"^1.3.0\",\n\"webpack-bundle-analyzer\": \"^2.13.1\",\n\"webpack-merge\": \"^2.6.1\",  \n\"webpack-parallel-uglify-plugin\": \"^1.1.2\"\n```\n\n## å¼€å·¥\n\n### happypack\n\nè¿™é‡Œç”¨çš„æ˜¯[happypack](https://github.com/amireh/happypack)å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ,é¦–å…ˆå®‰è£…happypackçš„ä¾èµ–.ç„¶åå†åœ¨webpack.base.jså¢åŠ é…ç½®ï¼Œè¾¾åˆ°devæˆ–è€…prodç¯å¢ƒéƒ½å¯ä»¥åŠ é€Ÿçš„æ•ˆæœã€‚\n\n\u003e å¼•å…¥å¿…è¦çš„ä¾èµ–\n\n```javascript\nconst HappyPack = require('happypack') // å¼•ç”¨happypack\nconst os = require('os'); // è·å–ç³»ç»Ÿé…ç½®\n// å¼€å¯çš„çº¿ç¨‹æ± é»˜è®¤ä¸º4ï¼Œè¿™é‡Œç›´æ¥å–çš„æ˜¯ç”µè„‘çš„cpuçº¿ç¨‹æ•°\nconst happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length }) \n```\nç„¶åç”¨happy-loaderä»£æ›¿babel-loaderï¼Œå¹¶ä¸”å¼€å¯babel-loaderçš„ç¼“å­˜ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œloaderåé¢çš„**id=happyPack**å¯¹åº”çš„pluginsé‡Œçš„idè¯†ï¼Œhappypackä¸ä»…å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…jsä¹Ÿå¯ä»¥æ‰“åŒ…cssã€‚\n\n```javascript\n// module.rules\n{\n    test: /\\.js$/,\n    // loader: 'babel-loader',  \n    loader: 'happypack/loader?id=happyPack',\n    include: [\n\t  resolve('src'),\n\t  resolve('test'),\n\t ],\n    exclude: /node_modules/\n},\n// plugins\nnew HappyPack({  \n  //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶  \n  id: 'happyPack',  \n  //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·  \n  loaders: [{  \n  loader: 'babel-loader',  \n  // here you configure babel:  \n  options: { babelrc: true, cacheDirectory: true }  \n }],  //å…±äº«è¿›ç¨‹æ±   \n  threadPool: happyThreadPool,  \n  //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—  \n  verbose: true,  \n}),\n```\n\n### DllPlugin å’Œ DllReferencePlugin\n\nDllplginæ’ä»¶çš„æ¦‚å¿µç±»ä¼¼äºCçš„åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨ï¼Œå°†æ›´æ–°æ¬¡æ•°å¾ˆå°‘æˆ–è€…å‡ ä¹ä¸æ›´æ–°çš„åŒ…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‹†åˆ†bundlesï¼Œæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œé€šè¿‡manifest.jsonç¡®å®šåŒ…çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼, å†ç”¨DllReferencePluginä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ã€‚\n\né¦–å…ˆæˆ‘ä»¬å…ˆä¿®æ”¹`/config/index.js`æ–°å¢æˆ‘ä»¬çš„dllé…ç½®æ–¹ä¾¿å¼•ç”¨ï¼Œå†åœ¨`/build`çš„ç›®å½•ä¸‹æ–°å¢`webpack.dll.conf.js`ç”¨æ¥æ‰“åŒ…dllã€‚\n\n\u003e /config/index.js\n\n```javascript\n// æ–°å¢é…ç½®\n...\ndll: {  \n  static: path.resolve(__dirname, '../static/lib'),  // dllå­˜æ”¾è·¯å¾„ ç›¸å¯¹äºé¡¹ç›®çš„static/lib\n  list: {  // å¤šä¸ªåŒ…åˆ—è¡¨ç”¨æ¥åŒºåˆ†\n\t  vendor: ['vue/dist/vue.common.js','vue-router', 'vuex'],  \n\t  'asset': ['superagent']  \n}\n```\n\n\u003e /build/webpack.dll.conf.js\n\n```javascript\nvar path = require('path')\n\nvar webpack = require('webpack')\nvar CleanWebpackPlugin = require('clean-webpack-plugin')\n\nvar config = require('../config')\nvar __root = path.resolve(__dirname, '../')\n\nmodule.exports = {\n    context: __root, // è¿™é‡Œé…ç½®çš„contextå°±æ˜¯åé¢dllçš„context\n    entry: config.dll.list,\n    output: {\n        path: config.dll.static,\n        filename: '[name]-[chunkhash:7].dll.js',\n        library: 'lib_[name]',\n        // *** è¿™é‡Œä¸è¦æ·»åŠ libraryTargetï¼Œå¦åˆ™webpackæ‰“åŒ…æ—¶ä¼šå‡ºé”™ã€‚\n        // ï¼ˆæç¤ºæ˜¯__WEBPACK__EXTERNAL__MODULE__xxxæœªå®šä¹‰ï¼‰ ***\n        // libraryTarget: 'umd'\n    },\n    resolve: {\n        modules: [path.resolve(__root, 'node_modules')],\n        extensions: ['.js', '.json'],\n        alias: {\n            'vue$': 'vue/dist/vue.esm.js'\n        }\n    },\n    // è¿™é‡Œæ²¡æœ‰å†™loadersï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œæ·»åŠ loaders\n    plugins: [\n        // *** è¿™é‡Œå¾ˆå…³é”® ***\n        new webpack.DllPlugin({ // å› ä¸ºä¸Šé¢å†™äº†contextï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æŒ‡å®šcontext\n            // è¿™é‡Œmanifestçš„åå­—å¿…é¡»è¦æœ‰å˜é‡ï¼Œå› ä¸ºç±»ä¼¼ä¸Šé¢çš„coreå’Œassetä¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªmanifestï¼Œ\n            // å¦‚æœåç§°ç›¸åŒï¼Œmanifestä¼šç”Ÿæˆä¸è§„èŒƒçš„jsonï¼Œåœ¨å¼•ç”¨æ—¶ä¼šæŠ¥é”™ã€‚\n            path: path.resolve(__root, 'static/manifest/[name].manifest.json'),\n            name: 'lib_[name]' // *** è¿™é‡Œçš„åå­—å¿…é¡»ä¸output.libraryä¸€è‡´ ***\n        }),\n        // è¿™ä¸ªæ˜¯ç”¨æ¥ç¨³å®šhashå€¼ï¼Œé˜²æ­¢å‡ºç°webpackçš„hashå‡ºç°è«åçš„å˜åŒ–\n        new webpack.HashedModuleIdsPlugin(),\n        new webpack.NamedChunksPlugin(),\n    ]\n}\n```\nç„¶ååœ¨`package.json`æ·»åŠ `\"build:dll\": \"webpack --config build/webpack.dll.conf.js\"`ç”¨æ¥ç”Ÿæˆdllï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•ã€‚\n\n![æ‰§è¡Œdllæ‰“åŒ…ç»“æœ](https://oss.yangger.cn/assets/blog/667E3894-9F16-4E11-BE28-D2E9B3E27DCF.png)\n\nåœ¨é¡¹ç›®çš„`static/lib`çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”çš„dll.js, è€Œä¸”åœ¨`static/manifest`ç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„manifest.jsonã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹åéœ€è¦å°†ä»–ä»¬ä¸€èµ·ä¸Šä¼ åˆ°git/svnç­‰æºç ä»“åº“ï¼Œå› ä¸ºå‡ ä¹ä¸éœ€è¦æ›´æ–°æˆ–è€…å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥åªéœ€è¦æ¯æ¬¡æ‰§è¡Œå®Œä¹‹åè®°å¾—ä¸Šä¼ åˆ°æºç ä»“åº“å³å¯ã€‚**å¦‚æœä¸æ‰‹åŠ¨ä¸Šä¼ ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨æ‰“åŒ…ä»£ç ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œä¸€æ¬¡`npm run build:dll`å‘½ä»¤**\n\næ‰“åŒ…å®Œdllä¹‹åï¼Œéœ€è¦ä¿®æ”¹`webpack.base.js`è®©æˆ‘ä»¬çš„åœ¨ç¼–è¯‘/æ‰“åŒ…çš„æ—¶å€™æ„Ÿå—æ„å»ºé€Ÿåº¦çš„æå‡ã€‚\n\n\u003e webpack.base.js\n\n```javascript\nconst HTMLWebpackIncludeAssetsPlugin = require('html-webpack-include-assets-plugin')  // æŠŠæˆ‘ä»¬çš„dllå¼•å…¥html\nconst CopyWebpackPlugin = require('copy-webpack-plugin') // å°†dllæ–‡ä»¶æ‹·è´åˆ°ä½ çš„distç›®å½•ä¸‹\nconst __root = path.resolve(__dirname, '../')\n// è·å–dllæ–‡ä»¶çš„manifest\nfunction getDllManifest() {\n    var plugins = []\n    Object.keys(config.dll.list).forEach((name) =\u003e {\n        plugins.push(\n            new webpack.DllReferencePlugin({\n                context: __root, // è¿™é‡Œçš„contextå¿…é¡»ä¸DllPluginä¸­çš„contextä¿æŒä¸€è‡´\n                manifest: path.resolve(__root, 'static/manifest/[name].manifest.json').replace(\n                    /\\[name\\]/gi, name)\n            })\n        )\n    })\n    return plugins\n}\n\n//plugins\n\nplugins: [\n\t//...\n\t...getDllManifest(),\n\tnew HTMLWebpackIncludeAssetsPlugin({\n\t    append: false,\n\t    publicPath: config.build.assetsPublicPath,\n\t    assets: [{\n\t        path: config.build.assetsSubDirectory,\n\t        glob: '**/*.js',\n\t        globPath: config.dll.static\n        }],\n\t}),\n]\n```\n\nè¿™æ ·DllPlugin å’Œ DllReferencePluginçš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†\n\n### å…¶ä»–æ„å»ºçš„å°ä¼˜åŒ–å’Œå‘\n\nä¹‹å‰æ„å»ºçš„æ—¶å€™ä¼šä¸€ç›´çœ‹åˆ°è¿™æ ·çš„é”™è¯¯: `# DefaultsError: 'warnings' is not a supported option`\næ˜¯å› ä¸ºUglifyJsPluginæ›´æ–°äº†ï¼Œé…ç½®æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯å¼•ç”¨å¤–éƒ¨çš„[uglifyjs-webpack-plugin]([https://github.com/webpack-contrib/uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin))æ’ä»¶ä»£æ›¿webpackè‡ªå¸¦çš„ã€‚\n\nä¿®æ”¹å¦‚ä¸‹:\n\n```javascript\n// new webpack.optimize.UglifyJsPlugin({  \n//   compress: {  \n//     warnings: false  \n//   },  \n//   sourceMap: true  \n// }),\nnew UglifyJsPlugin({  \n  cache: '.cache/',  \n  parallel: true,  \n}),  \n```\n\nç„¶ååœ¨devç¯å¢ƒä¸­æ–°å¢[BundleAnalyzerPlugin](https://github.com/webpack-contrib/webpack-bundle-analyzer)ç”¨æ¥æŸ¥çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆä¾èµ–æˆ–è€…å“ªä¸ªæ–‡ä»¶å¤ªå¤§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„åšä»£ç ä¼˜åŒ–\n\n### babe7å‡çº§\n\nå‡çº§åˆ°babel7éå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹[å®˜ç½‘å‡çº§æŒ‡å—](https://babeljs.io/docs/en/v7-migration)ã€‚\nå…¶å®ä¸»è¦æ›´æ–°æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n  1. è‡ªå¸¦æ”¯æŒTypeScriptçš„æ”¯æŒï¼Œts-loaderæˆ–è®¸å¯ä»¥ä¸ç”¨äº†?\n  2. [ç§»é™¤stage-*](https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets)\n  3. ä»¥ä¸‹é¢„è®¾éƒ½å½’å¹¶åˆ°\"@babel/preset-env\"äº†\n\t    -   `babel-preset-es2015`\n\t\t-   `babel-preset-es2016`\n\t\t-   `babel-preset-es2017`\n\t\t-   `babel-preset-latest`\n\t\t-  A combination of the above ^\n\t\næ‰€ä»¥è¿™é‡Œå±•ç¤ºä¸€ä¸‹å‡çº§å`.bablerc`ï¼Œä»…ä¾›å‚è€ƒ~\n\n\u003e .bablerc\n\n```json\n// {\n//   \"presets\": [\n//     [\"latest\", {\n//       \"es2015\": { \"modules\": false }\n//     }],\n//     \"stage-2\"\n//   ],\n//   \"plugins\": [\"transform-runtime\", \"transform-vue-jsx\"],\n//   \"comments\": false,\n//   \"env\": {\n//     \"test\": {\n//       \"presets\": [\"latest\", \"stage-2\"],\n//       \"plugins\": [ \"istanbul\" ]\n//     }\n//   }\n// }\n\n{  \n  \"presets\": [\"@babel/preset-env\", \"@babel/preset-typescript\", \"@vue/babel-preset-jsx\"],  \n  \"plugins\": [\"@babel/plugin-transform-runtime\", \"@babel/plugin-external-helpers\"]  \n}\n```\n\n## æµ‹è¯•\n\nåˆ°è¿™é‡Œå…¬å¸çš„å…ƒè€çº§é¡¹ç›®åŸºæœ¬å·²ç»ä¼˜åŒ–å®Œæ¯•äº†ï¼Œåœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨æµ‹è¯•ä¸€ä¸‹æ‰“åŒ…é€Ÿåº¦çš„åŒºåˆ«è¯•è¯•.\n\n### mac 6æ ¸12çº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/FF249298-12D6-439E-A149-1A51EDF30C55.png)\n\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/590E0034-4D68-4BE7-AEDA-7F0FFA4BB58E.png)\n\n### centos å•æ ¸åŒçº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/A535621B-69CB-4478-8C30-B547F4C33601.png)\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/71D1F9DB-E95E-4FE3-A5D3-85AAE3C7F342.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæå‡é€Ÿåº¦çº¦ç­‰äº3/5ï¼Œç›¸å¯¹äºæ¯æ¬¡æäº¤CI/CDèµ°ä¸‹æ¥6-7åˆ†é’Ÿè¿˜æ˜¯æœ‰å¾ˆå¤§æå‡çš„ï¼Œèµ·ç æ³¡â˜•ï¸å˜æˆæ³¡é€Ÿæº¶â˜•ï¸äº†hhhhã€‚\n\n## æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œåœ¨è¿™äº›æ–¹æ³•çš„æ¨åŠ¨ä¸‹çš„æ„å»ºé€Ÿåº¦ä¼˜åŒ–è¿˜æ˜¯æœ‰ç€è‚‰çœ¼å¯è§çš„æå‡é€Ÿåº¦çš„ï¼Œè¿™é‡ŒåŸºäºwebpack2.xçš„æå‡æ–¹æ¡ˆçš„æ•ˆæœå› é¡¹ç›®è€Œå¼‚ï¼Œå¯èƒ½æ•ˆæœå¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½**æ²¡æœ‰æ•ˆæœ**ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€äº›æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä¸è¶³å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï½","publishedAt":"2019-03-11T19:00:00.000Z","status":"published","slug":"webpack2-x","author":null,"articletype":null,"created_at":"2021-07-29T07:09:49.741Z","updated_at":"2021-07-29T09:00:31.546Z","top":null,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}},{"id":4,"title":"webpack2.6å‡çº§tsæ”¯æŒ","description":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n","content":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n\n## æ–¹æ¡ˆ\n\nè¿™é‡Œå› ä¸ºbabelå·²ç»å‡çº§åˆ°7äº†æ‰€ä»¥ï¼Œæƒ³ç”¨happyPack + DllPlugin + babel7æ¥è¯•è¯•çœ‹èƒ½æå‡å¤šå°‘é€Ÿåº¦ã€‚\næ€»ä½“æ¥è¯´ä¿®æ”¹äº†ä¸€äº›webpackçš„é…ç½®å’Œbabelçš„é…ç½®ï¼Œå»æ‰äº†ä¸€äº›æ— ç”¨çš„ä¾èµ–ï¼Œpackage.jsoné‡Œé¢browserlistå˜æˆäº† brow**s**erlistï¼Œæ›´æ¢äº†ä¸€äº›webpackçš„æ’ä»¶ï¼Œä¸»è¦æœ‰ä¸‹ï¼š\n\n\u003e  ç§»é™¤çš„ä¾èµ–\n\n```json\n{\n\t\"babel-core\": \"^6.26.3\",\n\t    \"babel-plugin-syntax-jsx\": \"^6.18.0\",  \n  \"babel-plugin-transform-runtime\": \"^6.22.0\",\n  \"babel-preset-latest\": \"^6.22.0\",  \n\"babel-preset-stage-2\": \"^6.22.0\",  \n\"babel-register\": \"^6.26.0\",  \n\"babel-runtime\": \"^6.23.0\",\n}\n```\n\n\u003e æ›´æ–°æˆ–æ–°å¢çš„ä¾èµ–\n\n```json\n\"@babel/polyfill\": \"^7.6.0\",  \n\"@babel/runtime\": \"^7.6.3\",\n\"@babel/core\": \"^7.0.0\",  \n\"@babel/plugin-external-helpers\": \"^7.2.0\",  \n\"@babel/plugin-proposal-class-properties\": \"^7.0.0\",  \n\"@babel/plugin-proposal-decorators\": \"^7.0.0\",  \n\"@babel/plugin-proposal-export-namespace-from\": \"^7.0.0\",  \n\"@babel/plugin-proposal-function-sent\": \"^7.0.0\",  \n\"@babel/plugin-proposal-json-strings\": \"^7.0.0\",  \n\"@babel/plugin-proposal-numeric-separator\": \"^7.0.0\",  \n\"@babel/plugin-proposal-throw-expressions\": \"^7.0.0\",  \n\"@babel/plugin-syntax-dynamic-import\": \"^7.0.0\",  \n\"@babel/plugin-syntax-import-meta\": \"^7.0.0\",  \n\"@babel/plugin-syntax-jsx\": \"^7.0.0\",  \n\"@babel/plugin-transform-runtime\": \"^7.6.2\",  \n\"@babel/preset-env\": \"^7.0.0\",  \n\"@babel/preset-es2015\": \"^7.0.0-beta.53\",  \n\"@babel/preset-typescript\": \"^7.6.0\",  \n\"@babel/register\": \"^7.0.0\",  \n\"@babel/runtime-corejs2\": \"^7.0.0\",\n\"@vue/babel-plugin-transform-vue-jsx\": \"^1.0.0\",\n\"babel-loader\": \"^8.0.0\",\n\"clean-webpack-plugin\": \"^3.0.0\",\n\"happypack\": \"^5.0.1\",  \n\"html-webpack-include-assets-plugin\": \"^2.0.0\",\n\"uglifyjs-webpack-plugin\": \"^1.3.0\",\n\"webpack-bundle-analyzer\": \"^2.13.1\",\n\"webpack-merge\": \"^2.6.1\",  \n\"webpack-parallel-uglify-plugin\": \"^1.1.2\"\n```\n\n## å¼€å·¥\n\n### happypack\n\nè¿™é‡Œç”¨çš„æ˜¯[happypack](https://github.com/amireh/happypack)å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ,é¦–å…ˆå®‰è£…happypackçš„ä¾èµ–.ç„¶åå†åœ¨webpack.base.jså¢åŠ é…ç½®ï¼Œè¾¾åˆ°devæˆ–è€…prodç¯å¢ƒéƒ½å¯ä»¥åŠ é€Ÿçš„æ•ˆæœã€‚\n\n\u003e å¼•å…¥å¿…è¦çš„ä¾èµ–\n\n```javascript\nconst HappyPack = require('happypack') // å¼•ç”¨happypack\nconst os = require('os'); // è·å–ç³»ç»Ÿé…ç½®\n// å¼€å¯çš„çº¿ç¨‹æ± é»˜è®¤ä¸º4ï¼Œè¿™é‡Œç›´æ¥å–çš„æ˜¯ç”µè„‘çš„cpuçº¿ç¨‹æ•°\nconst happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length }) \n```\nç„¶åç”¨happy-loaderä»£æ›¿babel-loaderï¼Œå¹¶ä¸”å¼€å¯babel-loaderçš„ç¼“å­˜ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œloaderåé¢çš„**id=happyPack**å¯¹åº”çš„pluginsé‡Œçš„idè¯†ï¼Œhappypackä¸ä»…å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…jsä¹Ÿå¯ä»¥æ‰“åŒ…cssã€‚\n\n```javascript\n// module.rules\n{\n    test: /\\.js$/,\n    // loader: 'babel-loader',  \n    loader: 'happypack/loader?id=happyPack',\n    include: [\n\t  resolve('src'),\n\t  resolve('test'),\n\t ],\n    exclude: /node_modules/\n},\n// plugins\nnew HappyPack({  \n  //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶  \n  id: 'happyPack',  \n  //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·  \n  loaders: [{  \n  loader: 'babel-loader',  \n  // here you configure babel:  \n  options: { babelrc: true, cacheDirectory: true }  \n }],  //å…±äº«è¿›ç¨‹æ±   \n  threadPool: happyThreadPool,  \n  //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—  \n  verbose: true,  \n}),\n```\n\n### DllPlugin å’Œ DllReferencePlugin\n\nDllplginæ’ä»¶çš„æ¦‚å¿µç±»ä¼¼äºCçš„åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨ï¼Œå°†æ›´æ–°æ¬¡æ•°å¾ˆå°‘æˆ–è€…å‡ ä¹ä¸æ›´æ–°çš„åŒ…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‹†åˆ†bundlesï¼Œæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œé€šè¿‡manifest.jsonç¡®å®šåŒ…çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼, å†ç”¨DllReferencePluginä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ã€‚\n\né¦–å…ˆæˆ‘ä»¬å…ˆä¿®æ”¹`/config/index.js`æ–°å¢æˆ‘ä»¬çš„dllé…ç½®æ–¹ä¾¿å¼•ç”¨ï¼Œå†åœ¨`/build`çš„ç›®å½•ä¸‹æ–°å¢`webpack.dll.conf.js`ç”¨æ¥æ‰“åŒ…dllã€‚\n\n\u003e /config/index.js\n\n```javascript\n// æ–°å¢é…ç½®\n...\ndll: {  \n  static: path.resolve(__dirname, '../static/lib'),  // dllå­˜æ”¾è·¯å¾„ ç›¸å¯¹äºé¡¹ç›®çš„static/lib\n  list: {  // å¤šä¸ªåŒ…åˆ—è¡¨ç”¨æ¥åŒºåˆ†\n\t  vendor: ['vue/dist/vue.common.js','vue-router', 'vuex'],  \n\t  'asset': ['superagent']  \n}\n```\n\n\u003e /build/webpack.dll.conf.js\n\n```javascript\nvar path = require('path')\n\nvar webpack = require('webpack')\nvar CleanWebpackPlugin = require('clean-webpack-plugin')\n\nvar config = require('../config')\nvar __root = path.resolve(__dirname, '../')\n\nmodule.exports = {\n    context: __root, // è¿™é‡Œé…ç½®çš„contextå°±æ˜¯åé¢dllçš„context\n    entry: config.dll.list,\n    output: {\n        path: config.dll.static,\n        filename: '[name]-[chunkhash:7].dll.js',\n        library: 'lib_[name]',\n        // *** è¿™é‡Œä¸è¦æ·»åŠ libraryTargetï¼Œå¦åˆ™webpackæ‰“åŒ…æ—¶ä¼šå‡ºé”™ã€‚\n        // ï¼ˆæç¤ºæ˜¯__WEBPACK__EXTERNAL__MODULE__xxxæœªå®šä¹‰ï¼‰ ***\n        // libraryTarget: 'umd'\n    },\n    resolve: {\n        modules: [path.resolve(__root, 'node_modules')],\n        extensions: ['.js', '.json'],\n        alias: {\n            'vue$': 'vue/dist/vue.esm.js'\n        }\n    },\n    // è¿™é‡Œæ²¡æœ‰å†™loadersï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œæ·»åŠ loaders\n    plugins: [\n        // *** è¿™é‡Œå¾ˆå…³é”® ***\n        new webpack.DllPlugin({ // å› ä¸ºä¸Šé¢å†™äº†contextï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æŒ‡å®šcontext\n            // è¿™é‡Œmanifestçš„åå­—å¿…é¡»è¦æœ‰å˜é‡ï¼Œå› ä¸ºç±»ä¼¼ä¸Šé¢çš„coreå’Œassetä¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªmanifestï¼Œ\n            // å¦‚æœåç§°ç›¸åŒï¼Œmanifestä¼šç”Ÿæˆä¸è§„èŒƒçš„jsonï¼Œåœ¨å¼•ç”¨æ—¶ä¼šæŠ¥é”™ã€‚\n            path: path.resolve(__root, 'static/manifest/[name].manifest.json'),\n            name: 'lib_[name]' // *** è¿™é‡Œçš„åå­—å¿…é¡»ä¸output.libraryä¸€è‡´ ***\n        }),\n        // è¿™ä¸ªæ˜¯ç”¨æ¥ç¨³å®šhashå€¼ï¼Œé˜²æ­¢å‡ºç°webpackçš„hashå‡ºç°è«åçš„å˜åŒ–\n        new webpack.HashedModuleIdsPlugin(),\n        new webpack.NamedChunksPlugin(),\n    ]\n}\n```\nç„¶ååœ¨`package.json`æ·»åŠ `\"build:dll\": \"webpack --config build/webpack.dll.conf.js\"`ç”¨æ¥ç”Ÿæˆdllï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•ã€‚\n\n![æ‰§è¡Œdllæ‰“åŒ…ç»“æœ](https://oss.yangger.cn/assets/blog/667E3894-9F16-4E11-BE28-D2E9B3E27DCF.png)\n\nåœ¨é¡¹ç›®çš„`static/lib`çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”çš„dll.js, è€Œä¸”åœ¨`static/manifest`ç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„manifest.jsonã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹åéœ€è¦å°†ä»–ä»¬ä¸€èµ·ä¸Šä¼ åˆ°git/svnç­‰æºç ä»“åº“ï¼Œå› ä¸ºå‡ ä¹ä¸éœ€è¦æ›´æ–°æˆ–è€…å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥åªéœ€è¦æ¯æ¬¡æ‰§è¡Œå®Œä¹‹åè®°å¾—ä¸Šä¼ åˆ°æºç ä»“åº“å³å¯ã€‚**å¦‚æœä¸æ‰‹åŠ¨ä¸Šä¼ ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨æ‰“åŒ…ä»£ç ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œä¸€æ¬¡`npm run build:dll`å‘½ä»¤**\n\næ‰“åŒ…å®Œdllä¹‹åï¼Œéœ€è¦ä¿®æ”¹`webpack.base.js`è®©æˆ‘ä»¬çš„åœ¨ç¼–è¯‘/æ‰“åŒ…çš„æ—¶å€™æ„Ÿå—æ„å»ºé€Ÿåº¦çš„æå‡ã€‚\n\n\u003e webpack.base.js\n\n```javascript\nconst HTMLWebpackIncludeAssetsPlugin = require('html-webpack-include-assets-plugin')  // æŠŠæˆ‘ä»¬çš„dllå¼•å…¥html\nconst CopyWebpackPlugin = require('copy-webpack-plugin') // å°†dllæ–‡ä»¶æ‹·è´åˆ°ä½ çš„distç›®å½•ä¸‹\nconst __root = path.resolve(__dirname, '../')\n// è·å–dllæ–‡ä»¶çš„manifest\nfunction getDllManifest() {\n    var plugins = []\n    Object.keys(config.dll.list).forEach((name) =\u003e {\n        plugins.push(\n            new webpack.DllReferencePlugin({\n                context: __root, // è¿™é‡Œçš„contextå¿…é¡»ä¸DllPluginä¸­çš„contextä¿æŒä¸€è‡´\n                manifest: path.resolve(__root, 'static/manifest/[name].manifest.json').replace(\n                    /\\[name\\]/gi, name)\n            })\n        )\n    })\n    return plugins\n}\n\n//plugins\n\nplugins: [\n\t//...\n\t...getDllManifest(),\n\tnew HTMLWebpackIncludeAssetsPlugin({\n\t    append: false,\n\t    publicPath: config.build.assetsPublicPath,\n\t    assets: [{\n\t        path: config.build.assetsSubDirectory,\n\t        glob: '**/*.js',\n\t        globPath: config.dll.static\n        }],\n\t}),\n]\n```\n\nè¿™æ ·DllPlugin å’Œ DllReferencePluginçš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†\n\n### å…¶ä»–æ„å»ºçš„å°ä¼˜åŒ–å’Œå‘\n\nä¹‹å‰æ„å»ºçš„æ—¶å€™ä¼šä¸€ç›´çœ‹åˆ°è¿™æ ·çš„é”™è¯¯: `# DefaultsError: 'warnings' is not a supported option`\næ˜¯å› ä¸ºUglifyJsPluginæ›´æ–°äº†ï¼Œé…ç½®æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯å¼•ç”¨å¤–éƒ¨çš„[uglifyjs-webpack-plugin]([https://github.com/webpack-contrib/uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin))æ’ä»¶ä»£æ›¿webpackè‡ªå¸¦çš„ã€‚\n\nä¿®æ”¹å¦‚ä¸‹:\n\n```javascript\n// new webpack.optimize.UglifyJsPlugin({  \n//   compress: {  \n//     warnings: false  \n//   },  \n//   sourceMap: true  \n// }),\nnew UglifyJsPlugin({  \n  cache: '.cache/',  \n  parallel: true,  \n}),  \n```\n\nç„¶ååœ¨devç¯å¢ƒä¸­æ–°å¢[BundleAnalyzerPlugin](https://github.com/webpack-contrib/webpack-bundle-analyzer)ç”¨æ¥æŸ¥çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆä¾èµ–æˆ–è€…å“ªä¸ªæ–‡ä»¶å¤ªå¤§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„åšä»£ç ä¼˜åŒ–\n\n### babe7å‡çº§\n\nå‡çº§åˆ°babel7éå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹[å®˜ç½‘å‡çº§æŒ‡å—](https://babeljs.io/docs/en/v7-migration)ã€‚\nå…¶å®ä¸»è¦æ›´æ–°æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n  1. è‡ªå¸¦æ”¯æŒTypeScriptçš„æ”¯æŒï¼Œts-loaderæˆ–è®¸å¯ä»¥ä¸ç”¨äº†?\n  2. [ç§»é™¤stage-*](https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets)\n  3. ä»¥ä¸‹é¢„è®¾éƒ½å½’å¹¶åˆ°\"@babel/preset-env\"äº†\n\t    -   `babel-preset-es2015`\n\t\t-   `babel-preset-es2016`\n\t\t-   `babel-preset-es2017`\n\t\t-   `babel-preset-latest`\n\t\t-  A combination of the above ^\n\t\næ‰€ä»¥è¿™é‡Œå±•ç¤ºä¸€ä¸‹å‡çº§å`.bablerc`ï¼Œä»…ä¾›å‚è€ƒ~\n\n\u003e .bablerc\n\n```json\n// {\n//   \"presets\": [\n//     [\"latest\", {\n//       \"es2015\": { \"modules\": false }\n//     }],\n//     \"stage-2\"\n//   ],\n//   \"plugins\": [\"transform-runtime\", \"transform-vue-jsx\"],\n//   \"comments\": false,\n//   \"env\": {\n//     \"test\": {\n//       \"presets\": [\"latest\", \"stage-2\"],\n//       \"plugins\": [ \"istanbul\" ]\n//     }\n//   }\n// }\n\n{  \n  \"presets\": [\"@babel/preset-env\", \"@babel/preset-typescript\", \"@vue/babel-preset-jsx\"],  \n  \"plugins\": [\"@babel/plugin-transform-runtime\", \"@babel/plugin-external-helpers\"]  \n}\n```\n\n## æµ‹è¯•\n\nåˆ°è¿™é‡Œå…¬å¸çš„å…ƒè€çº§é¡¹ç›®åŸºæœ¬å·²ç»ä¼˜åŒ–å®Œæ¯•äº†ï¼Œåœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨æµ‹è¯•ä¸€ä¸‹æ‰“åŒ…é€Ÿåº¦çš„åŒºåˆ«è¯•è¯•.\n\n### mac 6æ ¸12çº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/FF249298-12D6-439E-A149-1A51EDF30C55.png)\n\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/590E0034-4D68-4BE7-AEDA-7F0FFA4BB58E.png)\n\n### centos å•æ ¸åŒçº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/A535621B-69CB-4478-8C30-B547F4C33601.png)\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/71D1F9DB-E95E-4FE3-A5D3-85AAE3C7F342.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæå‡é€Ÿåº¦çº¦ç­‰äº3/5ï¼Œç›¸å¯¹äºæ¯æ¬¡æäº¤CI/CDèµ°ä¸‹æ¥6-7åˆ†é’Ÿè¿˜æ˜¯æœ‰å¾ˆå¤§æå‡çš„ï¼Œèµ·ç æ³¡â˜•ï¸å˜æˆæ³¡é€Ÿæº¶â˜•ï¸äº†hhhhã€‚\n\n## æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œåœ¨è¿™äº›æ–¹æ³•çš„æ¨åŠ¨ä¸‹çš„æ„å»ºé€Ÿåº¦ä¼˜åŒ–è¿˜æ˜¯æœ‰ç€è‚‰çœ¼å¯è§çš„æå‡é€Ÿåº¦çš„ï¼Œè¿™é‡ŒåŸºäºwebpack2.xçš„æå‡æ–¹æ¡ˆçš„æ•ˆæœå› é¡¹ç›®è€Œå¼‚ï¼Œå¯èƒ½æ•ˆæœå¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½**æ²¡æœ‰æ•ˆæœ**ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€äº›æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä¸è¶³å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï½","publishedAt":"0201-03-11T20:24:17.000Z","status":"published","slug":"webpack2-6-ts","author":3,"articletype":null,"created_at":"2021-07-29T07:13:40.603Z","updated_at":"2021-07-29T09:00:21.859Z","top":null,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}}]},{"id":7,"name":"WEBPACK","slug":"webpack","created_at":"2021-07-29T07:08:08.636Z","updated_at":"2021-07-29T07:08:08.642Z","articles":[{"id":3,"title":"webpack2.xæ„å»ºé€Ÿåº¦ä¼˜åŒ–","description":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚","content":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n\n## æ–¹æ¡ˆ\n\nè¿™é‡Œå› ä¸ºbabelå·²ç»å‡çº§åˆ°7äº†æ‰€ä»¥ï¼Œæƒ³ç”¨happyPack + DllPlugin + babel7æ¥è¯•è¯•çœ‹èƒ½æå‡å¤šå°‘é€Ÿåº¦ã€‚\næ€»ä½“æ¥è¯´ä¿®æ”¹äº†ä¸€äº›webpackçš„é…ç½®å’Œbabelçš„é…ç½®ï¼Œå»æ‰äº†ä¸€äº›æ— ç”¨çš„ä¾èµ–ï¼Œpackage.jsoné‡Œé¢browserlistå˜æˆäº† brow**s**erlistï¼Œæ›´æ¢äº†ä¸€äº›webpackçš„æ’ä»¶ï¼Œä¸»è¦æœ‰ä¸‹ï¼š\n\n\u003e  ç§»é™¤çš„ä¾èµ–\n\n```json\n{\n\t\"babel-core\": \"^6.26.3\",\n\t    \"babel-plugin-syntax-jsx\": \"^6.18.0\",  \n  \"babel-plugin-transform-runtime\": \"^6.22.0\",\n  \"babel-preset-latest\": \"^6.22.0\",  \n\"babel-preset-stage-2\": \"^6.22.0\",  \n\"babel-register\": \"^6.26.0\",  \n\"babel-runtime\": \"^6.23.0\",\n}\n```\n\n\u003e æ›´æ–°æˆ–æ–°å¢çš„ä¾èµ–\n\n```json\n\"@babel/polyfill\": \"^7.6.0\",  \n\"@babel/runtime\": \"^7.6.3\",\n\"@babel/core\": \"^7.0.0\",  \n\"@babel/plugin-external-helpers\": \"^7.2.0\",  \n\"@babel/plugin-proposal-class-properties\": \"^7.0.0\",  \n\"@babel/plugin-proposal-decorators\": \"^7.0.0\",  \n\"@babel/plugin-proposal-export-namespace-from\": \"^7.0.0\",  \n\"@babel/plugin-proposal-function-sent\": \"^7.0.0\",  \n\"@babel/plugin-proposal-json-strings\": \"^7.0.0\",  \n\"@babel/plugin-proposal-numeric-separator\": \"^7.0.0\",  \n\"@babel/plugin-proposal-throw-expressions\": \"^7.0.0\",  \n\"@babel/plugin-syntax-dynamic-import\": \"^7.0.0\",  \n\"@babel/plugin-syntax-import-meta\": \"^7.0.0\",  \n\"@babel/plugin-syntax-jsx\": \"^7.0.0\",  \n\"@babel/plugin-transform-runtime\": \"^7.6.2\",  \n\"@babel/preset-env\": \"^7.0.0\",  \n\"@babel/preset-es2015\": \"^7.0.0-beta.53\",  \n\"@babel/preset-typescript\": \"^7.6.0\",  \n\"@babel/register\": \"^7.0.0\",  \n\"@babel/runtime-corejs2\": \"^7.0.0\",\n\"@vue/babel-plugin-transform-vue-jsx\": \"^1.0.0\",\n\"babel-loader\": \"^8.0.0\",\n\"clean-webpack-plugin\": \"^3.0.0\",\n\"happypack\": \"^5.0.1\",  \n\"html-webpack-include-assets-plugin\": \"^2.0.0\",\n\"uglifyjs-webpack-plugin\": \"^1.3.0\",\n\"webpack-bundle-analyzer\": \"^2.13.1\",\n\"webpack-merge\": \"^2.6.1\",  \n\"webpack-parallel-uglify-plugin\": \"^1.1.2\"\n```\n\n## å¼€å·¥\n\n### happypack\n\nè¿™é‡Œç”¨çš„æ˜¯[happypack](https://github.com/amireh/happypack)å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ,é¦–å…ˆå®‰è£…happypackçš„ä¾èµ–.ç„¶åå†åœ¨webpack.base.jså¢åŠ é…ç½®ï¼Œè¾¾åˆ°devæˆ–è€…prodç¯å¢ƒéƒ½å¯ä»¥åŠ é€Ÿçš„æ•ˆæœã€‚\n\n\u003e å¼•å…¥å¿…è¦çš„ä¾èµ–\n\n```javascript\nconst HappyPack = require('happypack') // å¼•ç”¨happypack\nconst os = require('os'); // è·å–ç³»ç»Ÿé…ç½®\n// å¼€å¯çš„çº¿ç¨‹æ± é»˜è®¤ä¸º4ï¼Œè¿™é‡Œç›´æ¥å–çš„æ˜¯ç”µè„‘çš„cpuçº¿ç¨‹æ•°\nconst happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length }) \n```\nç„¶åç”¨happy-loaderä»£æ›¿babel-loaderï¼Œå¹¶ä¸”å¼€å¯babel-loaderçš„ç¼“å­˜ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œloaderåé¢çš„**id=happyPack**å¯¹åº”çš„pluginsé‡Œçš„idè¯†ï¼Œhappypackä¸ä»…å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…jsä¹Ÿå¯ä»¥æ‰“åŒ…cssã€‚\n\n```javascript\n// module.rules\n{\n    test: /\\.js$/,\n    // loader: 'babel-loader',  \n    loader: 'happypack/loader?id=happyPack',\n    include: [\n\t  resolve('src'),\n\t  resolve('test'),\n\t ],\n    exclude: /node_modules/\n},\n// plugins\nnew HappyPack({  \n  //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶  \n  id: 'happyPack',  \n  //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·  \n  loaders: [{  \n  loader: 'babel-loader',  \n  // here you configure babel:  \n  options: { babelrc: true, cacheDirectory: true }  \n }],  //å…±äº«è¿›ç¨‹æ±   \n  threadPool: happyThreadPool,  \n  //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—  \n  verbose: true,  \n}),\n```\n\n### DllPlugin å’Œ DllReferencePlugin\n\nDllplginæ’ä»¶çš„æ¦‚å¿µç±»ä¼¼äºCçš„åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨ï¼Œå°†æ›´æ–°æ¬¡æ•°å¾ˆå°‘æˆ–è€…å‡ ä¹ä¸æ›´æ–°çš„åŒ…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‹†åˆ†bundlesï¼Œæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œé€šè¿‡manifest.jsonç¡®å®šåŒ…çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼, å†ç”¨DllReferencePluginä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ã€‚\n\né¦–å…ˆæˆ‘ä»¬å…ˆä¿®æ”¹`/config/index.js`æ–°å¢æˆ‘ä»¬çš„dllé…ç½®æ–¹ä¾¿å¼•ç”¨ï¼Œå†åœ¨`/build`çš„ç›®å½•ä¸‹æ–°å¢`webpack.dll.conf.js`ç”¨æ¥æ‰“åŒ…dllã€‚\n\n\u003e /config/index.js\n\n```javascript\n// æ–°å¢é…ç½®\n...\ndll: {  \n  static: path.resolve(__dirname, '../static/lib'),  // dllå­˜æ”¾è·¯å¾„ ç›¸å¯¹äºé¡¹ç›®çš„static/lib\n  list: {  // å¤šä¸ªåŒ…åˆ—è¡¨ç”¨æ¥åŒºåˆ†\n\t  vendor: ['vue/dist/vue.common.js','vue-router', 'vuex'],  \n\t  'asset': ['superagent']  \n}\n```\n\n\u003e /build/webpack.dll.conf.js\n\n```javascript\nvar path = require('path')\n\nvar webpack = require('webpack')\nvar CleanWebpackPlugin = require('clean-webpack-plugin')\n\nvar config = require('../config')\nvar __root = path.resolve(__dirname, '../')\n\nmodule.exports = {\n    context: __root, // è¿™é‡Œé…ç½®çš„contextå°±æ˜¯åé¢dllçš„context\n    entry: config.dll.list,\n    output: {\n        path: config.dll.static,\n        filename: '[name]-[chunkhash:7].dll.js',\n        library: 'lib_[name]',\n        // *** è¿™é‡Œä¸è¦æ·»åŠ libraryTargetï¼Œå¦åˆ™webpackæ‰“åŒ…æ—¶ä¼šå‡ºé”™ã€‚\n        // ï¼ˆæç¤ºæ˜¯__WEBPACK__EXTERNAL__MODULE__xxxæœªå®šä¹‰ï¼‰ ***\n        // libraryTarget: 'umd'\n    },\n    resolve: {\n        modules: [path.resolve(__root, 'node_modules')],\n        extensions: ['.js', '.json'],\n        alias: {\n            'vue$': 'vue/dist/vue.esm.js'\n        }\n    },\n    // è¿™é‡Œæ²¡æœ‰å†™loadersï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œæ·»åŠ loaders\n    plugins: [\n        // *** è¿™é‡Œå¾ˆå…³é”® ***\n        new webpack.DllPlugin({ // å› ä¸ºä¸Šé¢å†™äº†contextï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æŒ‡å®šcontext\n            // è¿™é‡Œmanifestçš„åå­—å¿…é¡»è¦æœ‰å˜é‡ï¼Œå› ä¸ºç±»ä¼¼ä¸Šé¢çš„coreå’Œassetä¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªmanifestï¼Œ\n            // å¦‚æœåç§°ç›¸åŒï¼Œmanifestä¼šç”Ÿæˆä¸è§„èŒƒçš„jsonï¼Œåœ¨å¼•ç”¨æ—¶ä¼šæŠ¥é”™ã€‚\n            path: path.resolve(__root, 'static/manifest/[name].manifest.json'),\n            name: 'lib_[name]' // *** è¿™é‡Œçš„åå­—å¿…é¡»ä¸output.libraryä¸€è‡´ ***\n        }),\n        // è¿™ä¸ªæ˜¯ç”¨æ¥ç¨³å®šhashå€¼ï¼Œé˜²æ­¢å‡ºç°webpackçš„hashå‡ºç°è«åçš„å˜åŒ–\n        new webpack.HashedModuleIdsPlugin(),\n        new webpack.NamedChunksPlugin(),\n    ]\n}\n```\nç„¶ååœ¨`package.json`æ·»åŠ `\"build:dll\": \"webpack --config build/webpack.dll.conf.js\"`ç”¨æ¥ç”Ÿæˆdllï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•ã€‚\n\n![æ‰§è¡Œdllæ‰“åŒ…ç»“æœ](https://oss.yangger.cn/assets/blog/667E3894-9F16-4E11-BE28-D2E9B3E27DCF.png)\n\nåœ¨é¡¹ç›®çš„`static/lib`çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”çš„dll.js, è€Œä¸”åœ¨`static/manifest`ç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„manifest.jsonã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹åéœ€è¦å°†ä»–ä»¬ä¸€èµ·ä¸Šä¼ åˆ°git/svnç­‰æºç ä»“åº“ï¼Œå› ä¸ºå‡ ä¹ä¸éœ€è¦æ›´æ–°æˆ–è€…å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥åªéœ€è¦æ¯æ¬¡æ‰§è¡Œå®Œä¹‹åè®°å¾—ä¸Šä¼ åˆ°æºç ä»“åº“å³å¯ã€‚**å¦‚æœä¸æ‰‹åŠ¨ä¸Šä¼ ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨æ‰“åŒ…ä»£ç ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œä¸€æ¬¡`npm run build:dll`å‘½ä»¤**\n\næ‰“åŒ…å®Œdllä¹‹åï¼Œéœ€è¦ä¿®æ”¹`webpack.base.js`è®©æˆ‘ä»¬çš„åœ¨ç¼–è¯‘/æ‰“åŒ…çš„æ—¶å€™æ„Ÿå—æ„å»ºé€Ÿåº¦çš„æå‡ã€‚\n\n\u003e webpack.base.js\n\n```javascript\nconst HTMLWebpackIncludeAssetsPlugin = require('html-webpack-include-assets-plugin')  // æŠŠæˆ‘ä»¬çš„dllå¼•å…¥html\nconst CopyWebpackPlugin = require('copy-webpack-plugin') // å°†dllæ–‡ä»¶æ‹·è´åˆ°ä½ çš„distç›®å½•ä¸‹\nconst __root = path.resolve(__dirname, '../')\n// è·å–dllæ–‡ä»¶çš„manifest\nfunction getDllManifest() {\n    var plugins = []\n    Object.keys(config.dll.list).forEach((name) =\u003e {\n        plugins.push(\n            new webpack.DllReferencePlugin({\n                context: __root, // è¿™é‡Œçš„contextå¿…é¡»ä¸DllPluginä¸­çš„contextä¿æŒä¸€è‡´\n                manifest: path.resolve(__root, 'static/manifest/[name].manifest.json').replace(\n                    /\\[name\\]/gi, name)\n            })\n        )\n    })\n    return plugins\n}\n\n//plugins\n\nplugins: [\n\t//...\n\t...getDllManifest(),\n\tnew HTMLWebpackIncludeAssetsPlugin({\n\t    append: false,\n\t    publicPath: config.build.assetsPublicPath,\n\t    assets: [{\n\t        path: config.build.assetsSubDirectory,\n\t        glob: '**/*.js',\n\t        globPath: config.dll.static\n        }],\n\t}),\n]\n```\n\nè¿™æ ·DllPlugin å’Œ DllReferencePluginçš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†\n\n### å…¶ä»–æ„å»ºçš„å°ä¼˜åŒ–å’Œå‘\n\nä¹‹å‰æ„å»ºçš„æ—¶å€™ä¼šä¸€ç›´çœ‹åˆ°è¿™æ ·çš„é”™è¯¯: `# DefaultsError: 'warnings' is not a supported option`\næ˜¯å› ä¸ºUglifyJsPluginæ›´æ–°äº†ï¼Œé…ç½®æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯å¼•ç”¨å¤–éƒ¨çš„[uglifyjs-webpack-plugin]([https://github.com/webpack-contrib/uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin))æ’ä»¶ä»£æ›¿webpackè‡ªå¸¦çš„ã€‚\n\nä¿®æ”¹å¦‚ä¸‹:\n\n```javascript\n// new webpack.optimize.UglifyJsPlugin({  \n//   compress: {  \n//     warnings: false  \n//   },  \n//   sourceMap: true  \n// }),\nnew UglifyJsPlugin({  \n  cache: '.cache/',  \n  parallel: true,  \n}),  \n```\n\nç„¶ååœ¨devç¯å¢ƒä¸­æ–°å¢[BundleAnalyzerPlugin](https://github.com/webpack-contrib/webpack-bundle-analyzer)ç”¨æ¥æŸ¥çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆä¾èµ–æˆ–è€…å“ªä¸ªæ–‡ä»¶å¤ªå¤§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„åšä»£ç ä¼˜åŒ–\n\n### babe7å‡çº§\n\nå‡çº§åˆ°babel7éå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹[å®˜ç½‘å‡çº§æŒ‡å—](https://babeljs.io/docs/en/v7-migration)ã€‚\nå…¶å®ä¸»è¦æ›´æ–°æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n  1. è‡ªå¸¦æ”¯æŒTypeScriptçš„æ”¯æŒï¼Œts-loaderæˆ–è®¸å¯ä»¥ä¸ç”¨äº†?\n  2. [ç§»é™¤stage-*](https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets)\n  3. ä»¥ä¸‹é¢„è®¾éƒ½å½’å¹¶åˆ°\"@babel/preset-env\"äº†\n\t    -   `babel-preset-es2015`\n\t\t-   `babel-preset-es2016`\n\t\t-   `babel-preset-es2017`\n\t\t-   `babel-preset-latest`\n\t\t-  A combination of the above ^\n\t\næ‰€ä»¥è¿™é‡Œå±•ç¤ºä¸€ä¸‹å‡çº§å`.bablerc`ï¼Œä»…ä¾›å‚è€ƒ~\n\n\u003e .bablerc\n\n```json\n// {\n//   \"presets\": [\n//     [\"latest\", {\n//       \"es2015\": { \"modules\": false }\n//     }],\n//     \"stage-2\"\n//   ],\n//   \"plugins\": [\"transform-runtime\", \"transform-vue-jsx\"],\n//   \"comments\": false,\n//   \"env\": {\n//     \"test\": {\n//       \"presets\": [\"latest\", \"stage-2\"],\n//       \"plugins\": [ \"istanbul\" ]\n//     }\n//   }\n// }\n\n{  \n  \"presets\": [\"@babel/preset-env\", \"@babel/preset-typescript\", \"@vue/babel-preset-jsx\"],  \n  \"plugins\": [\"@babel/plugin-transform-runtime\", \"@babel/plugin-external-helpers\"]  \n}\n```\n\n## æµ‹è¯•\n\nåˆ°è¿™é‡Œå…¬å¸çš„å…ƒè€çº§é¡¹ç›®åŸºæœ¬å·²ç»ä¼˜åŒ–å®Œæ¯•äº†ï¼Œåœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨æµ‹è¯•ä¸€ä¸‹æ‰“åŒ…é€Ÿåº¦çš„åŒºåˆ«è¯•è¯•.\n\n### mac 6æ ¸12çº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/FF249298-12D6-439E-A149-1A51EDF30C55.png)\n\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/590E0034-4D68-4BE7-AEDA-7F0FFA4BB58E.png)\n\n### centos å•æ ¸åŒçº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/A535621B-69CB-4478-8C30-B547F4C33601.png)\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/71D1F9DB-E95E-4FE3-A5D3-85AAE3C7F342.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæå‡é€Ÿåº¦çº¦ç­‰äº3/5ï¼Œç›¸å¯¹äºæ¯æ¬¡æäº¤CI/CDèµ°ä¸‹æ¥6-7åˆ†é’Ÿè¿˜æ˜¯æœ‰å¾ˆå¤§æå‡çš„ï¼Œèµ·ç æ³¡â˜•ï¸å˜æˆæ³¡é€Ÿæº¶â˜•ï¸äº†hhhhã€‚\n\n## æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œåœ¨è¿™äº›æ–¹æ³•çš„æ¨åŠ¨ä¸‹çš„æ„å»ºé€Ÿåº¦ä¼˜åŒ–è¿˜æ˜¯æœ‰ç€è‚‰çœ¼å¯è§çš„æå‡é€Ÿåº¦çš„ï¼Œè¿™é‡ŒåŸºäºwebpack2.xçš„æå‡æ–¹æ¡ˆçš„æ•ˆæœå› é¡¹ç›®è€Œå¼‚ï¼Œå¯èƒ½æ•ˆæœå¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½**æ²¡æœ‰æ•ˆæœ**ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€äº›æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä¸è¶³å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï½","publishedAt":"2019-03-11T19:00:00.000Z","status":"published","slug":"webpack2-x","author":null,"articletype":null,"created_at":"2021-07-29T07:09:49.741Z","updated_at":"2021-07-29T09:00:31.546Z","top":null,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}},{"id":4,"title":"webpack2.6å‡çº§tsæ”¯æŒ","description":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n","content":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n\n## æ–¹æ¡ˆ\n\nè¿™é‡Œå› ä¸ºbabelå·²ç»å‡çº§åˆ°7äº†æ‰€ä»¥ï¼Œæƒ³ç”¨happyPack + DllPlugin + babel7æ¥è¯•è¯•çœ‹èƒ½æå‡å¤šå°‘é€Ÿåº¦ã€‚\næ€»ä½“æ¥è¯´ä¿®æ”¹äº†ä¸€äº›webpackçš„é…ç½®å’Œbabelçš„é…ç½®ï¼Œå»æ‰äº†ä¸€äº›æ— ç”¨çš„ä¾èµ–ï¼Œpackage.jsoné‡Œé¢browserlistå˜æˆäº† brow**s**erlistï¼Œæ›´æ¢äº†ä¸€äº›webpackçš„æ’ä»¶ï¼Œä¸»è¦æœ‰ä¸‹ï¼š\n\n\u003e  ç§»é™¤çš„ä¾èµ–\n\n```json\n{\n\t\"babel-core\": \"^6.26.3\",\n\t    \"babel-plugin-syntax-jsx\": \"^6.18.0\",  \n  \"babel-plugin-transform-runtime\": \"^6.22.0\",\n  \"babel-preset-latest\": \"^6.22.0\",  \n\"babel-preset-stage-2\": \"^6.22.0\",  \n\"babel-register\": \"^6.26.0\",  \n\"babel-runtime\": \"^6.23.0\",\n}\n```\n\n\u003e æ›´æ–°æˆ–æ–°å¢çš„ä¾èµ–\n\n```json\n\"@babel/polyfill\": \"^7.6.0\",  \n\"@babel/runtime\": \"^7.6.3\",\n\"@babel/core\": \"^7.0.0\",  \n\"@babel/plugin-external-helpers\": \"^7.2.0\",  \n\"@babel/plugin-proposal-class-properties\": \"^7.0.0\",  \n\"@babel/plugin-proposal-decorators\": \"^7.0.0\",  \n\"@babel/plugin-proposal-export-namespace-from\": \"^7.0.0\",  \n\"@babel/plugin-proposal-function-sent\": \"^7.0.0\",  \n\"@babel/plugin-proposal-json-strings\": \"^7.0.0\",  \n\"@babel/plugin-proposal-numeric-separator\": \"^7.0.0\",  \n\"@babel/plugin-proposal-throw-expressions\": \"^7.0.0\",  \n\"@babel/plugin-syntax-dynamic-import\": \"^7.0.0\",  \n\"@babel/plugin-syntax-import-meta\": \"^7.0.0\",  \n\"@babel/plugin-syntax-jsx\": \"^7.0.0\",  \n\"@babel/plugin-transform-runtime\": \"^7.6.2\",  \n\"@babel/preset-env\": \"^7.0.0\",  \n\"@babel/preset-es2015\": \"^7.0.0-beta.53\",  \n\"@babel/preset-typescript\": \"^7.6.0\",  \n\"@babel/register\": \"^7.0.0\",  \n\"@babel/runtime-corejs2\": \"^7.0.0\",\n\"@vue/babel-plugin-transform-vue-jsx\": \"^1.0.0\",\n\"babel-loader\": \"^8.0.0\",\n\"clean-webpack-plugin\": \"^3.0.0\",\n\"happypack\": \"^5.0.1\",  \n\"html-webpack-include-assets-plugin\": \"^2.0.0\",\n\"uglifyjs-webpack-plugin\": \"^1.3.0\",\n\"webpack-bundle-analyzer\": \"^2.13.1\",\n\"webpack-merge\": \"^2.6.1\",  \n\"webpack-parallel-uglify-plugin\": \"^1.1.2\"\n```\n\n## å¼€å·¥\n\n### happypack\n\nè¿™é‡Œç”¨çš„æ˜¯[happypack](https://github.com/amireh/happypack)å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ,é¦–å…ˆå®‰è£…happypackçš„ä¾èµ–.ç„¶åå†åœ¨webpack.base.jså¢åŠ é…ç½®ï¼Œè¾¾åˆ°devæˆ–è€…prodç¯å¢ƒéƒ½å¯ä»¥åŠ é€Ÿçš„æ•ˆæœã€‚\n\n\u003e å¼•å…¥å¿…è¦çš„ä¾èµ–\n\n```javascript\nconst HappyPack = require('happypack') // å¼•ç”¨happypack\nconst os = require('os'); // è·å–ç³»ç»Ÿé…ç½®\n// å¼€å¯çš„çº¿ç¨‹æ± é»˜è®¤ä¸º4ï¼Œè¿™é‡Œç›´æ¥å–çš„æ˜¯ç”µè„‘çš„cpuçº¿ç¨‹æ•°\nconst happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length }) \n```\nç„¶åç”¨happy-loaderä»£æ›¿babel-loaderï¼Œå¹¶ä¸”å¼€å¯babel-loaderçš„ç¼“å­˜ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œloaderåé¢çš„**id=happyPack**å¯¹åº”çš„pluginsé‡Œçš„idè¯†ï¼Œhappypackä¸ä»…å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…jsä¹Ÿå¯ä»¥æ‰“åŒ…cssã€‚\n\n```javascript\n// module.rules\n{\n    test: /\\.js$/,\n    // loader: 'babel-loader',  \n    loader: 'happypack/loader?id=happyPack',\n    include: [\n\t  resolve('src'),\n\t  resolve('test'),\n\t ],\n    exclude: /node_modules/\n},\n// plugins\nnew HappyPack({  \n  //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶  \n  id: 'happyPack',  \n  //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·  \n  loaders: [{  \n  loader: 'babel-loader',  \n  // here you configure babel:  \n  options: { babelrc: true, cacheDirectory: true }  \n }],  //å…±äº«è¿›ç¨‹æ±   \n  threadPool: happyThreadPool,  \n  //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—  \n  verbose: true,  \n}),\n```\n\n### DllPlugin å’Œ DllReferencePlugin\n\nDllplginæ’ä»¶çš„æ¦‚å¿µç±»ä¼¼äºCçš„åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨ï¼Œå°†æ›´æ–°æ¬¡æ•°å¾ˆå°‘æˆ–è€…å‡ ä¹ä¸æ›´æ–°çš„åŒ…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‹†åˆ†bundlesï¼Œæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œé€šè¿‡manifest.jsonç¡®å®šåŒ…çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼, å†ç”¨DllReferencePluginä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ã€‚\n\né¦–å…ˆæˆ‘ä»¬å…ˆä¿®æ”¹`/config/index.js`æ–°å¢æˆ‘ä»¬çš„dllé…ç½®æ–¹ä¾¿å¼•ç”¨ï¼Œå†åœ¨`/build`çš„ç›®å½•ä¸‹æ–°å¢`webpack.dll.conf.js`ç”¨æ¥æ‰“åŒ…dllã€‚\n\n\u003e /config/index.js\n\n```javascript\n// æ–°å¢é…ç½®\n...\ndll: {  \n  static: path.resolve(__dirname, '../static/lib'),  // dllå­˜æ”¾è·¯å¾„ ç›¸å¯¹äºé¡¹ç›®çš„static/lib\n  list: {  // å¤šä¸ªåŒ…åˆ—è¡¨ç”¨æ¥åŒºåˆ†\n\t  vendor: ['vue/dist/vue.common.js','vue-router', 'vuex'],  \n\t  'asset': ['superagent']  \n}\n```\n\n\u003e /build/webpack.dll.conf.js\n\n```javascript\nvar path = require('path')\n\nvar webpack = require('webpack')\nvar CleanWebpackPlugin = require('clean-webpack-plugin')\n\nvar config = require('../config')\nvar __root = path.resolve(__dirname, '../')\n\nmodule.exports = {\n    context: __root, // è¿™é‡Œé…ç½®çš„contextå°±æ˜¯åé¢dllçš„context\n    entry: config.dll.list,\n    output: {\n        path: config.dll.static,\n        filename: '[name]-[chunkhash:7].dll.js',\n        library: 'lib_[name]',\n        // *** è¿™é‡Œä¸è¦æ·»åŠ libraryTargetï¼Œå¦åˆ™webpackæ‰“åŒ…æ—¶ä¼šå‡ºé”™ã€‚\n        // ï¼ˆæç¤ºæ˜¯__WEBPACK__EXTERNAL__MODULE__xxxæœªå®šä¹‰ï¼‰ ***\n        // libraryTarget: 'umd'\n    },\n    resolve: {\n        modules: [path.resolve(__root, 'node_modules')],\n        extensions: ['.js', '.json'],\n        alias: {\n            'vue$': 'vue/dist/vue.esm.js'\n        }\n    },\n    // è¿™é‡Œæ²¡æœ‰å†™loadersï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œæ·»åŠ loaders\n    plugins: [\n        // *** è¿™é‡Œå¾ˆå…³é”® ***\n        new webpack.DllPlugin({ // å› ä¸ºä¸Šé¢å†™äº†contextï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æŒ‡å®šcontext\n            // è¿™é‡Œmanifestçš„åå­—å¿…é¡»è¦æœ‰å˜é‡ï¼Œå› ä¸ºç±»ä¼¼ä¸Šé¢çš„coreå’Œassetä¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªmanifestï¼Œ\n            // å¦‚æœåç§°ç›¸åŒï¼Œmanifestä¼šç”Ÿæˆä¸è§„èŒƒçš„jsonï¼Œåœ¨å¼•ç”¨æ—¶ä¼šæŠ¥é”™ã€‚\n            path: path.resolve(__root, 'static/manifest/[name].manifest.json'),\n            name: 'lib_[name]' // *** è¿™é‡Œçš„åå­—å¿…é¡»ä¸output.libraryä¸€è‡´ ***\n        }),\n        // è¿™ä¸ªæ˜¯ç”¨æ¥ç¨³å®šhashå€¼ï¼Œé˜²æ­¢å‡ºç°webpackçš„hashå‡ºç°è«åçš„å˜åŒ–\n        new webpack.HashedModuleIdsPlugin(),\n        new webpack.NamedChunksPlugin(),\n    ]\n}\n```\nç„¶ååœ¨`package.json`æ·»åŠ `\"build:dll\": \"webpack --config build/webpack.dll.conf.js\"`ç”¨æ¥ç”Ÿæˆdllï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•ã€‚\n\n![æ‰§è¡Œdllæ‰“åŒ…ç»“æœ](https://oss.yangger.cn/assets/blog/667E3894-9F16-4E11-BE28-D2E9B3E27DCF.png)\n\nåœ¨é¡¹ç›®çš„`static/lib`çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”çš„dll.js, è€Œä¸”åœ¨`static/manifest`ç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„manifest.jsonã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹åéœ€è¦å°†ä»–ä»¬ä¸€èµ·ä¸Šä¼ åˆ°git/svnç­‰æºç ä»“åº“ï¼Œå› ä¸ºå‡ ä¹ä¸éœ€è¦æ›´æ–°æˆ–è€…å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥åªéœ€è¦æ¯æ¬¡æ‰§è¡Œå®Œä¹‹åè®°å¾—ä¸Šä¼ åˆ°æºç ä»“åº“å³å¯ã€‚**å¦‚æœä¸æ‰‹åŠ¨ä¸Šä¼ ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨æ‰“åŒ…ä»£ç ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œä¸€æ¬¡`npm run build:dll`å‘½ä»¤**\n\næ‰“åŒ…å®Œdllä¹‹åï¼Œéœ€è¦ä¿®æ”¹`webpack.base.js`è®©æˆ‘ä»¬çš„åœ¨ç¼–è¯‘/æ‰“åŒ…çš„æ—¶å€™æ„Ÿå—æ„å»ºé€Ÿåº¦çš„æå‡ã€‚\n\n\u003e webpack.base.js\n\n```javascript\nconst HTMLWebpackIncludeAssetsPlugin = require('html-webpack-include-assets-plugin')  // æŠŠæˆ‘ä»¬çš„dllå¼•å…¥html\nconst CopyWebpackPlugin = require('copy-webpack-plugin') // å°†dllæ–‡ä»¶æ‹·è´åˆ°ä½ çš„distç›®å½•ä¸‹\nconst __root = path.resolve(__dirname, '../')\n// è·å–dllæ–‡ä»¶çš„manifest\nfunction getDllManifest() {\n    var plugins = []\n    Object.keys(config.dll.list).forEach((name) =\u003e {\n        plugins.push(\n            new webpack.DllReferencePlugin({\n                context: __root, // è¿™é‡Œçš„contextå¿…é¡»ä¸DllPluginä¸­çš„contextä¿æŒä¸€è‡´\n                manifest: path.resolve(__root, 'static/manifest/[name].manifest.json').replace(\n                    /\\[name\\]/gi, name)\n            })\n        )\n    })\n    return plugins\n}\n\n//plugins\n\nplugins: [\n\t//...\n\t...getDllManifest(),\n\tnew HTMLWebpackIncludeAssetsPlugin({\n\t    append: false,\n\t    publicPath: config.build.assetsPublicPath,\n\t    assets: [{\n\t        path: config.build.assetsSubDirectory,\n\t        glob: '**/*.js',\n\t        globPath: config.dll.static\n        }],\n\t}),\n]\n```\n\nè¿™æ ·DllPlugin å’Œ DllReferencePluginçš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†\n\n### å…¶ä»–æ„å»ºçš„å°ä¼˜åŒ–å’Œå‘\n\nä¹‹å‰æ„å»ºçš„æ—¶å€™ä¼šä¸€ç›´çœ‹åˆ°è¿™æ ·çš„é”™è¯¯: `# DefaultsError: 'warnings' is not a supported option`\næ˜¯å› ä¸ºUglifyJsPluginæ›´æ–°äº†ï¼Œé…ç½®æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯å¼•ç”¨å¤–éƒ¨çš„[uglifyjs-webpack-plugin]([https://github.com/webpack-contrib/uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin))æ’ä»¶ä»£æ›¿webpackè‡ªå¸¦çš„ã€‚\n\nä¿®æ”¹å¦‚ä¸‹:\n\n```javascript\n// new webpack.optimize.UglifyJsPlugin({  \n//   compress: {  \n//     warnings: false  \n//   },  \n//   sourceMap: true  \n// }),\nnew UglifyJsPlugin({  \n  cache: '.cache/',  \n  parallel: true,  \n}),  \n```\n\nç„¶ååœ¨devç¯å¢ƒä¸­æ–°å¢[BundleAnalyzerPlugin](https://github.com/webpack-contrib/webpack-bundle-analyzer)ç”¨æ¥æŸ¥çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆä¾èµ–æˆ–è€…å“ªä¸ªæ–‡ä»¶å¤ªå¤§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„åšä»£ç ä¼˜åŒ–\n\n### babe7å‡çº§\n\nå‡çº§åˆ°babel7éå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹[å®˜ç½‘å‡çº§æŒ‡å—](https://babeljs.io/docs/en/v7-migration)ã€‚\nå…¶å®ä¸»è¦æ›´æ–°æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n  1. è‡ªå¸¦æ”¯æŒTypeScriptçš„æ”¯æŒï¼Œts-loaderæˆ–è®¸å¯ä»¥ä¸ç”¨äº†?\n  2. [ç§»é™¤stage-*](https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets)\n  3. ä»¥ä¸‹é¢„è®¾éƒ½å½’å¹¶åˆ°\"@babel/preset-env\"äº†\n\t    -   `babel-preset-es2015`\n\t\t-   `babel-preset-es2016`\n\t\t-   `babel-preset-es2017`\n\t\t-   `babel-preset-latest`\n\t\t-  A combination of the above ^\n\t\næ‰€ä»¥è¿™é‡Œå±•ç¤ºä¸€ä¸‹å‡çº§å`.bablerc`ï¼Œä»…ä¾›å‚è€ƒ~\n\n\u003e .bablerc\n\n```json\n// {\n//   \"presets\": [\n//     [\"latest\", {\n//       \"es2015\": { \"modules\": false }\n//     }],\n//     \"stage-2\"\n//   ],\n//   \"plugins\": [\"transform-runtime\", \"transform-vue-jsx\"],\n//   \"comments\": false,\n//   \"env\": {\n//     \"test\": {\n//       \"presets\": [\"latest\", \"stage-2\"],\n//       \"plugins\": [ \"istanbul\" ]\n//     }\n//   }\n// }\n\n{  \n  \"presets\": [\"@babel/preset-env\", \"@babel/preset-typescript\", \"@vue/babel-preset-jsx\"],  \n  \"plugins\": [\"@babel/plugin-transform-runtime\", \"@babel/plugin-external-helpers\"]  \n}\n```\n\n## æµ‹è¯•\n\nåˆ°è¿™é‡Œå…¬å¸çš„å…ƒè€çº§é¡¹ç›®åŸºæœ¬å·²ç»ä¼˜åŒ–å®Œæ¯•äº†ï¼Œåœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨æµ‹è¯•ä¸€ä¸‹æ‰“åŒ…é€Ÿåº¦çš„åŒºåˆ«è¯•è¯•.\n\n### mac 6æ ¸12çº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/FF249298-12D6-439E-A149-1A51EDF30C55.png)\n\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/590E0034-4D68-4BE7-AEDA-7F0FFA4BB58E.png)\n\n### centos å•æ ¸åŒçº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/A535621B-69CB-4478-8C30-B547F4C33601.png)\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/71D1F9DB-E95E-4FE3-A5D3-85AAE3C7F342.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæå‡é€Ÿåº¦çº¦ç­‰äº3/5ï¼Œç›¸å¯¹äºæ¯æ¬¡æäº¤CI/CDèµ°ä¸‹æ¥6-7åˆ†é’Ÿè¿˜æ˜¯æœ‰å¾ˆå¤§æå‡çš„ï¼Œèµ·ç æ³¡â˜•ï¸å˜æˆæ³¡é€Ÿæº¶â˜•ï¸äº†hhhhã€‚\n\n## æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œåœ¨è¿™äº›æ–¹æ³•çš„æ¨åŠ¨ä¸‹çš„æ„å»ºé€Ÿåº¦ä¼˜åŒ–è¿˜æ˜¯æœ‰ç€è‚‰çœ¼å¯è§çš„æå‡é€Ÿåº¦çš„ï¼Œè¿™é‡ŒåŸºäºwebpack2.xçš„æå‡æ–¹æ¡ˆçš„æ•ˆæœå› é¡¹ç›®è€Œå¼‚ï¼Œå¯èƒ½æ•ˆæœå¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½**æ²¡æœ‰æ•ˆæœ**ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€äº›æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä¸è¶³å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï½","publishedAt":"0201-03-11T20:24:17.000Z","status":"published","slug":"webpack2-6-ts","author":3,"articletype":null,"created_at":"2021-07-29T07:13:40.603Z","updated_at":"2021-07-29T09:00:21.859Z","top":null,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}}]},{"id":8,"name":"NGINX","slug":"nginx","created_at":"2021-07-29T07:08:15.693Z","updated_at":"2021-07-29T07:08:15.697Z","articles":[{"id":2,"title":"nginxæœ¬åœ°é…ç½®","description":"åœ¨å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨webpack+http-proxyå®Œæˆå¯¹åç«¯æ¥å£çš„è°ƒç”¨ï¼Œå…¬å¸çš„å¾®æœåŠ¡æœ‰å¾ˆå¤šï¼Œå¾ˆå¤šæ—¶å€™å†è°ƒè¯•çš„æ—¶å€™éœ€è¦åˆ‡æ¢é…ç½®æ–‡ä»¶æˆ–è€…ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥è°ƒè¯•æ¥å£ï¼Œä½†æ˜¯ç”±äºå…¬å¸è€é¡¹ç›®ä½“ç§¯å¤ªå¤§ï¼Œæ‰€ä»¥æ¯æ¬¡ä¿®æ”¹é…ç½®é‡å¯æœåŠ¡çš„æ—¶é—´éƒ½å¯ä»¥æ³¡ä¸€æ¯â˜•ï¸~","content":"\u003e  åœ¨å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨[webpack]([https://webpack.js.org/](https://webpack.js.org/))+http-proxyå®Œæˆå¯¹åç«¯æ¥å£çš„è°ƒç”¨ï¼Œå…¬å¸çš„å¾®æœåŠ¡æœ‰å¾ˆå¤šï¼Œå¾ˆå¤šæ—¶å€™å†è°ƒè¯•çš„æ—¶å€™éœ€è¦åˆ‡æ¢é…ç½®æ–‡ä»¶æˆ–è€…ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥è°ƒè¯•æ¥å£ï¼Œä½†æ˜¯ç”±äºå…¬å¸è€é¡¹ç›®ä½“ç§¯å¤ªå¤§ï¼Œæ‰€ä»¥æ¯æ¬¡ä¿®æ”¹é…ç½®é‡å¯æœåŠ¡çš„æ—¶é—´éƒ½å¯ä»¥æ³¡ä¸€æ¯â˜•ï¸~\n\n## æƒ³æ³•\n\nè¿™é‡Œæƒ³çš„æ˜¯ç”¨[Electron]([http://electronjs.org/](http://electronjs.org/)) + Vue2.xåšçš„å®¢æˆ·ç«¯ï¼Œé€šè¿‡nginxæ¥ä»£ç†æœ¬åœ°çš„æŸä¸ªç«¯å£åˆ°æœåŠ¡å™¨ï¼Œç”¨\bnodeçš„child_processï¼Œä¿®æ”¹nginx.confé…ç½®æ–‡ä»¶æ¥å¯åŠ¨ã€é‡å¯ã€é‡è½½nginxæœåŠ¡æœ¬åœ°nginxæœåŠ¡ã€‚\n\n## å¼€å·¥\n\n### [NginxService.js](https://github.com/yangger6/electron-nginx/blob/master/src/main/NginxService.js) ç”¨æ¥ç®¡ç†nginxæœåŠ¡\n\né¦–å…ˆæ˜¯è¦åŒºåˆ†windowsè¿˜æ˜¯ mac osï¼Œè¿™é‡Œæš‚æ—¶æ²¡æœ‰è€ƒè™‘Linuxï¼Œå…¶å®æ˜¯å› ä¸ºæ‡’zzzzã€‚\nåŒºåˆ†æ˜¯ä¸æ˜¯windows\n\n```javascript\nconst isWindows = process.platform === 'win32'\n```\n\nç„¶åè·å–nginxçš„é…ç½®æ–‡ä»¶ **(é…ç½®æ–‡ä»¶ä¸ºäº†æ–¹ä¾¿å¯¼å…¥å¯¼å‡ºå’Œé…ç½®ï¼Œæ˜¯é€šè¿‡è¯»å–jsonæ–‡ä»¶ç”¨ejsç”Ÿäº§æœ€ç»ˆçš„nginx.conf)** ã€‚\n\n\u003e nginxé…ç½®çš„æ¨¡æ¿æ–‡ä»¶conf.ejs\n\n```\nworker_processes  1;  \n  \nerror_log  \"\u003c%=logPath%\u003e\";  \nerror_log  \"\u003c%=logPath%\u003e\"  notice;  \nerror_log  \"\u003c%=logPath%\u003e\"  info;  \n  \nevents {  \n    worker_connections  1024;  \n}  \nhttp {  \n    include       mime.types;  \n    client_body_temp_path \"\u003c%=tempPath%\u003e/client_body_temp\";  \n    proxy_temp_path \"\u003c%=tempPath%\u003e/proxy_temp\";  \n    fastcgi_temp_path \"\u003c%=tempPath%\u003e/fastcgi_temp\";  \n    default_type  application/octet-stream;  \n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '  \n    #                  '$status $body_bytes_sent \"$http_referer\" '  \n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';  \n    #access_log  logs/access.log  main;  \n    sendfile        on;  \n    #tcp_nopush     on;  \n    #keepalive_timeout  0;  \n    keepalive_timeout  65;  \n    #gzip  on;  \n    server {  \n        listen       \u003c%=port%\u003e;  \n        server_name  127.0.0.1;  \n        error_page   500 502 503 504  /50x.html;  \n        location = /50x.html {  \n            root   html;  \n        }  \n        location / {  \n            proxy_pass \u003c%=defaultMode%\u003e;  \n        }\u003c% rules.map(rule =\u003e {%\u003e  \n  location \u003c%=rule.path%\u003e {  \n            proxy_pass \u003c%=rule.proxy%\u003e;  \n        }\u003c% }) %\u003e  \n  }  \n}\n```\n\n\u003e é…ç½®jsonæ–‡ä»¶\n\n```json\n{  \n  \"mode\": \"boss-test\", // å½“å‰ç¯å¢ƒ  \n  \"port\": \"8890\", // ä»£ç†ç«¯å£ éœ€è¦è·Ÿå‰ç«¯çš„ä»£ç†åœ°å€ä¸€è‡´  \n  \"host\": {  \n\t  \"boss-test\": \"https://test.www.xxxx.com.cn\", // ä¸ªä¸ªç¯å¢ƒçš„ä»£ç†åœ°å€  \n\t  \"boss-dev\": \"https://dev.www.xxxx.com.cn\",  \n\t  \"boss-pro\": \"https://xxxxx.xxxx.com\",  \n\t  \"m.xxxx\": \"https://test.m.xxxx.com.cn\",  \n  },  \n \"proxyRules\": [ // é’ˆå¯¹å•ç‹¬çš„ç‰¹å®šæ¥å£çš„ç¯å¢ƒä»£ç†ï¼Œä¾‹å¦‚æˆ‘åœ¨æµ‹è¯•ç¯å¢ƒéœ€è¦è°ƒç”¨ä¸€ä¸ªå¼€å‘ç¯å¢ƒçš„ç«¯å£  \n\t  {  \n\t  \"id\": \"06eb1141-44e6-423e-bb83-c6cff5b9cc86\",  \n\t  \"mode\": \"boss-pro\", // å•ç‹¬æ¥å£çš„ç¯å¢ƒ  \n\t  \"rule\": \"/boss-api\", // ä»£ç†è§„åˆ™  \n\t  \"status\": false // æ˜¯å¦æ˜¯ç”¨é…ç½®  \n\t  }\n\t]\n}\n```\n\nå› ä¸ºlinuxå’Œwindosçš„è·¯å¾„é—®é¢˜ï¼Œè¯»å–é…ç½®éœ€è¦æ³¨æ„åæ–œæ å’Œæ–œæ çš„è½¬è¯‘ï¼Œæ‰€ä»¥å¤„ç†çš„ä»£ç å¦‚ä¸‹\n\n```javascript\nif (isWindows) {  \n  const truePath = path.resolve(path.join(__static, `./nginx/windows/`))  \n  this.nginx = '\"' + truePath + '/nginx.exe\" ' + '-p \"' + truePath + '\"'  \n  this.nginx = this.nginx.replace(/\\\\/g, '/')  \n} else {  \n  this.nginx = path.resolve(path.join(__static, `./nginx/mac/bin/nginx`))  \n}\n```\n\nç„¶åå°±æ˜¯å¯åŠ¨nginxæœåŠ¡äº†,é€šè¿‡ç”¨[child_process.exec](https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)å¯åŠ¨å­è¿›ç¨‹ï¼Œå› ä¸ºç”¨electronæ‰“åŒ…ä¹‹åæ˜¯çœ‹ä¸åˆ°æ–‡ä»¶çš„ï¼Œæ‰€ä»¥è¿™é‡Œè¦æ·»åŠ æ—¥å¿—è®°å½•æ¯ä¸€æ­¥çš„æ“ä½œï¼Œä¸ºäº†ä»¥åæ–¹ä¾¿æ’é”™, é‡å¯å’Œé‡è½½æœåŠ¡å¾ˆç®€å•ï¼Œè¿™é‡Œè´´å‡ºä»£ç ä¸ä¸€ä¸€è®²è§£ã€‚\n\n```javascript\nasync start () {  \n  try {  \n  let config = this.config  // è·å–æ‰§è¡Œè·¯å¾„\n  if (isWindows) {  \n  config = `\"${config}\"`  // windows çš„ç‰¹æ®Šå¤„ç†- -\n  }  \n  const {stderr} = await exec(`${this.nginx} -c ${config}`)  // å¯åŠ¨\n  console.log(stderr)  \n  await addLog('nginx start successful')  // è®°å½•æ—¥å¿—\n  return true  \n  } catch (e) {  \n  await addLog('nginx start error -\u003e' + e)  \n  console.log(e)  \n  return false  \n  }  \n}\nasync stop () {  \n  try {  \n  if (isWindows) {  \n  await exec(`taskkill /fi \"imagename eq nginx.EXE\" /f`)  \n } else {  \n  await exec(`ps -lef|grep -i nginx:|awk '{ print $2}'|xargs kill -9`)  \n } } catch (e) {  \n  await addLog('nginx stop error -\u003e' + e)  \n  console.log(e)  \n }  await addLog('nginx stop successful')  \n  return true  \n}\nasync reload () {  \n  try {  \n  if (await this.test()) {  \n  if (isWindows) {  \n  const {stdout, stderr} = await exec(`${this.nginx} -s reload -c \"${this.config}\"`)  \n  console.log(stdout)  \n  console.log(stderr)  \n } else {  \n  const {stdout, stderr} = await exec(`${this.nginx} -s reload`)  \n  console.log(stdout)  \n  console.log(stderr)  \n }  await addLog('nginx reload successful')  \n  return true  \n  } else {  \n  return false  \n  }  \n } catch (e) {  \n  await addLog('nginx reload error -\u003e' + e)  \n  console.log(e)  \n  return false  \n  }  \n}\n```\n\nè¿™é‡Œè¦è®²ä¸€ä¸‹ï¼Œè¿™é‡Œæ˜¯é€šè¿‡ç”¨å‘½ä»¤æ£€æµ‹é…ç½®nginxçš„ç«¯å£æœ‰æ²¡æœ‰è¢«å ç”¨æ¥çœ‹nginxçš„çŠ¶æ€(æ²¡æƒ³åˆ°æ›´å¥½çš„æ–¹æ¡ˆ)ï¼Œå¦‚æœæœ‰æ›´å¥½çš„åŠæ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡å‡º^^\n\n```javascript\nasync status () {  \n  try {  \n  const jsonObj = JSON.parse(fs.readFileSync(jsonPath, 'utf8'))  \n  if (isWindows) {  \n  await exec(`netstat -ano|findstr ${jsonObj.port}`)  \n } else {  \n  await exec(`lsof -i:${jsonObj.port}`)  \n }  await addLog('nginx get status successful')  \n  return true  \n  } catch (e) {  \n  await addLog('nginx get status error -\u003e' + e)  \n  console.log(e)  \n  return false  \n  }  \n}\n```\n\n### main.js å¼•å…¥NginxService, ä¸æ¸²æŸ“è¿›ç¨‹é€šä¿¡\n\nè¿™é‡Œç›´æ¥æ”¾å‡ºä»£ç ï¼Œä¸»è¦ç”¨çš„æ˜¯electronçš„(ipcMain)[[https://electronjs.org/docs/api/ipc-main#ipcmain](https://electronjs.org/docs/api/ipc-main#ipcmain)]æ¥ä»ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹çš„å¼‚æ­¥é€šä¿¡ã€‚\n\n\u003e listen.js\n\n```javascript\nimport nginxService from './NginxService'  \nimport path from 'path'  \nimport fs from 'fs'  \nimport {renderConfig, changeMode, updatePort, deleteMode, addHost, addRules, deleteRule, updateRule, importFile, cleanLogs} from './nginx/index'  \nconst jsonPath = path.resolve(path.join(__static, './nginx/config/proxy.json'))  \nconst { ipcMain } = require('electron')  \nipcMain.on('get-rules', async (event, arg) =\u003e {  \n  event.returnValue = JSON.parse(fs.readFileSync(jsonPath, 'utf8'))  \n})  \nipcMain.on('get-path', async (event) =\u003e {  \n  event.returnValue = path.resolve(path.join(__static, './nginx/config/proxy.json'))  \n})  \nipcMain.on('get-error-log-path', async (event) =\u003e {  \n  event.returnValue = path.resolve(path.join(__static, `./nginx/${process.platform === 'win32' ? 'windows' : 'mac'}/logs/error.log`))  \n})  \nipcMain.on('get-logs', async (event) =\u003e {  \n  event.returnValue = fs.readFileSync(path.resolve(path.join(__static, `./log.txt`)), 'utf8')  \n})  \nipcMain.on('get-logs-path', async (event) =\u003e {  \n  event.returnValue = path.resolve(path.join(__static, `./log.txt`))  \n})  \nipcMain.on('clean-logs', async (event) =\u003e {  \n  event.returnValue = await cleanLogs()  \n})  \nipcMain.on('get-status', async (event, arg) =\u003e {  \n  event.returnValue = await nginxService.status()  \n})  \nipcMain.on('stop-nginx', async (event, arg) =\u003e {  \n  event.returnValue = await nginxService.stop()  \n})  \nipcMain.on('start-nginx', async (event, arg) =\u003e {  \n  nginxService.start()  \n  setTimeout(() =\u003e {  \n  event.returnValue = true  \n  }, 1000)  \n})  \nipcMain.on('render-config', async (event, arg) =\u003e {  \n  event.returnValue = await renderConfig()  \n})  \nipcMain.on('reload-nginx', async (event, arg) =\u003e {  \n  event.returnValue = await nginxService.reload()  \n})  \nipcMain.on('add-host', async (event, arg) =\u003e {  \n  event.returnValue = await addHost(...arg)  \n})  \nipcMain.on('add-rule', async (event, arg) =\u003e {  \n  event.returnValue = await addRules(...arg)  \n})  \nipcMain.on('delete-rule', async (event, arg) =\u003e {  \n  event.returnValue = await deleteRule(arg)  \n})  \nipcMain.on('update-rule', async (event, arg) =\u003e {  \n  event.returnValue = await updateRule(...arg)  \n})  \nipcMain.on('update-mode', async (event, arg) =\u003e {  \n  event.returnValue = await changeMode(arg)  \n})  \nipcMain.on('delete-mode', async (event, arg) =\u003e {  \n  event.returnValue = await deleteMode(arg)  \n})  \nipcMain.on('update-port', async (event, arg) =\u003e {  \n  event.returnValue = await updatePort(arg)  \n})  \nipcMain.on('import-file', async (event, arg) =\u003e {  \n  event.returnValue = await importFile(arg)  \n})\n```\n\nå†ä»main.jså¼•å…¥listen.jså³å¯\n\n```javascript\n// ç›‘å¬renderäº‹ä»¶    \nrequire('./linten')\n```\n\n### æ¸²æŸ“è¿›ç¨‹ä»£ç \n\nä¸»è¦å°±æ˜¯ç”¨vue+element-uiå†™çš„ç•Œé¢å†ä¸ä¸»è¿›ç¨‹é€šä¿¡è°ƒç”¨nginxçš„æœåŠ¡ï¼Œè¿™é‡Œå°±ä¸è´´å‡ºæ¥äº†ï¼Œå¯ä»¥åˆ°[é¡¹ç›®åœ°å€](https://github.com/yangger6/electron-nginx)æŸ¥çœ‹ã€‚\n\n## æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªä¸œè¥¿éš¾åº¦ä¸å¤§ï¼Œä½†æ˜¯å¾ˆçœäº‹ï¼Œæ¯”è¾ƒä¸æ˜¯è°éƒ½èƒ½å¿å—æ¯æ¬¡é‡å¯é¡¹ç›®è¦ç­‰5-6åˆ†é’Ÿï¼Œä¹Ÿå¾—æ‰¾ä¸ªæ—¶é—´ä¼˜åŒ–ä¸€ä¸‹è€é¡¹ç›®äº†ï¼Œå†å²é—ç•™é—®é¢˜å¤ªå¤šäº†zzzz.","publishedAt":"0201-03-11T19:24:17.000Z","status":"published","slug":"nginx-local-setting","author":3,"articletype":null,"created_at":"2021-07-29T07:06:15.607Z","updated_at":"2021-07-29T09:00:06.492Z","top":null,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}}]},{"id":9,"name":"SSR","slug":"ssr","created_at":"2021-07-29T07:08:21.486Z","updated_at":"2021-07-29T07:08:21.492Z","articles":[{"id":1,"title":"SSRé¡¹ç›®è§„åˆ’","description":"ç›®å‰å…¬å¸é¡¹ç›®çš„ç±»å‹å¤šæ•°æ˜¯SPA,å‰ç«¯è´Ÿè´£ç•Œé¢æ˜¾ç¤ºï¼Œåç«¯è´Ÿè´£æ•°æ®å­˜å‚¨å’Œè®¡ç®—ï¼Œå„å¸å…¶èŒï¼Œä¸ä¼šæŠŠå‰åç«¯çš„é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯ä»¥å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼ŒæœåŠ¡å™¨åªç”¨æä¾›è°ƒç”¨çš„æ¥å£ï¼Œä¸ç”¨ç®¡å±•ç¤ºé€»è¾‘å’Œé¡µé¢åˆæˆï¼Œååèƒ½åŠ›ä¼šæé«˜å‡ å€ï¼›å¼€å‘éå¸¸æ–¹ä¾¿ä½†æ˜¯ä¸å¯é¿å…çš„æœ‰å‰¯ä½œç”¨...","content":"ç›®å‰å…¬å¸é¡¹ç›®çš„ç±»å‹å¤šæ•°æ˜¯SPA,å‰ç«¯è´Ÿè´£ç•Œé¢æ˜¾ç¤ºï¼Œåç«¯è´Ÿè´£æ•°æ®å­˜å‚¨å’Œè®¡ç®—ï¼Œå„å¸å…¶èŒï¼Œä¸ä¼šæŠŠå‰åç«¯çš„é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯ä»¥å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼ŒæœåŠ¡å™¨åªç”¨æä¾›è°ƒç”¨çš„æ¥å£ï¼Œä¸ç”¨ç®¡å±•ç¤ºé€»è¾‘å’Œé¡µé¢åˆæˆï¼Œååèƒ½åŠ›ä¼šæé«˜å‡ å€ï¼›å¼€å‘éå¸¸æ–¹ä¾¿ä½†æ˜¯ä¸å¯é¿å…çš„æœ‰å‰¯ä½œç”¨ï¼š\n\n* é¦–å±åŠ è½½é€Ÿåº¦æ…¢\n* SEO æ”¯æŒç¼ºå¤±\n\næ‰€ä»¥ç°åœ¨å‡†å¤‡è§„åˆ’ä¸€ç§æ–¹æ¡ˆå¯ä»¥å…¼é¡¾SPAå’ŒæœåŠ¡å™¨æ¸²æŸ“çš„ä¼˜åŠ¿\n\n## SSR ä»‹ç»\n\nSSR(Server Side Rendering)åˆšå¥½å¼¥è¡¥äº†SPAçš„ä¸è¶³ï¼Œä½¿å¾—å‰åç«¯åˆ†ç¦»çœŸæ­£å¯ä»¥è¾¾åˆ°å’Œä¼ ç»Ÿç½‘ç«™çš„æ•ˆæœå¹¶è¶…è¶Šä¼ ç»Ÿç½‘ç«™ã€‚\nå…³äºå‰åç«¯åˆ†ç¦»æˆ–SPAçš„ä¼˜ç‚¹å¯ä»¥è‡ªè¡Œäº†è§£ï¼ŒSSRç›¸å¯¹äºSPAä¸»è¦æœ‰ä»¥ä¸‹æå‡\n\n### æ›´å¿«çš„é¦–å±å±•ç¤ºé€Ÿåº¦\n\nç”±äº SPA éœ€è¦å…ˆåŠ è½½å®Œ JavaScript è„šæœ¬æ‰èƒ½å¼€å§‹æ¸²æŸ“ï¼Œæ‰€ä»¥é¦–å±æ¸²æŸ“å¹¶ä¸å¿«ï¼Œåœ¨ JavaScript åŠ è½½ä¸­åªèƒ½æ˜¾ç¤ºç®€å•çš„ç­‰å¾…ç”»é¢ã€‚\nSSR æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå¯ä»¥ç›´æ¥è¾“å‡º HTML å†…å®¹ï¼Œåœ¨é¦–å±å±•ç¤ºä¸Šæ›´æœ‰ä¼˜åŠ¿ã€‚\n\n### SEO æ”¯æŒ\n\nSEO çš„é‡è¦æ€§å¤§å®¶éƒ½çŸ¥é“ï¼Œå› ä¸º SEO éœ€æ±‚å¯¼è‡´ SPA å¯¹ç”µå•†ï¼Œé¦–é¡µï¼Œå†…å®¹ç±»ç½‘ç«™ç­‰éœ€è¦ SEO çš„é¡µé¢æœ›è€Œå´æ­¥ï¼Œåªèƒ½å›åˆ°ä¼ ç»ŸæœåŠ¡ç«¯æ¸²æŸ“çš„æ–¹æ¡ˆä¸­ã€‚\nSSR å¼¥è¡¥äº† SEO çš„ä¸è¶³ï¼ŒçœŸæ­£çš„å¯ä»¥é€šè¿‡å‰åç«¯åˆ†ç¦»çš„æ–¹å¼å®Œæˆæ­¤ç±»ç½‘ç«™ã€‚\n\n## æ¡†æ¶é€‰å‹\n\nSSRç›®å‰åˆ†Client(å®¢æˆ·ç«¯)å’ŒServer(æœåŠ¡ç«¯),ä»¥åŠå¯èƒ½é…åˆPWAï¼Œ**ä¸»è¦**ä½¿ç”¨çš„æ˜¯ä»¥ä¸‹:\n\n### Client\n\n* Vue,Vuex,Vue-Router (Vueå…¨å®¶æ¡¶)\n* Vue-Meta(å®Œå–„SEOé…ç½®)\n* Nuxt(SSR UIæ¸²æŸ“ï¼ŒåŒæ—¶æŠ½è±¡å‡ºå®¢æˆ·ç«¯/æœåŠ¡å™¨åˆ†å¸ƒã€‚)\n\n### Server\n\n* koa (Nodejs ä¸‹ä¸€ä»£çš„Webæ¡†æ¶)\n* logger (æ—¥å¿—)\n* Routing-controllers (ä½¿ç”¨æ–¹æ³•åˆ›å»ºæ§åˆ¶å™¨ç±»ä½œä¸ºå¤„ç†è¯·æ±‚çš„æ“ä½œ,å°†è·¯ç”±æ§åˆ¶å™¨ä¸koaä¸€èµ·ä½¿ç”¨)\n* Sequelize (Sequelizeæ˜¯MySQLçš„åŸºäºæ‰¿è¯ºçš„Node.js ORMæ¡†æ¶ã€‚å®ƒå…·æœ‰å¯é çš„äº‹åŠ¡æ”¯æŒï¼Œå…³ç³»ï¼Œè¯»å–å¤åˆ¶ç­‰åŠŸèƒ½ã€‚)\n* Redis (ç¼“å­˜)\n\n### PWA (Progressive Web Apps)\n\n* Workbox (Google å¼€å‘çš„å·¥å…·é›†ï¼Œèƒ½å¤Ÿæ–¹ä¾¿åœ°é›†æˆåˆ° Webpackã€Gulp ç­‰æ„å»ºæµç¨‹ä¸­ï¼Œå¸®åŠ©å¼€å‘è€…ç”Ÿæˆæˆ–è€…æ³¨å…¥éƒ¨åˆ† ServiceWorker ç›¸å…³ä»£ç )\n* Service Worker (æœåŠ¡å·¥ä½œçº¿ç¨‹, æµè§ˆå™¨åå°ç‹¬ç«‹äºç½‘é¡µçš„è„šæœ¬ï¼Œé¢„ç¼“å­˜ï¼Œæ¶ˆæ¯æ¨é€ï¼Œåå°åŒæ­¥)\n* App Shellæ¨¡å‹ (åŠ è½½å¿…è¦ç•Œé¢, è¿›è¡Œç¦»çº¿ç¼“å­˜)\n\n## ç›®æ ‡æ•ˆæœ\n\n* ç›´æ¥è®¿é—®é¡µé¢è¾¾åˆ°ä¼ ç»ŸæœåŠ¡å™¨æ¸²æŸ“çš„é€Ÿåº¦\n* é¡¹ç›®å†…è·³è½¬åƒ SPA ä¸€æ ·å¿«é€Ÿè·³è½¬\n* æ”¯æŒ SEO\n* åŒæ„ä»£ç ï¼ŒèŠ‚çœå¼€å‘å·¥ä½œé‡ï¼Œæå‡æ•ˆç‡\n* å‰åç«¯åˆ†ç¦»ï¼Œå¯å¹¶è¡Œå¼€å‘ï¼Œç‹¬ç«‹ç®¡ç†\n\n## æ ¸å¿ƒæ€è·¯\n\n* è¾“å…¥åœ°å€è®¿é—®æˆ–åˆ·æ–°è®¿é—®æ—¶åœ¨ Clinet ç«¯æ¸²æŸ“é¡µé¢\n* æµè§ˆå™¨ä¸­è·³è½¬æ—¶åœ¨ Server ç«¯æ¸²æŸ“é¡µé¢\n* å‰åç«¯å…¬ç”¨åŒä¸€å¥—ä¸šåŠ¡ä»£ç \n* åˆ©ç”¨ä¸­é—´ä»¶ï¼Œé€‚é…å™¨ä»¥åŠç¯å¢ƒåˆ¤æ–­å±è”½æ‰ä¸šåŠ¡ä»£ç ä¸­çš„ç¯å¢ƒå·®å¼‚\n\n## ç›®å½•ç»“æ„\n\n```\nâ”œâ”€client\nâ”‚  â”œâ”€.nuxt\nâ”‚  â”‚  â”œâ”€components\nâ”‚  â”‚  â””â”€views\nâ”‚  â”œâ”€assets\nâ”‚  â”‚  â”œâ”€icon\nâ”‚  â”‚  â””â”€less\nâ”‚  â”œâ”€biz-components\nâ”‚  â”œâ”€components\nâ”‚  â”œâ”€layouts\nâ”‚  â”œâ”€middleware\nâ”‚  â”œâ”€pages\nâ”‚  â”œâ”€plugins\nâ”‚  â”œâ”€service\nâ”‚  â”œâ”€static\nâ”‚  â”‚  â””â”€base\nâ”‚  â”œâ”€store\nâ”‚  â”‚  â””â”€modules\nâ”‚  â””â”€utils\nâ”œâ”€server\nâ”‚   â”œâ”€controllers\nâ”‚   â”‚  â””â”€api\nâ”‚   â”œâ”€interfaces\nâ”‚   â”œâ”€middlewares\nâ”‚   â””â”€utils\nâ”œâ”€.editorconfig\nâ”œâ”€.eslintignore\nâ”œâ”€.eslintrc.js\nâ”œâ”€index.js\nâ”œâ”€nuxt.config.js\nâ”œâ”€package.json\nâ”œâ”€package-lock.json\nâ”œâ”€README.md\nâ”œâ”€tsconfig.json\nâ”œâ”€tslint.json\nâ””â”€yarn.lock\n```\n## æ€»ä½“è§„åˆ’\n\nä½¿ç”¨Nuxtå’ŒPWAé…åˆKoaå®ŒæˆSSRï¼Œåˆ©äºSEOä¼˜åŒ–å’Œé¦–å±æ¸²æŸ“æ—¶é—´åŠ é€Ÿ.ä½†æ˜¯ä¹Ÿæœ‰å±€é™æ€§å­˜åœ¨:\n* æœåŠ¡ç«¯å‹åŠ›è¾ƒå¤§: åœ¨é«˜å¹¶å‘çš„è®¿é—®ä¸‹ï¼ŒæœåŠ¡ç«¯å¤§é‡å ç”¨æœåŠ¡å™¨çš„èµ„æº\n* å¼€å‘æ¡ä»¶å—é™: createdå’ŒbeforeCreateä¹‹å¤–çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸å¯ç”¨ï¼Œå› æ­¤é¡¹ç›®å¼•ç”¨çš„ç¬¬ä¸‰æ–¹çš„åº“ä¹Ÿä¸å¯ç”¨å…¶å®ƒç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè¿™å¯¹å¼•ç”¨åº“çš„é€‰æ‹©äº§ç”Ÿäº†å¾ˆå¤§çš„é™åˆ¶ï¼›\n* å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜: é™¤äº†å¯¹webpackã€Vueè¦ç†Ÿæ‚‰ï¼Œè¿˜éœ€è¦æŒæ¡nodeã€Koaç›¸å…³æŠ€æœ¯ã€‚ç›¸å¯¹äºå®¢æˆ·ç«¯æ¸²æŸ“ï¼Œé¡¹ç›®æ„å»ºã€éƒ¨ç½²è¿‡ç¨‹æ›´åŠ å¤æ‚ã€‚\n\nç¤ºæ„å›¾\n\n![buildç¤ºæ„å›¾](http://ww1.sinaimg.cn/large/005Yb8FKgy1ftb2l9t44nj31gn0rt42r.jpg)\n\n###å®¢æˆ¶ç«¯è§„åˆ’\n\nåœ¨VUEçš„é …ç›®ä¸­,åŒä¸€å¥—ä»£ç åœ¨ Node ç«¯å’Œæµè§ˆå™¨ç«¯éƒ½èƒ½è¿è¡Œï¼Œæ˜¯æ²¡æœ‰â€œåç«¯æ¨¡æ¿â€çš„æ¦‚å¿µçš„ï¼ŒåŒæ ·å¯¹äºâ€œå†…å®¹ç‰‡æ®µâ€ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åœ¨é¦–å±ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ç›´å‡º HTML åï¼Œæµè§ˆå™¨ç«¯è¿›è¡Œ Hydrate(æ··åˆ)ï¼Œç»‘å®šäº‹ä»¶ä½¿é¡µé¢çœŸæ­£å¯å“åº”ï¼Œé™¤éåˆ·æ–°é¡µé¢ï¼Œå¦åˆ™åç»­çš„è·¯ç”±åˆ‡æ¢éƒ½å°†ç”±å‰ç«¯è·¯ç”±å™¨å®Œæˆã€‚\nåœ¨ Vue SSR é¡¹ç›®ä¸­çš„å®é™…æ•ˆæœå°±æ˜¯é¦–å±ç”±æœåŠ¡ç«¯æ¸²æŸ“ï¼Œéšåå½“è·¯ç”±åˆ‡æ¢æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè¯·æ±‚å¯¹åº”çš„è·¯ç”±ç»„ä»¶ä»£ç ã€‚æ‰€ä»¥***å‰ç«¯è·¯ç”±å‘æœåŠ¡ç«¯è¯·æ±‚å†…å®¹ç‰‡æ®µæ¸²æŸ“å†…å®¹***å®é™…ä¸Šå·²ç»å®Œæˆäº†ï¼Œå¯¹äºå¼€å‘è€…å¹¶æ²¡æœ‰é¢å¤–çš„å·¥ä½œè¦åšã€‚\n\n* å¼•ç”¨***Nuxt*** å¯é€‰å¼•ç”¨***PWA***\n* é¢„ç¼“å­˜ App Shell é¡µé¢\n* Service Worker æ‹¦æˆªæ‰€æœ‰ HTML è¯·æ±‚ï¼Œç»Ÿä¸€è¿”å›ç¼“å­˜çš„ App Shell é¡µé¢ã€‚åŒæ—¶å‘æœåŠ¡ç«¯è¯·æ±‚å½“å‰é¡µé¢éœ€è¦çš„å†…å®¹ç‰‡æ®µå¹¶å†™å…¥ç¼“å­˜\n* å‰ç«¯è·¯ç”±( app.js )å‘æœåŠ¡ç«¯è¯·æ±‚å†…å®¹ç‰‡æ®µï¼Œå‘ç°ç¼“å­˜ä¸­å·²å­˜åœ¨ï¼Œå°†å…¶å¡«å……è¿› App Shell ä¸­ï¼Œå®Œæˆå‰ç«¯æ¸²æŸ“\n* ç¦»çº¿ç”¨æˆ·ä½“éªŒ(é€‰ç”¨)\n\n![SSR](http://ww1.sinaimg.cn/large/005Yb8FKgy1ftb1edsgakj30k00bg77l.jpg)\n\n### æœå‹™ç«¯è§„åˆ’\n\nè¿™é‡Œçš„æœåŠ¡ç«¯æ˜¯æŒ‡Nuxtå’Œæ¸²æŸ“å®¢æˆ·ç«¯ä½¿ç”¨çš„ï¼Œå› ä¸ºå…¬å¸ç”¨çš„åç«¯æ˜¯Javaï¼Œæ‰€ä»¥è¿™é‡Œçš„Nodeä½œä¸ºä¸­é—´å±‚ä½¿ç”¨ï¼Œå¹¶ä¸”å®Œæˆå‰ç«¯ä½¿ç”¨SSRï¼Œé¡µé¢ç¼“å­˜ä¹Ÿå¯ä»¥å¸®åŠ©å‰ç«¯è°ƒæ•´ä¸€ä¸‹åç«¯çš„æ•°æ®ï¼Œæˆ–è€…å†™æ¥å£ï¼Œæ‹“å±•æ€§éå¸¸å¼ºã€‚\n\n* æ”¯æŒè¿”å›å®Œæ•´é¡µé¢å’Œå†…å®¹ç‰‡æ®µ( contentOnly )\n* æ¸²æŸ“Nuxtç”Ÿæˆçš„UI\n* é¡µé¢ç¼“å­˜\n\nSSRéœ€è¦å…ˆåœ¨æœåŠ¡å™¨ç«¯ç”Ÿæˆè™šæ‹Ÿ DOM ï¼Œç„¶åå†åºåˆ—åŒ–ä¸º HTML æ–‡æœ¬ï¼Œè€Œä¸”ä¸ºäº†è¯·æ±‚ä¹‹é—´çš„éš”ç¦»æ€§ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ context ï¼Œè¿™ç§åšæ³•ä½¿å¾—å®ƒä¸ç›´æ¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ç›¸æ¯”æ€§èƒ½å·®äº†æ•°åå€ã€‚  \næ‰€ä»¥ä¸ºäº†æé«˜å¹¶å‘ï¼Œå¹¶ä¸”ä¸ºäº†é™ä½æœåŠ¡å™¨çš„æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥éœ€è¦è¦é’ˆå¯¹å¸¸ç”¨ç•Œé¢æˆ–è€…ç‰¹å®šç»„ä»¶åšé•¿æ—¶é—´çš„ç¼“å­˜,è¿™é‡Œç”¨Redisåšç¼“å­˜,æµç¨‹å›¾å¦‚ä¸‹\n\n![æœåŠ¡ç«¯æ¸²æŸ“æ—¶åºå›¾-å‘½ä¸­ç¼“å­˜](http://ww1.sinaimg.cn/large/005Yb8FKgy1ftbg8mcmi8j30m80cial3.jpg)\n\n![æœåŠ¡ç«¯æ¸²æŸ“æ—¶åºå›¾-æœªå‘½ä¸­ç¼“å­˜](http://ww1.sinaimg.cn/large/005Yb8FKgy1ftbg8vhvzoj30m80cik36.jpg)\n\n### æœå‹™å™¨è§„åˆ’\n\n* cdnç¼“å­˜ç­–ç•¥\n* nginxç¼“å­˜ç­–ç•¥\n\n## å‚è€ƒèµ„æ–™\n\n[App Shell æ¨¡å‹](https://developers.google.cn/web/fundamentals/architecture/app-shell)  \n[offline](https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/)  \n[workbox](https://developers.google.com/web/tools/workbox/)  \n[åœ¨ Vue SSR ä¸­ä½¿ç”¨ Service Worker](https://zhuanlan.zhihu.com/p/31630322)  \n[SSR æ¶æ„é¡¹ç›®å®ç°ç¦»çº¿å¯ç”¨](https://zhuanlan.zhihu.com/p/30791448)  \n[VUE SSRå®šåˆ¶ä¸ä½¿ç”¨å¿ƒå¾—](https://zhuanlan.zhihu.com/p/36017189)  \n[è§£å¯†Vue SSR](https://zhuanlan.zhihu.com/p/35871344)\n\n## æ€»ç»“\n\nç›®å‰å¯ç”¨Nuxt,vue-metaé…åˆKoaå®ç°SEOå’Œé¦–å±æ¸²æŸ“çš„æ—¶é—´.\nå¦‚æœå‰¥ç¦»Vueå…¨å®¶æ¡¶å®ç°SSRä¸”ä¸PWAçš„Workboxå®ç°æ›´å¥½çš„ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒï¼Œä»¥åŠç¨‹åºè‰¯å¥½çš„æ€§èƒ½ï¼Œéœ€è¦è¾ƒé«˜çš„å¼€å‘æˆæœ¬ä¸”å¯¹å¼€å‘äººå‘˜æœ‰è¾ƒé«˜çš„éœ€æ±‚\n***SSRä¸PWAçš„é…åˆä½¿ç”¨ï¼Œå®é™…è¿ä½œç”Ÿäº§ç¯å¢ƒå¼€å‘éš¾åº¦è¾ƒé«˜, CPU æ˜¯ SSR çš„æ€§èƒ½ç“¶é¢ˆ***\n","publishedAt":"0201-03-11T19:04:17.000Z","status":"published","slug":"ssr-project-plan","author":3,"articletype":"Banner","created_at":"2021-07-29T07:01:17.931Z","updated_at":"2021-08-03T07:46:21.306Z","top":false,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}}]},{"id":10,"name":"ELEMENT-UI","slug":"element-ui","created_at":"2021-07-29T07:12:04.629Z","updated_at":"2021-07-29T07:12:04.634Z","articles":[{"id":4,"title":"webpack2.6å‡çº§tsæ”¯æŒ","description":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n","content":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n\n## æ–¹æ¡ˆ\n\nè¿™é‡Œå› ä¸ºbabelå·²ç»å‡çº§åˆ°7äº†æ‰€ä»¥ï¼Œæƒ³ç”¨happyPack + DllPlugin + babel7æ¥è¯•è¯•çœ‹èƒ½æå‡å¤šå°‘é€Ÿåº¦ã€‚\næ€»ä½“æ¥è¯´ä¿®æ”¹äº†ä¸€äº›webpackçš„é…ç½®å’Œbabelçš„é…ç½®ï¼Œå»æ‰äº†ä¸€äº›æ— ç”¨çš„ä¾èµ–ï¼Œpackage.jsoné‡Œé¢browserlistå˜æˆäº† brow**s**erlistï¼Œæ›´æ¢äº†ä¸€äº›webpackçš„æ’ä»¶ï¼Œä¸»è¦æœ‰ä¸‹ï¼š\n\n\u003e  ç§»é™¤çš„ä¾èµ–\n\n```json\n{\n\t\"babel-core\": \"^6.26.3\",\n\t    \"babel-plugin-syntax-jsx\": \"^6.18.0\",  \n  \"babel-plugin-transform-runtime\": \"^6.22.0\",\n  \"babel-preset-latest\": \"^6.22.0\",  \n\"babel-preset-stage-2\": \"^6.22.0\",  \n\"babel-register\": \"^6.26.0\",  \n\"babel-runtime\": \"^6.23.0\",\n}\n```\n\n\u003e æ›´æ–°æˆ–æ–°å¢çš„ä¾èµ–\n\n```json\n\"@babel/polyfill\": \"^7.6.0\",  \n\"@babel/runtime\": \"^7.6.3\",\n\"@babel/core\": \"^7.0.0\",  \n\"@babel/plugin-external-helpers\": \"^7.2.0\",  \n\"@babel/plugin-proposal-class-properties\": \"^7.0.0\",  \n\"@babel/plugin-proposal-decorators\": \"^7.0.0\",  \n\"@babel/plugin-proposal-export-namespace-from\": \"^7.0.0\",  \n\"@babel/plugin-proposal-function-sent\": \"^7.0.0\",  \n\"@babel/plugin-proposal-json-strings\": \"^7.0.0\",  \n\"@babel/plugin-proposal-numeric-separator\": \"^7.0.0\",  \n\"@babel/plugin-proposal-throw-expressions\": \"^7.0.0\",  \n\"@babel/plugin-syntax-dynamic-import\": \"^7.0.0\",  \n\"@babel/plugin-syntax-import-meta\": \"^7.0.0\",  \n\"@babel/plugin-syntax-jsx\": \"^7.0.0\",  \n\"@babel/plugin-transform-runtime\": \"^7.6.2\",  \n\"@babel/preset-env\": \"^7.0.0\",  \n\"@babel/preset-es2015\": \"^7.0.0-beta.53\",  \n\"@babel/preset-typescript\": \"^7.6.0\",  \n\"@babel/register\": \"^7.0.0\",  \n\"@babel/runtime-corejs2\": \"^7.0.0\",\n\"@vue/babel-plugin-transform-vue-jsx\": \"^1.0.0\",\n\"babel-loader\": \"^8.0.0\",\n\"clean-webpack-plugin\": \"^3.0.0\",\n\"happypack\": \"^5.0.1\",  \n\"html-webpack-include-assets-plugin\": \"^2.0.0\",\n\"uglifyjs-webpack-plugin\": \"^1.3.0\",\n\"webpack-bundle-analyzer\": \"^2.13.1\",\n\"webpack-merge\": \"^2.6.1\",  \n\"webpack-parallel-uglify-plugin\": \"^1.1.2\"\n```\n\n## å¼€å·¥\n\n### happypack\n\nè¿™é‡Œç”¨çš„æ˜¯[happypack](https://github.com/amireh/happypack)å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ,é¦–å…ˆå®‰è£…happypackçš„ä¾èµ–.ç„¶åå†åœ¨webpack.base.jså¢åŠ é…ç½®ï¼Œè¾¾åˆ°devæˆ–è€…prodç¯å¢ƒéƒ½å¯ä»¥åŠ é€Ÿçš„æ•ˆæœã€‚\n\n\u003e å¼•å…¥å¿…è¦çš„ä¾èµ–\n\n```javascript\nconst HappyPack = require('happypack') // å¼•ç”¨happypack\nconst os = require('os'); // è·å–ç³»ç»Ÿé…ç½®\n// å¼€å¯çš„çº¿ç¨‹æ± é»˜è®¤ä¸º4ï¼Œè¿™é‡Œç›´æ¥å–çš„æ˜¯ç”µè„‘çš„cpuçº¿ç¨‹æ•°\nconst happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length }) \n```\nç„¶åç”¨happy-loaderä»£æ›¿babel-loaderï¼Œå¹¶ä¸”å¼€å¯babel-loaderçš„ç¼“å­˜ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œloaderåé¢çš„**id=happyPack**å¯¹åº”çš„pluginsé‡Œçš„idè¯†ï¼Œhappypackä¸ä»…å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…jsä¹Ÿå¯ä»¥æ‰“åŒ…cssã€‚\n\n```javascript\n// module.rules\n{\n    test: /\\.js$/,\n    // loader: 'babel-loader',  \n    loader: 'happypack/loader?id=happyPack',\n    include: [\n\t  resolve('src'),\n\t  resolve('test'),\n\t ],\n    exclude: /node_modules/\n},\n// plugins\nnew HappyPack({  \n  //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶  \n  id: 'happyPack',  \n  //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·  \n  loaders: [{  \n  loader: 'babel-loader',  \n  // here you configure babel:  \n  options: { babelrc: true, cacheDirectory: true }  \n }],  //å…±äº«è¿›ç¨‹æ±   \n  threadPool: happyThreadPool,  \n  //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—  \n  verbose: true,  \n}),\n```\n\n### DllPlugin å’Œ DllReferencePlugin\n\nDllplginæ’ä»¶çš„æ¦‚å¿µç±»ä¼¼äºCçš„åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨ï¼Œå°†æ›´æ–°æ¬¡æ•°å¾ˆå°‘æˆ–è€…å‡ ä¹ä¸æ›´æ–°çš„åŒ…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‹†åˆ†bundlesï¼Œæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œé€šè¿‡manifest.jsonç¡®å®šåŒ…çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼, å†ç”¨DllReferencePluginä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ã€‚\n\né¦–å…ˆæˆ‘ä»¬å…ˆä¿®æ”¹`/config/index.js`æ–°å¢æˆ‘ä»¬çš„dllé…ç½®æ–¹ä¾¿å¼•ç”¨ï¼Œå†åœ¨`/build`çš„ç›®å½•ä¸‹æ–°å¢`webpack.dll.conf.js`ç”¨æ¥æ‰“åŒ…dllã€‚\n\n\u003e /config/index.js\n\n```javascript\n// æ–°å¢é…ç½®\n...\ndll: {  \n  static: path.resolve(__dirname, '../static/lib'),  // dllå­˜æ”¾è·¯å¾„ ç›¸å¯¹äºé¡¹ç›®çš„static/lib\n  list: {  // å¤šä¸ªåŒ…åˆ—è¡¨ç”¨æ¥åŒºåˆ†\n\t  vendor: ['vue/dist/vue.common.js','vue-router', 'vuex'],  \n\t  'asset': ['superagent']  \n}\n```\n\n\u003e /build/webpack.dll.conf.js\n\n```javascript\nvar path = require('path')\n\nvar webpack = require('webpack')\nvar CleanWebpackPlugin = require('clean-webpack-plugin')\n\nvar config = require('../config')\nvar __root = path.resolve(__dirname, '../')\n\nmodule.exports = {\n    context: __root, // è¿™é‡Œé…ç½®çš„contextå°±æ˜¯åé¢dllçš„context\n    entry: config.dll.list,\n    output: {\n        path: config.dll.static,\n        filename: '[name]-[chunkhash:7].dll.js',\n        library: 'lib_[name]',\n        // *** è¿™é‡Œä¸è¦æ·»åŠ libraryTargetï¼Œå¦åˆ™webpackæ‰“åŒ…æ—¶ä¼šå‡ºé”™ã€‚\n        // ï¼ˆæç¤ºæ˜¯__WEBPACK__EXTERNAL__MODULE__xxxæœªå®šä¹‰ï¼‰ ***\n        // libraryTarget: 'umd'\n    },\n    resolve: {\n        modules: [path.resolve(__root, 'node_modules')],\n        extensions: ['.js', '.json'],\n        alias: {\n            'vue$': 'vue/dist/vue.esm.js'\n        }\n    },\n    // è¿™é‡Œæ²¡æœ‰å†™loadersï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œæ·»åŠ loaders\n    plugins: [\n        // *** è¿™é‡Œå¾ˆå…³é”® ***\n        new webpack.DllPlugin({ // å› ä¸ºä¸Šé¢å†™äº†contextï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æŒ‡å®šcontext\n            // è¿™é‡Œmanifestçš„åå­—å¿…é¡»è¦æœ‰å˜é‡ï¼Œå› ä¸ºç±»ä¼¼ä¸Šé¢çš„coreå’Œassetä¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªmanifestï¼Œ\n            // å¦‚æœåç§°ç›¸åŒï¼Œmanifestä¼šç”Ÿæˆä¸è§„èŒƒçš„jsonï¼Œåœ¨å¼•ç”¨æ—¶ä¼šæŠ¥é”™ã€‚\n            path: path.resolve(__root, 'static/manifest/[name].manifest.json'),\n            name: 'lib_[name]' // *** è¿™é‡Œçš„åå­—å¿…é¡»ä¸output.libraryä¸€è‡´ ***\n        }),\n        // è¿™ä¸ªæ˜¯ç”¨æ¥ç¨³å®šhashå€¼ï¼Œé˜²æ­¢å‡ºç°webpackçš„hashå‡ºç°è«åçš„å˜åŒ–\n        new webpack.HashedModuleIdsPlugin(),\n        new webpack.NamedChunksPlugin(),\n    ]\n}\n```\nç„¶ååœ¨`package.json`æ·»åŠ `\"build:dll\": \"webpack --config build/webpack.dll.conf.js\"`ç”¨æ¥ç”Ÿæˆdllï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•ã€‚\n\n![æ‰§è¡Œdllæ‰“åŒ…ç»“æœ](https://oss.yangger.cn/assets/blog/667E3894-9F16-4E11-BE28-D2E9B3E27DCF.png)\n\nåœ¨é¡¹ç›®çš„`static/lib`çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”çš„dll.js, è€Œä¸”åœ¨`static/manifest`ç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„manifest.jsonã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹åéœ€è¦å°†ä»–ä»¬ä¸€èµ·ä¸Šä¼ åˆ°git/svnç­‰æºç ä»“åº“ï¼Œå› ä¸ºå‡ ä¹ä¸éœ€è¦æ›´æ–°æˆ–è€…å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥åªéœ€è¦æ¯æ¬¡æ‰§è¡Œå®Œä¹‹åè®°å¾—ä¸Šä¼ åˆ°æºç ä»“åº“å³å¯ã€‚**å¦‚æœä¸æ‰‹åŠ¨ä¸Šä¼ ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨æ‰“åŒ…ä»£ç ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œä¸€æ¬¡`npm run build:dll`å‘½ä»¤**\n\næ‰“åŒ…å®Œdllä¹‹åï¼Œéœ€è¦ä¿®æ”¹`webpack.base.js`è®©æˆ‘ä»¬çš„åœ¨ç¼–è¯‘/æ‰“åŒ…çš„æ—¶å€™æ„Ÿå—æ„å»ºé€Ÿåº¦çš„æå‡ã€‚\n\n\u003e webpack.base.js\n\n```javascript\nconst HTMLWebpackIncludeAssetsPlugin = require('html-webpack-include-assets-plugin')  // æŠŠæˆ‘ä»¬çš„dllå¼•å…¥html\nconst CopyWebpackPlugin = require('copy-webpack-plugin') // å°†dllæ–‡ä»¶æ‹·è´åˆ°ä½ çš„distç›®å½•ä¸‹\nconst __root = path.resolve(__dirname, '../')\n// è·å–dllæ–‡ä»¶çš„manifest\nfunction getDllManifest() {\n    var plugins = []\n    Object.keys(config.dll.list).forEach((name) =\u003e {\n        plugins.push(\n            new webpack.DllReferencePlugin({\n                context: __root, // è¿™é‡Œçš„contextå¿…é¡»ä¸DllPluginä¸­çš„contextä¿æŒä¸€è‡´\n                manifest: path.resolve(__root, 'static/manifest/[name].manifest.json').replace(\n                    /\\[name\\]/gi, name)\n            })\n        )\n    })\n    return plugins\n}\n\n//plugins\n\nplugins: [\n\t//...\n\t...getDllManifest(),\n\tnew HTMLWebpackIncludeAssetsPlugin({\n\t    append: false,\n\t    publicPath: config.build.assetsPublicPath,\n\t    assets: [{\n\t        path: config.build.assetsSubDirectory,\n\t        glob: '**/*.js',\n\t        globPath: config.dll.static\n        }],\n\t}),\n]\n```\n\nè¿™æ ·DllPlugin å’Œ DllReferencePluginçš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†\n\n### å…¶ä»–æ„å»ºçš„å°ä¼˜åŒ–å’Œå‘\n\nä¹‹å‰æ„å»ºçš„æ—¶å€™ä¼šä¸€ç›´çœ‹åˆ°è¿™æ ·çš„é”™è¯¯: `# DefaultsError: 'warnings' is not a supported option`\næ˜¯å› ä¸ºUglifyJsPluginæ›´æ–°äº†ï¼Œé…ç½®æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯å¼•ç”¨å¤–éƒ¨çš„[uglifyjs-webpack-plugin]([https://github.com/webpack-contrib/uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin))æ’ä»¶ä»£æ›¿webpackè‡ªå¸¦çš„ã€‚\n\nä¿®æ”¹å¦‚ä¸‹:\n\n```javascript\n// new webpack.optimize.UglifyJsPlugin({  \n//   compress: {  \n//     warnings: false  \n//   },  \n//   sourceMap: true  \n// }),\nnew UglifyJsPlugin({  \n  cache: '.cache/',  \n  parallel: true,  \n}),  \n```\n\nç„¶ååœ¨devç¯å¢ƒä¸­æ–°å¢[BundleAnalyzerPlugin](https://github.com/webpack-contrib/webpack-bundle-analyzer)ç”¨æ¥æŸ¥çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆä¾èµ–æˆ–è€…å“ªä¸ªæ–‡ä»¶å¤ªå¤§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„åšä»£ç ä¼˜åŒ–\n\n### babe7å‡çº§\n\nå‡çº§åˆ°babel7éå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹[å®˜ç½‘å‡çº§æŒ‡å—](https://babeljs.io/docs/en/v7-migration)ã€‚\nå…¶å®ä¸»è¦æ›´æ–°æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n  1. è‡ªå¸¦æ”¯æŒTypeScriptçš„æ”¯æŒï¼Œts-loaderæˆ–è®¸å¯ä»¥ä¸ç”¨äº†?\n  2. [ç§»é™¤stage-*](https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets)\n  3. ä»¥ä¸‹é¢„è®¾éƒ½å½’å¹¶åˆ°\"@babel/preset-env\"äº†\n\t    -   `babel-preset-es2015`\n\t\t-   `babel-preset-es2016`\n\t\t-   `babel-preset-es2017`\n\t\t-   `babel-preset-latest`\n\t\t-  A combination of the above ^\n\t\næ‰€ä»¥è¿™é‡Œå±•ç¤ºä¸€ä¸‹å‡çº§å`.bablerc`ï¼Œä»…ä¾›å‚è€ƒ~\n\n\u003e .bablerc\n\n```json\n// {\n//   \"presets\": [\n//     [\"latest\", {\n//       \"es2015\": { \"modules\": false }\n//     }],\n//     \"stage-2\"\n//   ],\n//   \"plugins\": [\"transform-runtime\", \"transform-vue-jsx\"],\n//   \"comments\": false,\n//   \"env\": {\n//     \"test\": {\n//       \"presets\": [\"latest\", \"stage-2\"],\n//       \"plugins\": [ \"istanbul\" ]\n//     }\n//   }\n// }\n\n{  \n  \"presets\": [\"@babel/preset-env\", \"@babel/preset-typescript\", \"@vue/babel-preset-jsx\"],  \n  \"plugins\": [\"@babel/plugin-transform-runtime\", \"@babel/plugin-external-helpers\"]  \n}\n```\n\n## æµ‹è¯•\n\nåˆ°è¿™é‡Œå…¬å¸çš„å…ƒè€çº§é¡¹ç›®åŸºæœ¬å·²ç»ä¼˜åŒ–å®Œæ¯•äº†ï¼Œåœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨æµ‹è¯•ä¸€ä¸‹æ‰“åŒ…é€Ÿåº¦çš„åŒºåˆ«è¯•è¯•.\n\n### mac 6æ ¸12çº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/FF249298-12D6-439E-A149-1A51EDF30C55.png)\n\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/590E0034-4D68-4BE7-AEDA-7F0FFA4BB58E.png)\n\n### centos å•æ ¸åŒçº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/A535621B-69CB-4478-8C30-B547F4C33601.png)\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/71D1F9DB-E95E-4FE3-A5D3-85AAE3C7F342.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæå‡é€Ÿåº¦çº¦ç­‰äº3/5ï¼Œç›¸å¯¹äºæ¯æ¬¡æäº¤CI/CDèµ°ä¸‹æ¥6-7åˆ†é’Ÿè¿˜æ˜¯æœ‰å¾ˆå¤§æå‡çš„ï¼Œèµ·ç æ³¡â˜•ï¸å˜æˆæ³¡é€Ÿæº¶â˜•ï¸äº†hhhhã€‚\n\n## æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œåœ¨è¿™äº›æ–¹æ³•çš„æ¨åŠ¨ä¸‹çš„æ„å»ºé€Ÿåº¦ä¼˜åŒ–è¿˜æ˜¯æœ‰ç€è‚‰çœ¼å¯è§çš„æå‡é€Ÿåº¦çš„ï¼Œè¿™é‡ŒåŸºäºwebpack2.xçš„æå‡æ–¹æ¡ˆçš„æ•ˆæœå› é¡¹ç›®è€Œå¼‚ï¼Œå¯èƒ½æ•ˆæœå¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½**æ²¡æœ‰æ•ˆæœ**ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€äº›æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä¸è¶³å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï½","publishedAt":"0201-03-11T20:24:17.000Z","status":"published","slug":"webpack2-6-ts","author":3,"articletype":null,"created_at":"2021-07-29T07:13:40.603Z","updated_at":"2021-07-29T09:00:21.859Z","top":null,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}}]},{"id":11,"name":"TYPESCRIPT","slug":"typescript","created_at":"2021-07-29T07:12:14.521Z","updated_at":"2021-07-29T07:12:14.527Z","articles":[{"id":4,"title":"webpack2.6å‡çº§tsæ”¯æŒ","description":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n","content":"æœ€è¿‘ä¸€ç›´åœ¨æ”¹è€é¡¹ç›®çš„ä¸œè¥¿ï¼Œä½†æ˜¯å› ä¸ºä½“ç§¯å¤ªå¤§çš„é—®é¢˜ï¼Œçƒ­æ›´æ–°æ¯æ¬¡éƒ½è¦ç­‰å¥½å‡ ç§’ï¼Œæ‰“ğŸ“¦å‘å¸ƒæµ‹è¯•ç¯å¢ƒä¹Ÿéœ€è¦6-7åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æ¯æ¬¡ä¸€ä¸ªå°æ”¹åŠ¨éœ€è¦å‘å¸ƒå°±è¦ç­‰å¾ˆä¹…ï¼ŒåŠ ä¸Šä¹‹å‰è¯´è¦ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šå†æŠ˜è…¾ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ã€‚\n\n## æ–¹æ¡ˆ\n\nè¿™é‡Œå› ä¸ºbabelå·²ç»å‡çº§åˆ°7äº†æ‰€ä»¥ï¼Œæƒ³ç”¨happyPack + DllPlugin + babel7æ¥è¯•è¯•çœ‹èƒ½æå‡å¤šå°‘é€Ÿåº¦ã€‚\næ€»ä½“æ¥è¯´ä¿®æ”¹äº†ä¸€äº›webpackçš„é…ç½®å’Œbabelçš„é…ç½®ï¼Œå»æ‰äº†ä¸€äº›æ— ç”¨çš„ä¾èµ–ï¼Œpackage.jsoné‡Œé¢browserlistå˜æˆäº† brow**s**erlistï¼Œæ›´æ¢äº†ä¸€äº›webpackçš„æ’ä»¶ï¼Œä¸»è¦æœ‰ä¸‹ï¼š\n\n\u003e  ç§»é™¤çš„ä¾èµ–\n\n```json\n{\n\t\"babel-core\": \"^6.26.3\",\n\t    \"babel-plugin-syntax-jsx\": \"^6.18.0\",  \n  \"babel-plugin-transform-runtime\": \"^6.22.0\",\n  \"babel-preset-latest\": \"^6.22.0\",  \n\"babel-preset-stage-2\": \"^6.22.0\",  \n\"babel-register\": \"^6.26.0\",  \n\"babel-runtime\": \"^6.23.0\",\n}\n```\n\n\u003e æ›´æ–°æˆ–æ–°å¢çš„ä¾èµ–\n\n```json\n\"@babel/polyfill\": \"^7.6.0\",  \n\"@babel/runtime\": \"^7.6.3\",\n\"@babel/core\": \"^7.0.0\",  \n\"@babel/plugin-external-helpers\": \"^7.2.0\",  \n\"@babel/plugin-proposal-class-properties\": \"^7.0.0\",  \n\"@babel/plugin-proposal-decorators\": \"^7.0.0\",  \n\"@babel/plugin-proposal-export-namespace-from\": \"^7.0.0\",  \n\"@babel/plugin-proposal-function-sent\": \"^7.0.0\",  \n\"@babel/plugin-proposal-json-strings\": \"^7.0.0\",  \n\"@babel/plugin-proposal-numeric-separator\": \"^7.0.0\",  \n\"@babel/plugin-proposal-throw-expressions\": \"^7.0.0\",  \n\"@babel/plugin-syntax-dynamic-import\": \"^7.0.0\",  \n\"@babel/plugin-syntax-import-meta\": \"^7.0.0\",  \n\"@babel/plugin-syntax-jsx\": \"^7.0.0\",  \n\"@babel/plugin-transform-runtime\": \"^7.6.2\",  \n\"@babel/preset-env\": \"^7.0.0\",  \n\"@babel/preset-es2015\": \"^7.0.0-beta.53\",  \n\"@babel/preset-typescript\": \"^7.6.0\",  \n\"@babel/register\": \"^7.0.0\",  \n\"@babel/runtime-corejs2\": \"^7.0.0\",\n\"@vue/babel-plugin-transform-vue-jsx\": \"^1.0.0\",\n\"babel-loader\": \"^8.0.0\",\n\"clean-webpack-plugin\": \"^3.0.0\",\n\"happypack\": \"^5.0.1\",  \n\"html-webpack-include-assets-plugin\": \"^2.0.0\",\n\"uglifyjs-webpack-plugin\": \"^1.3.0\",\n\"webpack-bundle-analyzer\": \"^2.13.1\",\n\"webpack-merge\": \"^2.6.1\",  \n\"webpack-parallel-uglify-plugin\": \"^1.1.2\"\n```\n\n## å¼€å·¥\n\n### happypack\n\nè¿™é‡Œç”¨çš„æ˜¯[happypack](https://github.com/amireh/happypack)å¼€å¯å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœ,é¦–å…ˆå®‰è£…happypackçš„ä¾èµ–.ç„¶åå†åœ¨webpack.base.jså¢åŠ é…ç½®ï¼Œè¾¾åˆ°devæˆ–è€…prodç¯å¢ƒéƒ½å¯ä»¥åŠ é€Ÿçš„æ•ˆæœã€‚\n\n\u003e å¼•å…¥å¿…è¦çš„ä¾èµ–\n\n```javascript\nconst HappyPack = require('happypack') // å¼•ç”¨happypack\nconst os = require('os'); // è·å–ç³»ç»Ÿé…ç½®\n// å¼€å¯çš„çº¿ç¨‹æ± é»˜è®¤ä¸º4ï¼Œè¿™é‡Œç›´æ¥å–çš„æ˜¯ç”µè„‘çš„cpuçº¿ç¨‹æ•°\nconst happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length }) \n```\nç„¶åç”¨happy-loaderä»£æ›¿babel-loaderï¼Œå¹¶ä¸”å¼€å¯babel-loaderçš„ç¼“å­˜ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œloaderåé¢çš„**id=happyPack**å¯¹åº”çš„pluginsé‡Œçš„idè¯†ï¼Œhappypackä¸ä»…å¯ä»¥å¤šçº¿ç¨‹æ‰“åŒ…jsä¹Ÿå¯ä»¥æ‰“åŒ…cssã€‚\n\n```javascript\n// module.rules\n{\n    test: /\\.js$/,\n    // loader: 'babel-loader',  \n    loader: 'happypack/loader?id=happyPack',\n    include: [\n\t  resolve('src'),\n\t  resolve('test'),\n\t ],\n    exclude: /node_modules/\n},\n// plugins\nnew HappyPack({  \n  //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶  \n  id: 'happyPack',  \n  //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·  \n  loaders: [{  \n  loader: 'babel-loader',  \n  // here you configure babel:  \n  options: { babelrc: true, cacheDirectory: true }  \n }],  //å…±äº«è¿›ç¨‹æ±   \n  threadPool: happyThreadPool,  \n  //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—  \n  verbose: true,  \n}),\n```\n\n### DllPlugin å’Œ DllReferencePlugin\n\nDllplginæ’ä»¶çš„æ¦‚å¿µç±»ä¼¼äºCçš„åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨ï¼Œå°†æ›´æ–°æ¬¡æ•°å¾ˆå°‘æˆ–è€…å‡ ä¹ä¸æ›´æ–°çš„åŒ…æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‹†åˆ†bundlesï¼Œæå‡æ„å»ºçš„é€Ÿåº¦ï¼Œé€šè¿‡manifest.jsonç¡®å®šåŒ…çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼, å†ç”¨DllReferencePluginä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ã€‚\n\né¦–å…ˆæˆ‘ä»¬å…ˆä¿®æ”¹`/config/index.js`æ–°å¢æˆ‘ä»¬çš„dllé…ç½®æ–¹ä¾¿å¼•ç”¨ï¼Œå†åœ¨`/build`çš„ç›®å½•ä¸‹æ–°å¢`webpack.dll.conf.js`ç”¨æ¥æ‰“åŒ…dllã€‚\n\n\u003e /config/index.js\n\n```javascript\n// æ–°å¢é…ç½®\n...\ndll: {  \n  static: path.resolve(__dirname, '../static/lib'),  // dllå­˜æ”¾è·¯å¾„ ç›¸å¯¹äºé¡¹ç›®çš„static/lib\n  list: {  // å¤šä¸ªåŒ…åˆ—è¡¨ç”¨æ¥åŒºåˆ†\n\t  vendor: ['vue/dist/vue.common.js','vue-router', 'vuex'],  \n\t  'asset': ['superagent']  \n}\n```\n\n\u003e /build/webpack.dll.conf.js\n\n```javascript\nvar path = require('path')\n\nvar webpack = require('webpack')\nvar CleanWebpackPlugin = require('clean-webpack-plugin')\n\nvar config = require('../config')\nvar __root = path.resolve(__dirname, '../')\n\nmodule.exports = {\n    context: __root, // è¿™é‡Œé…ç½®çš„contextå°±æ˜¯åé¢dllçš„context\n    entry: config.dll.list,\n    output: {\n        path: config.dll.static,\n        filename: '[name]-[chunkhash:7].dll.js',\n        library: 'lib_[name]',\n        // *** è¿™é‡Œä¸è¦æ·»åŠ libraryTargetï¼Œå¦åˆ™webpackæ‰“åŒ…æ—¶ä¼šå‡ºé”™ã€‚\n        // ï¼ˆæç¤ºæ˜¯__WEBPACK__EXTERNAL__MODULE__xxxæœªå®šä¹‰ï¼‰ ***\n        // libraryTarget: 'umd'\n    },\n    resolve: {\n        modules: [path.resolve(__root, 'node_modules')],\n        extensions: ['.js', '.json'],\n        alias: {\n            'vue$': 'vue/dist/vue.esm.js'\n        }\n    },\n    // è¿™é‡Œæ²¡æœ‰å†™loadersï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œæ·»åŠ loaders\n    plugins: [\n        // *** è¿™é‡Œå¾ˆå…³é”® ***\n        new webpack.DllPlugin({ // å› ä¸ºä¸Šé¢å†™äº†contextï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸æŒ‡å®šcontext\n            // è¿™é‡Œmanifestçš„åå­—å¿…é¡»è¦æœ‰å˜é‡ï¼Œå› ä¸ºç±»ä¼¼ä¸Šé¢çš„coreå’Œassetä¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªmanifestï¼Œ\n            // å¦‚æœåç§°ç›¸åŒï¼Œmanifestä¼šç”Ÿæˆä¸è§„èŒƒçš„jsonï¼Œåœ¨å¼•ç”¨æ—¶ä¼šæŠ¥é”™ã€‚\n            path: path.resolve(__root, 'static/manifest/[name].manifest.json'),\n            name: 'lib_[name]' // *** è¿™é‡Œçš„åå­—å¿…é¡»ä¸output.libraryä¸€è‡´ ***\n        }),\n        // è¿™ä¸ªæ˜¯ç”¨æ¥ç¨³å®šhashå€¼ï¼Œé˜²æ­¢å‡ºç°webpackçš„hashå‡ºç°è«åçš„å˜åŒ–\n        new webpack.HashedModuleIdsPlugin(),\n        new webpack.NamedChunksPlugin(),\n    ]\n}\n```\nç„¶ååœ¨`package.json`æ·»åŠ `\"build:dll\": \"webpack --config build/webpack.dll.conf.js\"`ç”¨æ¥ç”Ÿæˆdllï¼Œæ‰§è¡Œä¸€ä¸‹è¯•è¯•ã€‚\n\n![æ‰§è¡Œdllæ‰“åŒ…ç»“æœ](https://oss.yangger.cn/assets/blog/667E3894-9F16-4E11-BE28-D2E9B3E27DCF.png)\n\nåœ¨é¡¹ç›®çš„`static/lib`çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”çš„dll.js, è€Œä¸”åœ¨`static/manifest`ç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆå¯¹åº”çš„manifest.jsonã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹åéœ€è¦å°†ä»–ä»¬ä¸€èµ·ä¸Šä¼ åˆ°git/svnç­‰æºç ä»“åº“ï¼Œå› ä¸ºå‡ ä¹ä¸éœ€è¦æ›´æ–°æˆ–è€…å¾ˆå°‘æ›´æ–°ï¼Œæ‰€ä»¥åªéœ€è¦æ¯æ¬¡æ‰§è¡Œå®Œä¹‹åè®°å¾—ä¸Šä¼ åˆ°æºç ä»“åº“å³å¯ã€‚**å¦‚æœä¸æ‰‹åŠ¨ä¸Šä¼ ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡å™¨æ‰“åŒ…ä»£ç ä¹‹å‰ä¸€å®šè¦æ‰§è¡Œä¸€æ¬¡`npm run build:dll`å‘½ä»¤**\n\næ‰“åŒ…å®Œdllä¹‹åï¼Œéœ€è¦ä¿®æ”¹`webpack.base.js`è®©æˆ‘ä»¬çš„åœ¨ç¼–è¯‘/æ‰“åŒ…çš„æ—¶å€™æ„Ÿå—æ„å»ºé€Ÿåº¦çš„æå‡ã€‚\n\n\u003e webpack.base.js\n\n```javascript\nconst HTMLWebpackIncludeAssetsPlugin = require('html-webpack-include-assets-plugin')  // æŠŠæˆ‘ä»¬çš„dllå¼•å…¥html\nconst CopyWebpackPlugin = require('copy-webpack-plugin') // å°†dllæ–‡ä»¶æ‹·è´åˆ°ä½ çš„distç›®å½•ä¸‹\nconst __root = path.resolve(__dirname, '../')\n// è·å–dllæ–‡ä»¶çš„manifest\nfunction getDllManifest() {\n    var plugins = []\n    Object.keys(config.dll.list).forEach((name) =\u003e {\n        plugins.push(\n            new webpack.DllReferencePlugin({\n                context: __root, // è¿™é‡Œçš„contextå¿…é¡»ä¸DllPluginä¸­çš„contextä¿æŒä¸€è‡´\n                manifest: path.resolve(__root, 'static/manifest/[name].manifest.json').replace(\n                    /\\[name\\]/gi, name)\n            })\n        )\n    })\n    return plugins\n}\n\n//plugins\n\nplugins: [\n\t//...\n\t...getDllManifest(),\n\tnew HTMLWebpackIncludeAssetsPlugin({\n\t    append: false,\n\t    publicPath: config.build.assetsPublicPath,\n\t    assets: [{\n\t        path: config.build.assetsSubDirectory,\n\t        glob: '**/*.js',\n\t        globPath: config.dll.static\n        }],\n\t}),\n]\n```\n\nè¿™æ ·DllPlugin å’Œ DllReferencePluginçš„é…ç½®åŸºæœ¬å°±å®Œæˆäº†\n\n### å…¶ä»–æ„å»ºçš„å°ä¼˜åŒ–å’Œå‘\n\nä¹‹å‰æ„å»ºçš„æ—¶å€™ä¼šä¸€ç›´çœ‹åˆ°è¿™æ ·çš„é”™è¯¯: `# DefaultsError: 'warnings' is not a supported option`\næ˜¯å› ä¸ºUglifyJsPluginæ›´æ–°äº†ï¼Œé…ç½®æ–¹å¼ä¸ä¸€æ ·äº†ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯å¼•ç”¨å¤–éƒ¨çš„[uglifyjs-webpack-plugin]([https://github.com/webpack-contrib/uglifyjs-webpack-plugin](https://github.com/webpack-contrib/uglifyjs-webpack-plugin))æ’ä»¶ä»£æ›¿webpackè‡ªå¸¦çš„ã€‚\n\nä¿®æ”¹å¦‚ä¸‹:\n\n```javascript\n// new webpack.optimize.UglifyJsPlugin({  \n//   compress: {  \n//     warnings: false  \n//   },  \n//   sourceMap: true  \n// }),\nnew UglifyJsPlugin({  \n  cache: '.cache/',  \n  parallel: true,  \n}),  \n```\n\nç„¶ååœ¨devç¯å¢ƒä¸­æ–°å¢[BundleAnalyzerPlugin](https://github.com/webpack-contrib/webpack-bundle-analyzer)ç”¨æ¥æŸ¥çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆä¾èµ–æˆ–è€…å“ªä¸ªæ–‡ä»¶å¤ªå¤§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„åšä»£ç ä¼˜åŒ–\n\n### babe7å‡çº§\n\nå‡çº§åˆ°babel7éå¸¸ç®€å•ï¼Œå¯ä»¥çœ‹[å®˜ç½‘å‡çº§æŒ‡å—](https://babeljs.io/docs/en/v7-migration)ã€‚\nå…¶å®ä¸»è¦æ›´æ–°æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n  1. è‡ªå¸¦æ”¯æŒTypeScriptçš„æ”¯æŒï¼Œts-loaderæˆ–è®¸å¯ä»¥ä¸ç”¨äº†?\n  2. [ç§»é™¤stage-*](https://babeljs.io/blog/2018/07/27/removing-babels-stage-presets)\n  3. ä»¥ä¸‹é¢„è®¾éƒ½å½’å¹¶åˆ°\"@babel/preset-env\"äº†\n\t    -   `babel-preset-es2015`\n\t\t-   `babel-preset-es2016`\n\t\t-   `babel-preset-es2017`\n\t\t-   `babel-preset-latest`\n\t\t-  A combination of the above ^\n\t\næ‰€ä»¥è¿™é‡Œå±•ç¤ºä¸€ä¸‹å‡çº§å`.bablerc`ï¼Œä»…ä¾›å‚è€ƒ~\n\n\u003e .bablerc\n\n```json\n// {\n//   \"presets\": [\n//     [\"latest\", {\n//       \"es2015\": { \"modules\": false }\n//     }],\n//     \"stage-2\"\n//   ],\n//   \"plugins\": [\"transform-runtime\", \"transform-vue-jsx\"],\n//   \"comments\": false,\n//   \"env\": {\n//     \"test\": {\n//       \"presets\": [\"latest\", \"stage-2\"],\n//       \"plugins\": [ \"istanbul\" ]\n//     }\n//   }\n// }\n\n{  \n  \"presets\": [\"@babel/preset-env\", \"@babel/preset-typescript\", \"@vue/babel-preset-jsx\"],  \n  \"plugins\": [\"@babel/plugin-transform-runtime\", \"@babel/plugin-external-helpers\"]  \n}\n```\n\n## æµ‹è¯•\n\nåˆ°è¿™é‡Œå…¬å¸çš„å…ƒè€çº§é¡¹ç›®åŸºæœ¬å·²ç»ä¼˜åŒ–å®Œæ¯•äº†ï¼Œåœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨æµ‹è¯•ä¸€ä¸‹æ‰“åŒ…é€Ÿåº¦çš„åŒºåˆ«è¯•è¯•.\n\n### mac 6æ ¸12çº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/FF249298-12D6-439E-A149-1A51EDF30C55.png)\n\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![mac-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/590E0034-4D68-4BE7-AEDA-7F0FFA4BB58E.png)\n\n### centos å•æ ¸åŒçº¿ç¨‹\n\n\u003e æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°å‰æ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/A535621B-69CB-4478-8C30-B547F4C33601.png)\n\n\u003e æ›´æ–°åæ‰“åŒ…é€Ÿåº¦\n\n![centos-æ›´æ–°åæ‰“åŒ…é€Ÿåº¦](https://oss.yangger.cn/assets/blog/71D1F9DB-E95E-4FE3-A5D3-85AAE3C7F342.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæå‡é€Ÿåº¦çº¦ç­‰äº3/5ï¼Œç›¸å¯¹äºæ¯æ¬¡æäº¤CI/CDèµ°ä¸‹æ¥6-7åˆ†é’Ÿè¿˜æ˜¯æœ‰å¾ˆå¤§æå‡çš„ï¼Œèµ·ç æ³¡â˜•ï¸å˜æˆæ³¡é€Ÿæº¶â˜•ï¸äº†hhhhã€‚\n\n## æ€»ç»“\n\næ€»çš„æ¥è¯´ï¼Œåœ¨è¿™äº›æ–¹æ³•çš„æ¨åŠ¨ä¸‹çš„æ„å»ºé€Ÿåº¦ä¼˜åŒ–è¿˜æ˜¯æœ‰ç€è‚‰çœ¼å¯è§çš„æå‡é€Ÿåº¦çš„ï¼Œè¿™é‡ŒåŸºäºwebpack2.xçš„æå‡æ–¹æ¡ˆçš„æ•ˆæœå› é¡¹ç›®è€Œå¼‚ï¼Œå¯èƒ½æ•ˆæœå¾ˆå¤§ï¼Œä¹Ÿå¯èƒ½**æ²¡æœ‰æ•ˆæœ**ï¼Œè¿™é‡Œåªæ˜¯æä¾›ä¸€äº›æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæˆ–è€…ä¸è¶³å¯ä»¥åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œè°¢è°¢ğŸ™ï½","publishedAt":"0201-03-11T20:24:17.000Z","status":"published","slug":"webpack2-6-ts","author":3,"articletype":null,"created_at":"2021-07-29T07:13:40.603Z","updated_at":"2021-07-29T09:00:21.859Z","top":null,"image":{"id":5,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fe204377a5","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fe204377a5.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fe204377a5","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fe204377a5.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fe204377a5","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fe204377a5.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fe204377a5","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fe204377a5.png"}},"hash":"default_image_fe204377a5","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fe204377a5.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.854Z","updated_at":"2021-07-29T05:57:51.854Z"}}]},{"id":12,"name":"MARKDOWN","slug":"markdown","created_at":"2021-08-02T08:43:49.809Z","updated_at":"2021-08-02T08:43:49.820Z","articles":[{"id":5,"title":"markdownè¯­æ³•cssè°ƒè¯•","description":"ä¸“é—¨ç”¨æ¥è°ƒè¯•markdownçš„è¯­æ³•","content":"# è¿™æ˜¯ä¸€çº§æ ‡é¢˜\n\n## è¿™æ˜¯äºŒçº§æ ‡é¢˜\n\n### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜\n\n#### è¿™æ˜¯å››çº§æ ‡é¢˜\n\n##### è¿™æ˜¯äº”çº§æ ‡é¢˜\n\n###### è¿™æ˜¯å…­çº§æ ‡é¢˜\n\n## å­—ä½“\n\n**è¿™æ˜¯åŠ ç²—çš„æ–‡å­—**\n\n*è¿™æ˜¯å€¾æ–œçš„æ–‡å­—*`\n\n***è¿™æ˜¯æ–œä½“åŠ ç²—çš„æ–‡å­—***\n\n~~è¿™æ˜¯åŠ åˆ é™¤çº¿çš„æ–‡å­—~~\n\n## å¼•ç”¨\n\n\u003e è¿™æ˜¯å¼•ç”¨çš„å†…å®¹\n\n\u003e\u003e è¿™æ˜¯å¼•ç”¨çš„å†…å®¹\n\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e\u003e è¿™æ˜¯å¼•ç”¨çš„å†…å®¹\n\n## åˆ†å‰²çº¿\n\n### åˆ†å‰²çº¿---\n\n--- \n\n### åˆ†å‰²çº¿ ***\n\n***\n\n## å›¾ç‰‡\n\n![blockchain](https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=702257389,1274025419\u0026fm=27\u0026gp=0.jpg \"åŒºå—é“¾\")\n\n## è¶…é“¾æ¥\n\n[ç®€ä¹¦](http://jianshu.com)\n[ç™¾åº¦](http://baidu.com)\n\n## åˆ—è¡¨\n\n### æ— åºåˆ—è¡¨\n\n- åˆ—è¡¨å†…å®¹\n+ åˆ—è¡¨å†…å®¹\n* åˆ—è¡¨å†…å®¹\n\n### æœ‰åºåˆ—è¡¨\n\n1. åˆ—è¡¨å†…å®¹\n2. åˆ—è¡¨å†…å®¹\n3. åˆ—è¡¨å†…å®¹\n\n### åˆ—è¡¨åµŒå¥—\n\n1. è‹¹æœ\n   1. è‹¹æœ6 \n   2. è‹¹æœ7 \n2. å®‰å“\n3. å“ˆå“ˆ\n\n- æµ‹è¯•\n   - æµ‹è¯•1\n   - æµ‹è¯•2\n- ç¬”è®°\n\n## è¡¨æ ¼\n\nå§“å|æŠ€èƒ½|æ’è¡Œ\n--|:--:|--:\nåˆ˜å¤‡|å“­|å¤§å“¥\nå…³ç¾½|æ‰“|äºŒå“¥\nå¼ é£|éª‚|ä¸‰å¼Ÿ\n\n## ä»£ç \n\n`ä»£ç `\n\n```css\narticle #markdown {}\narticle #markdown h1,\narticle #markdown h2,\narticle #markdown h3,\narticle #markdown h4,\narticle #markdown h5,\narticle #markdown h6 {\n    font-family: Inter;\n    font-style: normal;\n    font-weight: bold;\n    line-height: 1.5;\n    margin: 10px 0;\n}\narticle #markdown h1 {\n    font-size: 2.25rem;\n}\narticle #markdown h2 {\n    font-size: 1.625rem;\n}\n\narticle #markdown h3 {\n    font-size: 1.25rem;\n}\n\narticle #markdown h4,\narticle #markdown h5,\narticle #markdown h6 {\n    font-size: 1rem;\n}\n\n```\n\n## æ­£æ–‡\n\nè¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—è¿™æ˜¯æ™®é€šçŠ¶æ€ä¸‹çš„æ–‡å­—\n\n","publishedAt":"2021-08-02T04:00:00.000Z","status":"published","slug":"markdown-css","author":3,"articletype":"Items","created_at":"2021-08-02T08:44:15.613Z","updated_at":"2021-08-03T07:46:26.856Z","top":true,"image":{"id":4,"name":"favicon.png","alternativeText":null,"caption":null,"width":512,"height":512,"formats":{"thumbnail":{"name":"thumbnail_favicon.png","hash":"thumbnail_favicon_4d87055159","ext":".png","mime":"image/png","width":156,"height":156,"size":6.27,"path":null,"url":"/uploads/thumbnail_favicon_4d87055159.png"},"small":{"name":"small_favicon.png","hash":"small_favicon_4d87055159","ext":".png","mime":"image/png","width":500,"height":500,"size":28.98,"path":null,"url":"/uploads/small_favicon_4d87055159.png"}},"hash":"favicon_4d87055159","ext":".png","mime":"image/png","size":5.26,"url":"/uploads/favicon_4d87055159.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:51.548Z","updated_at":"2021-07-29T05:57:51.548Z"}}]}],"homepage":{"id":1,"created_at":"2021-07-29T05:57:49.996Z","updated_at":"2021-07-29T07:29:29.512Z","seo":{"id":1,"metaTitle":"Yangger Blog","metaDescription":"Yanggerçš„åšå®¢","shareImage":{"id":1,"name":"default-image.png","alternativeText":null,"caption":null,"width":1208,"height":715,"formats":{"thumbnail":{"name":"thumbnail_default-image.png","hash":"thumbnail_default_image_fb02149608","ext":".png","mime":"image/png","width":245,"height":145,"size":27.69,"path":null,"url":"/uploads/thumbnail_default_image_fb02149608.png"},"large":{"name":"large_default-image.png","hash":"large_default_image_fb02149608","ext":".png","mime":"image/png","width":1000,"height":592,"size":423.75,"path":null,"url":"/uploads/large_default_image_fb02149608.png"},"medium":{"name":"medium_default-image.png","hash":"medium_default_image_fb02149608","ext":".png","mime":"image/png","width":750,"height":444,"size":250.27,"path":null,"url":"/uploads/medium_default_image_fb02149608.png"},"small":{"name":"small_default-image.png","hash":"small_default_image_fb02149608","ext":".png","mime":"image/png","width":500,"height":296,"size":114.01,"path":null,"url":"/uploads/small_default_image_fb02149608.png"}},"hash":"default_image_fb02149608","ext":".png","mime":"image/png","size":297.42,"url":"/uploads/default_image_fb02149608.png","previewUrl":null,"provider":"local","provider_metadata":null,"created_at":"2021-07-29T05:57:50.518Z","updated_at":"2021-07-29T05:57:50.518Z"}},"hero":{"id":1,"title":"Yangger Blog"}}},"__N_SSG":true},"page":"/[slug]","query":{"slug":"webpack2-6-ts"},"buildId":"jcy5ipSxzxBmo7PK3zeT2","assetPrefix":"https://cdn.yangger.cn","isFallback":false,"gsp":true,"appGip":true,"scriptLoader":[]}</script></body></html>